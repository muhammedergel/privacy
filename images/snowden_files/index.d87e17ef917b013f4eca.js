"use strict";(self.webpackChunksource=self.webpackChunksource||[]).push([[987],{934:(t,e,i)=>{var s=i(421);const n=s.default.instance;i.p=`${n.urls.assetsBasePath}/public/`;var a=i(769),o=i(306);var r=i(846),l=i(869),d=i(942);const h=Symbol("INSTANCE"),c=Symbol("SINGELTONENFORCER");class u{constructor(t){if(t!==c)throw new Error("Instantiation failed: Use Depot.instance instead of new.");this.init()}static get instance(){return this[h]||(this[h]=new u(c)),this[h]}init(){const t=s.default.instance;t.thirdparty&&t.thirdparty.depot&&t.thirdparty.depot.apiUrl?this.apiUrl=t.thirdparty.depot.apiUrl:console.error("Depot requires apiUrl for correct instantiation.")}getBookmarks(){const t=`${this.apiUrl}/bookmarks`;return new Promise(((e,i)=>{this.fetchUrl(t,"GET").then((t=>{Array.isArray(t)?e(t):e([])})).catch((t=>i(t)))}))}deleteBookmarks(){const t=`${this.apiUrl}/bookmarks`;return new Promise(((e,i)=>{this.fetchUrl(t,"DELETE").then((()=>{e()})).catch((t=>i(t)))}))}addBookmark(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("Depot addBookmark - missing valid documentId function param"));const e=`${this.apiUrl}/bookmarks/${t}`;return new Promise(((t,i)=>{this.fetchUrl(e,"PUT").then((()=>{t()})).catch((t=>i(t)))}))}deleteBookmark(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("Depot deleteBookmark - missing valid documentId function param"));const e=`${this.apiUrl}/bookmarks/${t}`;return new Promise(((t,i)=>{this.fetchUrl(e,"DELETE").then((()=>{t()})).catch((t=>i(t)))}))}fetchUrl(t,e="GET"){return fetch(t,{method:e,headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?t.text().then((t=>{throw new Error(t)})).catch((e=>Promise.reject(new Error(`Depot fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`)))):"GET"===e?t.json():Promise.resolve()))}}var p=i(388);class g{getItem(t){throw new Error("AbstractStorage - you have to implement the method getItem!")}setItem(t,e){throw new Error("AbstractStorage - you have to implement the method setItem!")}removeItem(t){throw new Error("AbstractStorage - you have to implement the method removeItem!")}}var m=i(955);class y{static getItem(t){if("string"==typeof t)return m.Z.get(t)}static setItem(t,e,i=7){return"string"==typeof t&&void 0!==e&&(m.Z.set(t,e,{expires:i}),!0)}static removeItem(t){return"string"==typeof t&&(m.Z.remove(t),!0)}}class f extends g{constructor(t=7){super(),this.expires=t}getItem(t){return y.getItem(t)}setItem(t,e){return y.setItem(t,e,this.expires)}removeItem(t){return y.removeItem(t)}}class b{static getItem(t){if("string"!=typeof t)return;let e;try{const i=window.localStorage;i&&null!==i.getItem(t)&&(e=i.getItem(t))}catch(t){}return e}static setItem(t,e){if("string"!=typeof t||void 0===e)return!1;let i=!1;try{const s=window.localStorage;s&&(s.setItem(t,e),i=!0)}catch(t){}return i}static removeItem(t){if("string"!=typeof t)return!1;let e=!1;try{const i=window.localStorage;i&&(i.removeItem(t),e=!0)}catch(t){}return e}}class w extends g{getItem(t){return b.getItem(t)}setItem(t,e){return b.setItem(t,e)}removeItem(t){return b.removeItem(t)}}var v=i(115);class I extends g{getItem(t){return v.Z.getItem(t)}setItem(t,e){return v.Z.setItem(t,e)}removeItem(t){return v.Z.removeItem(t)}}class E{constructor(t,e="session",i=7,s="polygon"){if("string"==typeof t&&t){switch(this.name=`${s}_${t}`,e){case"local":this.storage=new w;break;case"cookie":this.storage=new f(i);break;default:this.storage=new I}this.valueObject=this.getValueObject()}}getValueObject(){if(!this.name||!this.storage)return{};const t=this.storage.getItem(this.name);let e,i;return t&&(e=this.decodeBase64(t)),e&&(i=this.parseJson(e)),i||{}}reload(){this.valueObject=this.getValueObject()}updateStorage(){if(!this.name)return;const t=JSON.stringify(this.valueObject);let e;t&&(e=this.encodeBase64(t)),e&&this.storage.setItem(this.name,e)}encodeBase64(t){try{return window.btoa(encodeURIComponent(t))}catch(t){return}}decodeBase64(t){try{return decodeURIComponent(window.atob(t))}catch(t){return}}parseJson(t){if(t&&"string"==typeof t)try{return JSON.parse(t)}catch(t){return}}getItem(t){if("string"==typeof t)return this.valueObject[t]}setItem(t,e){if("string"!=typeof t||void 0===e)return!1;const i={};return i[t]=e,Object.assign(this.valueObject,i),this.updateStorage(),!0}removeItem(t){return"string"==typeof t&&(delete this.valueObject[t],this.updateStorage(),!0)}}const S=Symbol("INSTANCE"),A=Symbol("SINGELTONENFORCER");class k{constructor(t){if(t!==A)throw new Error("Instantiation failed: Use Bookmarks.instance instead of new.");this.depot=u.instance,this.localStorage=new E("bookmarks","local"),this._documentIds=[],this._updatedAt=null,this._syncedAt=null,this._isInitialized=!1,this.init()}static get instance(){return this[S]||(this[S]=new k(A)),this[S]}init(){const t=l.default.instance;if(!t.isLoggedIn||s.default.instance.disableBookmarks)return;const e=p.Z.instance;t.isLoggedIn&&t.isNewLoggedIn&&this.reset();let i=t.isNewLoggedIn||"homepage"===e.route||"fuermich"===e.route||"bookmarks"===e.route;if(!t.isNewLoggedIn){this.loadDocumentIdsFromLocalStorage()&&!i&&(this.isInitialized=!0)}i=i||!this.isInitialized||!this.syncedAt,i&&this.loadDocumentIdsFromServer().then((()=>{this.isInitialized=!0})).catch((()=>{this.documentIds.length>0?this.isInitialized=!0:r.Z.publish(o.A7,{type:d._p})})),window.addEventListener("pageshow",(()=>{this.reloadLocaLStorage(),Promise.resolve().then((()=>r.Z.publish(o._B)))}))}loadDocumentIdsFromLocalStorage(){return!!Array.isArray(this.localStorage.getItem("documentIds"))&&(this.documentIds=this.localStorage.getItem("documentIds"),this._updatedAt=this.localStorage.getItem("updatedAt")||null,this._syncedAt=this.localStorage.getItem("syncedAt")||null,!0)}reloadLocaLStorage(){this.localStorage.reload(),this.loadDocumentIdsFromLocalStorage()}loadDocumentIdsFromServer(){return new Promise(((t,e)=>{this.depot.getBookmarks().then((i=>{Array.isArray(i)?(this.documentIds=i,this._syncedAt=Date.now(),this.save(),t()):e(new Error("Bookmarks loadDocumentIdsFromServer - received invalid documentIds data from Depot"))})).catch((t=>{console.error(t.message),e(t)}))}))}reset(){this.documentIds=[],this._updatedAt=null,this._syncedAt=null,this.save()}save(){let t=this.localStorage.setItem("documentIds",this._documentIds);return this._updatedAt=Date.now(),t=t&&this.localStorage.setItem("updatedAt",this._updatedAt),t=t&&this.localStorage.setItem("syncedAt",this._syncedAt),t}add(t,e){if(!t||"string"!=typeof t||!e||"string"!=typeof e||!Array.isArray(this._documentIds))return Promise.reject(new Error("Bookmarks add - missing valid documentId and/or collection function param or bookmarks are not yet initialized"));return this._documentIds.indexOf(t)>-1?Promise.resolve():new Promise(((e,i)=>{this.depot.addBookmark(t).then((()=>{this._documentIds.push(t);if(!this.save())throw new Error("Bookmarks add - error while updating data");return e()})).catch((t=>i(t)))}))}delete(t,e){if(!t||"string"!=typeof t||!e||"string"!=typeof e||!Array.isArray(this._documentIds))return Promise.reject(new Error("Bookmarks delete - missing valid documentId and/or collection function param or bookmarks are not yet initialized"));const i=this._documentIds.indexOf(t);return-1===i?Promise.resolve():new Promise(((e,s)=>{this.depot.deleteBookmark(t).then((()=>{this._documentIds.splice(i,1);if(!this.save())throw new Error("Bookmarks delete - error while updating data");return e()})).catch((t=>s(t)))}))}deleteAll(t){return t&&"string"==typeof t?new Promise(((t,e)=>{this.depot.deleteBookmarks().then((()=>{this._documentIds=[];if(!this.save())throw new Error("Bookmarks deleteAll - error while updating data");return t()})).catch((t=>e(t)))})):Promise.reject(new Error("Bookmarks deleteAll - missing valid collection function param"))}contains(t,e){return!!(t&&"string"==typeof t&&e&&"string"==typeof e&&Array.isArray(this._documentIds))&&-1!==this._documentIds.indexOf(t)}get documentIds(){return Array.isArray(this._documentIds)?this._documentIds:[]}set documentIds(t){if(!Array.isArray(t))return;let e=!this.isInitialized||!Array.isArray(this._documentIds)||this._documentIds.length!==t.length;e||t.forEach(((t,i)=>{this._documentIds.indexOf(t)!==i&&(e=!0)})),e&&(this._documentIds=t,Promise.resolve().then((()=>r.Z.publish(o._B))))}get isInitialized(){return this._isInitialized}set isInitialized(t){this._isInitialized!==!!t&&(this._isInitialized=!!t,this._isInitialized&&r.Z.publish(o.mJ))}get updatedAt(){return this._updatedAt}get syncedAt(){return this._syncedAt}}var C=i(82),P=i(141);class L{get id(){return null}toObject(){const t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach((e=>{"function"!=typeof this[e]&&(t[e]=this[e])})),t}}class T extends L{constructor(t,e,i){super(),this._documentId=t,this._collection=e,this._isBookmarked=!!i}get id(){return P.gQ}get documentId(){return this._documentId}get isBookmarked(){return this._isBookmarked}}var _=i(403);const O=Symbol("INSTANCE"),x=Symbol("SINGELTONENFORCER");class N{constructor(t){if(t!==x)throw new Error("Instantiation failed: Use OverlayHandler.instance instead of new.");this.init()}static get instance(){return this[O]||(this[O]=new N(x)),this[O]}init(){this.overlays=[],r.Z.subscribe(o.oc,(t=>this.onOverlayOpened(t)),this),r.Z.subscribe(o.FW,(t=>this.onOverlayClosed(t)),this),r.Z.subscribe(o.R_,(()=>this.onPageResume()),this),this.updateState()}onOverlayOpened(t){t.id&&Array.isArray(this.overlays)&&!this.overlays.find((e=>e.id===t.id))&&(this.overlays.push(t),this.updateState())}onOverlayClosed(t){this.overlays=this.overlays.filter((e=>e.id!==t.id)),this.updateState()}updateState(){document.documentElement.classList.toggle("overlay-open",this.isScrollingPrevented),r.Z.publish(o.KG,this.currentOverlay)}onPageResume(){this.updateState()}get currentOverlay(){return this.overlays[this.overlays.length-1]||null}get isScrollingPrevented(){return this.overlays.filter((t=>t.preventScrolling)).length>0}}class B{constructor(t,e,i){this.headline=t,this.description=e,this.callback="function"==typeof i?i:null,this.boundOnDescriptionTriggerClick=t=>this.onDescriptionTriggerClick(t),this.boundOnCloseIconClick=()=>this.onCloseIconClick(),this.init()}init(){if(this.el=_.Z.createElementByPrototypeId(this.prototypeId),!this.el)return;this.closeIcon=this.el.querySelector('[data-notification-el="closeIcon"]'),this.closeIcon.addEventListener("click",this.boundOnCloseIconClick);this.el.querySelector('[data-notification-el="headline"]').innerHTML=this.headline;const t=this.el.querySelector('[data-notification-el="description"]');this.description?(t.innerHTML=this.description,this.descriptionTrigger=t.querySelector('[data-notification-el="trigger"]'),this.descriptionTrigger&&this.descriptionTrigger.addEventListener("click",this.boundOnDescriptionTriggerClick)):(t.parentNode.removeChild(t),this.closeIcon.parentNode.classList.add("self-center"))}show(){C.default.isApp||null!==N.instance.currentOverlay?this.container=document.querySelector('[data-notification-el="container"][data-notification-position~="overlay"]'):this.container=document.querySelector('[data-notification-el="container"][data-notification-position~="default"]'),this.container||(this.container=document.body),this.container.appendChild(this.el),this.el.style.opacity=0,r.Z.toggleElementVisibility(this.el,!0),setTimeout((()=>{this.el.style.opacity=1}),0)}hide(){r.Z.toggleElementVisibility(this.el,!1),this.destroy()}onDescriptionTriggerClick(t){t.preventDefault(),this.descriptionTrigger.blur(),"function"==typeof this.callback&&this.callback(),r.Z.publish(o.QM)}onCloseIconClick(){r.Z.publish(o.QM)}destroy(){this.closeIcon.removeEventListener("click",this.boundOnCloseIconClick),this.descriptionTrigger&&this.descriptionTrigger.removeEventListener("click",this.boundOnDescriptionTriggerClick),this.callback=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el)}get prototypeId(){return""}}class D extends B{get prototypeId(){return"prototype-notification-failure"}}class R extends B{get prototypeId(){return"prototype-notification-success"}}const Z=Symbol("INSTANCE"),U=Symbol("SINGELTONENFORCER");class M{constructor(t){if(t!==U)throw new Error("Instantiation failed: Use NotificationService.instance instead of new.");this.queue=null,this.currentNotification=null,this.notificationTimeoutId=null,this.viewLookup={},this.viewLookup[d.YN]=R,this.viewLookup[d.fv]=D,this.boundOnHideNotificationTriggered=()=>this.hideCurrentNotification(),this.init()}static get instance(){return this[Z]||(this[Z]=new M(U)),this[Z]}init(){r.Z.subscribe(o.QM,this.boundOnHideNotificationTriggered)}addNotification(t){if(!t||!this.viewLookup[t.type]||!t.headline)return;const e=new this.viewLookup[t.type](t.headline,t.description,t.callback);this.queue={view:e,duration:Number.isInteger(t.duration)?t.duration:4},this.showNextNotification()}showNextNotification(){void 0!==this.notificationTimeoutId&&clearTimeout(this.notificationTimeoutId),this.currentNotification?this.hideCurrentNotification():this.queue&&(this.queue.view&&(this.currentNotification=this.queue.view,this.queue.duration&&(this.notificationTimeoutId=setTimeout((()=>{this.hideCurrentNotification()}),1e3*this.queue.duration)),this.currentNotification.show()),this.queue=null)}hideCurrentNotification(){void 0!==this.notificationTimeoutId&&clearTimeout(this.notificationTimeoutId),this.currentNotification&&(this.currentNotification.hide(),this.currentNotification=null),setTimeout((()=>{this.showNextNotification()}),200)}}class V{constructor(){this.documentId=null,this.collection=null,this.bookmarks=k.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t,e){if(!l.default.instance.isLoggedIn)return r.Z.publish(o.C$,{type:"bookmarks"}),void this.destroy();this.documentId=t,this.collection=e,this.addBookmark()}addBookmark(){this.bookmarks.add(this.documentId,this.collection).then((()=>{r.Z.publish(o.Y5,this.documentId,this.collection);const{urls:t}=s.default.instance,e=t&&t.user&&t.user.bookmarks?t.user.bookmarks:"";if(M.instance.addNotification({type:d.YN,headline:"Zur Merkliste hinzugefügt",description:`Ihr Artikel wurde gespeichert. <a href="${e}">Zur Merkliste</a>`}),C.default.isApp){const t=s.default.instance;t.app&&t.app.pageContext&&t.app.pageContext.documentId===this.documentId&&t.app.pageContext.collection===this.collection&&r.Z.publish(o.s_,new T(this.documentId,this.collection,!0))}this.destroy()})).catch((()=>{r.Z.publish(o.A7,{type:d.nV,documentId:this.documentId,collection:this.collection}),M.instance.addNotification({type:d.fv,headline:"Fehler",description:'Beim Speichern des Artikels ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})}))}notificationCallback(){setTimeout((()=>{this.addBookmark()}),1e3)}destroy(){this.documentId=null,this.collection=null,this.bookmarks=null,this.boundNotificationCallback=null}}var z=i(206);class j{execute(t){Array.isArray(t)?!C.default.isApp||C.default.appVersion<z.Z.instance.minAudioPlaylistVersion||"function"!=typeof z.Z.instance.triggerAddToAudioPlaylist||0===t.length||(l.default.instance.isLoggedIn?z.Z.instance.triggerAddToAudioPlaylist(t):r.Z.publish(o.C$,{type:"playlist"})):console.warn("AddToPlaylistController - missing or malformed parameter `clips`",t)}}class q extends L{constructor(t){super(),this._target=t}get id(){return P.y}get target(){return this._target}}const F={appinfo:{isLoginRequired:!1},darkmode:{isLoginRequired:!1},fontsize:{isLoginRequired:!1},offlinelibrary:{isLoginRequired:!0,loginLayerType:"offlinelibrary"},playlist:{isLoginRequired:!0,loginLayerType:"playlist"},push:{isLoginRequired:!1}};class ${execute({targetId:t=""}){if(!C.default.isApp||!t)return;const e=F[t];e&&(!e.isLoginRequired||l.default.instance.isLoggedIn?r.Z.publish(o.s_,new q(t)):e.loginLayerType&&r.Z.publish(o.C$,{type:e.loginLayerType}))}}class W extends L{get id(){return P.ep}}class G{execute(){C.default.isApp&&(this.initBookmark(),r.Z.publish(o.s_,new W),this.disableLinks())}initBookmark(){const t=s.default.instance;if("article"===p.Z.instance.route&&t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection){const e=k.instance;r.Z.publish(o.s_,new T(t.app.pageContext.documentId,t.app.pageContext.collection,e.contains(t.app.pageContext.documentId,t.app.pageContext.collection)))}}disableLinks(){if(!(C.default.appCode&&s.default.instance.app&&s.default.instance.app.disabledLinks&&Array.isArray(s.default.instance.app.disabledLinks[C.default.appCode])))return;const t=s.default.instance.app.disabledLinks[C.default.appCode];let e=[];t.forEach((t=>{const i=Array.from(document.querySelectorAll(`a[href*="${t}"]`));e=e.concat(i)})),e.forEach((t=>{t.insertAdjacentHTML("afterend",t.textContent),t.remove()}))}}var H=i(218);const J=["emptied","loadstart","pause","play","playing","progress","ratechange","timeupdate","volumechange","waiting"],Q="MODE_DEFAULT",K="MODE_AUTOPLAY",Y="MODE_RESUME",X=new E("audio","local");let tt=null,et=!1;const it={mode:Q,_clip:null,_currentTime:0,_playbackRate:1,_volume:1,buffered:[],duration:0,isPlaying:!1,isLoading:!1,isPaused:!0,isEnded:!1,isRestored:!1,init(){this.boundOnStateChanged=()=>this.onStateChanged(),this.boundOnCanPlay=t=>this.onCanPlay(t),this.boundOnLoadedMetadata=t=>this.onLoadedMetadata(t),this.boundOnWindowStorage=t=>this.onWindowStorage(t),this.restoreFromLocalStorage()},onStateChanged(){this.updateStore(),this.updateLocalStorage()},onLoadedMetadata(){tt.removeEventListener("loadedmetadata",this.boundOnLoadedMetadata),this.onCanPlay()},onCanPlay(){tt.removeEventListener("canplay",this.boundOnCanPlay),window.removeEventListener("storage",this.boundOnWindowStorage),H.default.isMobileSafari||C.default.isIOSApp||this.restoreAudio(),tt.play().then((()=>{(H.default.isMobileSafari||C.default.isIOSApp)&&this.restoreAudio(),et=!1})).catch((()=>{this.mode===K&&(this.mode=Y,this.isRestored=!0,et=!0,this.detachAudio(),this.onStateChanged())}))},onWindowStorage(t){t.key===X.name&&(window.removeEventListener("storage",this.boundOnWindowStorage),this.mode=Y,this.isRestored=!0,this.detachAudio(),this.updateStore())},updateStore(){let t=tt&&tt.duration?tt.duration:0;!t&&this.clip&&Number.isInteger(this.clip.duration)&&(t=this.clip.duration/1e3);const e=[];if(tt&&tt.buffered&&tt.buffered.length>0)for(let t=0;t<tt.buffered.length;t++)e.push({start:tt.buffered.start(t),end:tt.buffered.end(t)});!et&&tt&&tt instanceof HTMLAudioElement&&(this._currentTime=tt.currentTime,this._playbackRate=tt.playbackRate,this._volume=tt.volume),this.buffered=e,this.duration=t,this.isLoading=tt&&tt.readyState<HTMLMediaElement.HAVE_FUTURE_DATA&&!tt.ended,this.isPlaying=tt&&!tt.paused&&!tt.ended&&!this.isLoading,this.isEnded=tt&&tt.ended,this.isPaused=!tt||tt.paused},updateLocalStorage(){X.setItem("clip",this.clip),X.setItem("currentTime",this.currentTime),X.setItem("volume",this.volume),X.setItem("playbackRate",this.playbackRate),X.setItem("isPlaying",tt&&!tt.paused&&!tt.ended),X.setItem("updatedAt",(new Date).getTime())},play(){if(!this.clip)return;let t;switch(this.mode){case K:t=this.clip.autoplayUrl?this.clip.autoplayUrl:this.clip.audioUrl;break;case Y:t=this.clip.resumeUrl?this.clip.resumeUrl:this.clip.audioUrl;break;default:t=this.clip.audioUrl}t&&(tt||this.attachAudio(),this.isRestored=!1,tt.src!==t?((H.default.isMobileSafari||C.default.isIOSApp)&&tt.addEventListener("loadedmetadata",this.boundOnLoadedMetadata),tt.addEventListener("canplay",this.boundOnCanPlay),et=!0,tt.src=t):(tt.play(),et=!1))},pause(){tt&&this.isPlaying&&"function"==typeof tt.pause&&tt.pause()},clear(){this._clip=null,this._currentTime=0,tt&&this.detachAudio(),this.onStateChanged()},attachAudio(){tt||(tt=document.createElement("audio"),(H.default.isMobileSafari||C.default.isIOSApp)&&tt.addEventListener("loadedmetadata",this.boundOnLoadedMetadata),tt.addEventListener("canplay",this.boundOnCanPlay),J.forEach((t=>{tt.addEventListener(t,this.boundOnStateChanged)})),document.body.appendChild(tt))},detachAudio(){J.forEach((t=>{tt.removeEventListener(t,this.boundOnStateChanged)})),tt.removeEventListener("loadedmetadata",this.boundOnLoadedMetadata),tt.removeEventListener("canplay",this.boundOnCanPlay),tt.remove(),tt=null},restoreFromLocalStorage(){const t=X.getItem("playbackRate");if("number"!=typeof t||Number.isNaN(t)||(this._playbackRate=t),!X.getItem("clip"))return void this.clearLocalStorage();if((new Date).getTime()-(X.getItem("updatedAt")||0)>108e5)this.clearLocalStorage();else{this._clip=X.getItem("clip");const t=X.getItem("currentTime"),e=X.getItem("volume");this.mode=X.getItem("isPlaying")?K:Q,"number"!=typeof t||Number.isNaN(t)||(this._currentTime=t),"number"!=typeof e||Number.isNaN(e)||(this._volume=e),this.updateStore(),this.mode===K&&(window.addEventListener("storage",this.boundOnWindowStorage),this.play())}},restoreAudio(){tt.currentTime=this._currentTime,tt.volume=this._volume,tt.playbackRate=this._playbackRate},reloadLocaLStorage(){X.reload(),this.restoreFromLocalStorage()},clearLocalStorage(){X.removeItem("clip"),X.removeItem("isPlaying"),X.removeItem("currentTime"),X.removeItem("volume"),X.removeItem("updatedAt")},get clip(){return this._clip},set clip(t){t&&t.id&&t.audioUrl&&(this.mode=Q,et=!0,tt&&tt.src&&(tt.src=""),this._currentTime=0,this._clip={audioUrl:t.audioUrl,autoplayUrl:t.autoplayUrl,resumeUrl:t.resumeUrl,downloadUrl:t.downloadUrl||t.audioUrl,duration:t.duration||0,headline:t.headline||"",id:t.id,kicker:t.kicker||"",posterUrl:t.posterUrl||"",chapters:t.chapters||null},this.onStateChanged())},get currentTime(){return this._currentTime},set currentTime(t){const e=Math.max(parseFloat(t),0);Number.isNaN(e)||e>this.duration||(tt?tt.currentTime=e:this._currentTime=e)},get playbackRate(){return this._playbackRate},set playbackRate(t){const e=parseFloat(t);Number.isNaN(e)||e<.25||e>4||(tt?tt.playbackRate=e:(this._playbackRate=e,X.setItem("playbackRate",e)))},get volume(){return this._volume},set volume(t){const e=parseFloat(t);Number.isNaN(e)||e<0||e>1||(tt?tt.volume=e:this._volume=e)},get chapterPositions(){return this.clip&&Array.isArray(this.clip.chapters)?this.clip.chapters.map((t=>t.position)):[]},get chapter(){if(!this.clip||!Array.isArray(this.clip.chapters))return null;let t=null;return this.clip.chapters.forEach((e=>{const i=t?t.position:-1;e.position>i&&e.position<=this.currentTime&&(t=e)})),t},get isDebuggingActive(){try{return"1"===localStorage.getItem("polygon_audio_debugging")}catch(t){return!1}}},st={get instance(){return a.Z.store("WebAudio")}};class nt{execute(){C.default.isApp&&z.Z.isNativeAudioPlayerSupported||st.instance.clear()}}class at{execute(){C.default.isApp&&z.Z.isNativeAudioPlayerSupported||st.instance.pause()}}class ot{execute(t){t&&t.id&&t.audioUrl&&(C.default.isApp&&z.Z.instance.isNativeAudioPlayerSupported?z.Z.instance.triggerNativeAudioPlayer(t):(st.instance.clip=t,st.instance.play()))}}class rt{execute(){C.default.isApp&&z.Z.isNativeAudioPlayerSupported||st.instance.play()}}class lt{execute(t){C.default.isApp&&z.Z.isNativeAudioPlayerSupported||(st.instance.playbackRate=t)}}class dt{execute(t){C.default.isApp&&z.Z.isNativeAudioPlayerSupported||(st.instance.currentTime=t)}}class ht{execute(t){C.default.isApp&&z.Z.isNativeAudioPlayerSupported||(st.instance.volume=t)}}const ct=Symbol("INSTANCE"),ut=Symbol("SINGELTONENFORCER");class pt{constructor(t){if(t!==ut)throw new Error("Instantiation failed: Use BreakingNewsData.instance instead of new.");s.default.instance.disableBreakingnews||(this.init(),this.fetchBreakingNews())}static get instance(){return this[ct]||(this[ct]=new pt(ut)),this[ct]}init(){if(v.Z.getItem(d.E9.breakingNews.name)){let t;try{t=JSON.parse(v.Z.getItem(d.E9.breakingNews.name))}catch(t){}if(t){const e=s.default.instance,i=e.cacheControl&&e.cacheControl.breakingnews&&Number.isInteger(e.cacheControl.breakingnews.sessionStorageMaxAge)?e.cacheControl.breakingnews.sessionStorageMaxAge:900,n=Date.now()-1e3*i;if(t.updated_at&&t.updated_at>=n&&t.items&&Array.isArray(t.items))return void(this._items=t.items)}}this._items=[]}fetchBreakingNews(){const t=s.default.instance;if(!t.urls||"string"!=typeof t.urls.assetsBasePath)return;const e=`${t.urls.assetsBasePath}/assets/news/breakingnews.json`;fetch(e,{method:"GET"}).then((t=>t.json())).then((t=>this.parseFetchedBreakingNews(t))).catch((()=>console.error("Error while fetching breaking news.")))}parseFetchedBreakingNews(t){t&&Array.isArray(t)&&(this.items=t)}updateSessionStorage(t){const e={items:t&&Array.isArray(t)?t:[],updated_at:Date.now()};v.Z.setItem(d.E9.breakingNews.name,JSON.stringify(e))}get items(){return this._items}set items(t){if(!t||!Array.isArray(t))return;let e=t.length!==this._items.length;e||t.forEach((t=>{-1===this._items.findIndex((e=>e.id===t.id))&&(e=!0)})),this._items=t,this.updateSessionStorage(t),e&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.gx,t)}}var gt=i(71);class mt{constructor(){this.link=null,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){t?(this.link=t,this.copyLinkToClipboard()):this.destroy()}copyLinkToClipboard(){gt.Z.copyToClipboard(this.link)?M.instance.addNotification({type:d.YN,headline:"Link kopiert",description:"Der Artikel-Link wurde erfolgreich in Ihrer Zwischenablage gespeichert."}):M.instance.addNotification({type:d.fv,headline:"Fehler",description:'Beim Kopieren des Artikel-Links ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})}notificationCallback(){setTimeout((()=>{this.copyLinkToClipboard()}),1e3)}destroy(){this.link=null,this.boundNotificationCallback=null}}const yt=Symbol("INSTANCE"),ft=Symbol("SINGELTONENFORCER");class bt{constructor(t){if(t!==ft)throw new Error("Instantiation failed: Use GiftService.instance instead of new.");this.init()}static get instance(){return this[yt]||(this[yt]=new bt(ft)),this[yt]}init(){const t=s.default.instance;t.thirdparty&&t.thirdparty.gift&&t.thirdparty.gift.apiUrl?this.apiUrl=t.thirdparty.gift.apiUrl:console.error("GiftService requires apiUrl for correct instantiation.")}getGiftCredits(){const t=`${this.apiUrl}/credits`;return new Promise(((e,i)=>{this.fetchUrl(t,"GET").then((t=>{t&&Number.isInteger(t.giftCredit)?e(t.giftCredit):e(0)})).catch((t=>i(t)))}))}createGiftArticle(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("GiftService createGiftArticle - missing valid documentId function param"));const e=new URL(`${this.apiUrl}/create`);e.searchParams.set("article",t);return new Promise(((t,i)=>{this.fetchUrl(e.href,"GET").then((e=>{t(e)})).catch((t=>i(t)))}))}fetchUrl(t,e="GET"){return fetch(t,{method:e,headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status&&201!==t.status?t.text().then((t=>{throw new Error(t)})).catch((e=>Promise.reject(new Error(`GiftService fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`)))):"GET"===e?t.json():Promise.resolve()))}}const wt={isInitialized:!1,credits:null,tokenLookup:{},initialize(){bt.instance.getGiftCredits().then((t=>{Number.isInteger(t)&&(this.credits=t,this.isInitialized=!0)})).catch((()=>{}))},addToken(t,e){t&&"string"==typeof t&&e&&(this.tokenLookup[t]=e)},getToken(t){return this.tokenLookup[t]}},vt={get instance(){return a.Z.store("Gift")}};class It{constructor(){this.documentId=null,this.giftService=bt.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){const e=l.default.instance;e.isLoggedIn&&e.hasPaidAccess?(this.documentId=t,this.createGiftArticle()):this.destroy()}createGiftArticle(){this.giftService.createGiftArticle(this.documentId).then((t=>{if(t.articleId!==this.documentId||!t.token)throw new Error("Invalid response");const e=vt.instance;e.addToken(this.documentId,t.token),r.Z.publish(o.xX,this.documentId,t.token),Number.isInteger(t.giftCredit)&&(e.credits=t.giftCredit),this.destroy()})).catch((()=>{M.instance.addNotification({type:d.fv,headline:"Fehler",description:'Beim Erstellen des Links ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})}))}notificationCallback(){setTimeout((()=>{this.createGiftArticle()}),1e3)}destroy(){this.documentId=null,this.giftService=null,this.boundNotificationCallback=null}}class Et{constructor(){this.documentId=null,this.collection=null,this.bookmarks=k.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t,e){if(!l.default.instance.isLoggedIn)return r.Z.publish(o.C$,{type:"bookmarks"}),void this.destroy();this.documentId=t,this.collection=e,this.deleteBookmark()}deleteBookmark(){this.bookmarks.delete(this.documentId,this.collection).then((()=>{r.Z.publish(o.M6,this.documentId,this.collection);const{urls:t}=s.default.instance,e=t&&t.user&&t.user.bookmarks?t.user.bookmarks:"";if(M.instance.addNotification({type:d.YN,headline:"Aus Merkliste entfernt",description:`Ihr Artikel wurde aus der <a href="${e}">Merkliste</a> gelöscht.`}),C.default.isApp){const t=s.default.instance;t.app&&t.app.pageContext&&t.app.pageContext.documentId===this.documentId&&t.app.pageContext.collection===this.collection&&r.Z.publish(o.s_,new T(this.documentId,this.collection,!1))}this.destroy()})).catch((()=>{r.Z.publish(o.A7,{type:d.Wg,documentId:this.documentId,collection:this.collection}),M.instance.addNotification({type:d.fv,headline:"Fehler",description:'Beim Löschen des Artikels ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})}))}notificationCallback(){setTimeout((()=>{this.deleteBookmark()}),1e3)}destroy(){this.documentId=null,this.collection=null,this.bookmarks=null,this.boundNotificationCallback=null}}class St{constructor(t,e,i,s="Ok",n="Abbrechen"){this.callback="function"==typeof t?t:null,this.headline=e,this.description=i,this.confirmButtonLabel=s,this.cancelButtonLabel=n,this.boundOnConfirmButtonClick=()=>this.onConfirmTriggered(),this.boundOnCancelTriggered=()=>this.onCancelTriggered(),this.boundOnKeyDown=t=>this.onKeyDown(t),this.init()}init(){if(this.container=document.querySelector('[data-confirmationlayer-el="container"]'),this.container||(this.container=document.body),this.el=_.Z.createElementByPrototypeId(this.prototypeId),!this.el)return;const t=this.el.querySelector('[data-confirmationlayer-el="headline"]');t&&(this.headline?t.innerHTML=this.headline:r.Z.toggleElementVisibility(t,!1));const e=this.el.querySelector('[data-confirmationlayer-el="description"]');if(e&&(this.description?e.innerHTML=this.description:r.Z.toggleElementVisibility(e,!1)),this.confirmButton=this.el.querySelector('[data-confirmationlayer-el="confirmButton"]'),this.confirmButton)if(this.confirmButtonLabel){const t=this.confirmButton.querySelector('[data-confirmationlayer-el="confirmButtonLabel"]');t&&(t.innerHTML=this.confirmButtonLabel),this.confirmButton.addEventListener("click",this.boundOnConfirmButtonClick)}else r.Z.toggleElementVisibility(this.confirmButton,!1);if(this.cancelButton=this.el.querySelector('[data-confirmationlayer-el="cancelButton"]'),this.cancelButton)if(this.cancelButtonLabel){const t=this.cancelButton.querySelector('[data-confirmationlayer-el="cancelButtonLabel"]');t&&(t.innerHTML=this.cancelButtonLabel),this.cancelButton.addEventListener("click",this.boundOnCancelTriggered)}else r.Z.toggleElementVisibility(this.cancelButton,!1);this.closeIcon=this.el.querySelector('[data-confirmationlayer-el="closeIcon"]'),this.closeIcon&&this.closeIcon.addEventListener("click",this.boundOnCancelTriggered),this.background=this.el.querySelector('[data-confirmationlayer-el="background"]'),this.background&&this.background.addEventListener("click",this.boundOnCancelTriggered)}open(){this.container.appendChild(this.el),this.el.style.opacity=0,r.Z.toggleElementVisibility(this.el,!0),this.returnFocusElement=window.document.activeElement,this.closeIcon.focus(),setTimeout((()=>{this.el.style.opacity=1}),0),window.document.addEventListener("keydown",this.boundOnKeyDown,!0)}close(){r.Z.toggleElementVisibility(this.el,!1),this.returnFocusElement&&(this.returnFocusElement.focus(),this.returnFocusElement=null),r.Z.publish(o.lf),this.destroy()}onConfirmTriggered(){"function"==typeof this.callback&&this.callback(d.WK),this.close()}onCancelTriggered(){"function"==typeof this.callback&&this.callback(d.Ct),this.close()}onKeyDown(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||(t.preventDefault(),this.close())}destroy(){this.closeIcon&&this.closeIcon.removeEventListener("click",this.boundOnCancelTriggered),this.confirmButton&&this.confirmButton.removeEventListener("click",this.boundOnConfirmButtonClick),this.cancelButton&&this.cancelButton.removeEventListener("click",this.boundOnCancelTriggered),this.background&&this.closeIcon.removeEventListener("click",this.boundOnCancelTriggered),window.document.removeEventListener("keydown",this.boundOnKeyDown,!0),this.callback=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=null}get prototypeId(){return"prototype-confirmation-layer"}}const At=Symbol("INSTANCE"),kt=Symbol("SINGELTONENFORCER");class Ct{constructor(t){if(t!==kt)throw new Error("Instantiation failed: Use ConfirmationLayerService.instance instead of new.");this.queue=[],this.currentConfirmationLayer=null,this.boundOnConfirmationLayerClosed=()=>this.onConfirmationLayerClosed(),this.init()}static get instance(){return this[At]||(this[At]=new Ct(kt)),this[At]}init(){r.Z.subscribe(o.lf,this.boundOnConfirmationLayerClosed)}addConfirmationLayer(t){if(!t)return;this.removeConfirmationLayerById(t.id);const e=new St(t.callback,t.headline,t.description,t.confirmButtonLabel,t.cancelButtonLabel);this.queue.unshift({id:t.id||"",view:e}),this.currentConfirmationLayer||this.showNextConfirmationLayer()}removeConfirmationLayerById(t){if(!t)return;this.queue.filter((e=>e.id===t)).forEach((t=>{const e=this.queue.indexOf(t);-1!==e&&(t.view.destroy(),this.queue.splice(e,1))}))}showNextConfirmationLayer(){if(this.currentConfirmationLayer)return void this.currentConfirmationLayer.destroy();if(0===this.queue.length)return;const t=this.queue.pop();t.view&&(this.currentConfirmationLayer=t.view,this.currentConfirmationLayer.open())}onConfirmationLayerClosed(){this.currentConfirmationLayer&&(this.currentConfirmationLayer=null),setTimeout((()=>{this.showNextConfirmationLayer()}),400)}}class Pt{constructor(){this.collection=null,this.bookmarks=k.instance,this.boundConfirmationLayerCallback=t=>this.confirmationLayerCallback(t),this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){this.collection=t,Ct.instance.addConfirmationLayer({id:`DeleteAllBookmarks-${this.collection}`,headline:"Alle Artikel entfernen?",description:"Möchten Sie wirklich alle Artikel aus Ihrer Merkliste löschen? Diese Aktion kann nicht rückgängig gemacht werden.",confirmButtonLabel:"Artikel entfernen",cancelButtonLabel:"Abbrechen",callback:this.boundConfirmationLayerCallback})}deleteAllBookmarks(){this.bookmarks.deleteAll(this.collection).then((()=>{if(r.Z.publish(o.rU,this.collection),M.instance.addNotification({type:d.YN,headline:"Aus Merkliste entfernt",description:"Ihre Artikel wurden aus der Merkliste gelöscht."}),C.default.isApp){const t=s.default.instance;t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection&&r.Z.publish(o.s_,new T(t.app.pageContext.documentId,t.app.pageContext.collection,!1))}this.destroy()})).catch((t=>{r.Z.publish(o.A7,{type:d._w,collection:this.collection}),M.instance.addNotification({type:d.fv,headline:"Fehler",description:'Beim Löschen der Artikel ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback}),console.error(t.message)}))}notificationCallback(){setTimeout((()=>{this.deleteAllBookmarks()}),1e3)}confirmationLayerCallback(t){t!==d.WK?this.destroy():this.deleteAllBookmarks()}destroy(){this.collection=null,this.bookmarks=null,this.boundConfirmationLayerCallback=null,this.boundNotificationCallback=null}}const Lt=Symbol("INSTANCE"),Tt=Symbol("SINGELTONENFORCER");class _t{constructor(t){if(t!==Tt)throw new Error("Instantiation failed: Use EventObserver.instance instead of new.");this.init()}static get instance(){return this[Lt]||(this[Lt]=new _t(Tt)),this[Lt]}init(){this.boundOnMouseDown=t=>this.onMouseDown(t),this.boundOnPageShow=t=>this.onPageShow(t),window.document.addEventListener("mousedown",this.boundOnMouseDown),window.addEventListener("pageshow",this.boundOnPageShow),this.initPageVisibilityAPI()}initPageVisibilityAPI(){this.hiddenPropertyName=void 0,this.visibilityChangeEventName=void 0,void 0!==document.hidden?(this.hiddenPropertyName="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(this.hiddenPropertyName="mozHidden",this.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenPropertyName="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden?(this.hiddenPropertyName="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange"):this.visibilityChangeEventName="visibilitychange",this.currentVisibilityState=this.visibilityState,this.boundOnVisibilityChange=()=>this.onVisibilityChange(this.visibilityState),window.document.addEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),this.boundOnPageHide=()=>this.onVisibilityChange("hidden"),window.addEventListener("pagehide",this.boundOnPageHide)}onVisibilityChange(t){this.currentVisibilityState!==t&&(this.currentVisibilityState=t,r.Z.publish(o.JA,t))}get visibilityState(){return this.hiddenPropertyName?window.document[this.hiddenPropertyName]?"hidden":"visible":void 0!==window.document.visibilityState?window.document.visibilityState:void 0}onMouseDown(t){r.Z.publish(o.SE,t)}onPageShow(t){t.persisted&&r.Z.publish(o.R_)}destroy(){window.document.removeEventListener("mousedown",this.boundOnMouseDown),window.removeEventListener("pageshow",this.boundOnPageShow),window.removeEventListener("pagehide",this.boundOnPageHide),window.document.removeEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),window.removeEventListener("scroll",this.boundOnScroll),super.destroy()}}const Ot={breakpointQueries:[],breakpoint:"",colorSchemeQuery:window.matchMedia("(prefers-color-scheme: dark)"),colorScheme:"",init(){(s.default.instance.breakpoints?Object.keys(s.default.instance.breakpoints):[]).forEach((t=>{const{min:e,max:i}=s.default.instance.breakpoints[t];let n;e&&i?n=`(min-width: ${e}px) and (max-width: ${i}px)`:e?n=`(min-width: ${e}px)`:i&&(n=`(max-width: ${i}px)`),n&&this.breakpointQueries.push({breakpoint:t,query:window.matchMedia(n)})})),this.onBreakpointChanged(),this.onColorSchemeChanged(),"function"==typeof this.colorSchemeQuery.addEventListener?(this.colorSchemeQuery.addEventListener("change",(()=>this.onColorSchemeChanged())),this.breakpointQueries.forEach((t=>{t.query.addEventListener("change",(()=>this.onBreakpointChanged()))}))):"function"==typeof this.colorSchemeQuery.addListener&&(this.colorSchemeQuery.addListener((()=>this.onColorSchemeChanged())),this.breakpointQueries.forEach((t=>{t.query.addListener((()=>this.onBreakpointChanged()))})))},onColorSchemeChanged(){this.colorScheme=this.colorSchemeQuery.matches?d.cC:d.TN,r.Z.publish(o.N7,{colorScheme:this.colorScheme})},onBreakpointChanged(){const t=this.breakpointQueries.filter((t=>t.query.matches)).pop().breakpoint;this.breakpoint!==t&&(this.breakpoint=t,r.Z.publish(o.sE,{breakpoint:this.breakpoint}))}},xt={get instance(){return a.Z.store("MediaQuery")}},Nt=Symbol("INSTANCE"),Bt=Symbol("SINGELTONENFORCER");class Dt{constructor(t){if(t!==Bt)throw new Error("Instantiation failed: Use GujAdBridge.instance instead of new.");this.init()}static get instance(){return this[Nt]||(this[Nt]=new Dt(Bt)),this[Nt]}init(){this.initializedAdPositions=[],this.reloadAllAdsTriggered=!1;const t=s.default.instance,{breakpoint:e}=xt.instance;let i="desktop";C.default.isAndroidApp?i="androidphone":C.default.isIOSApp?i="iosphone":H.default.isTablet?i="tablet":H.default.isMobile&&(i="mobile");let n="_default";t.noAds?n="_noad":void 0!==t.guj&&t.guj.zone&&(n=t.guj.zone);let a="default";void 0!==t.guj&&t.guj.spmtp&&(a=t.guj.spmtp);let d="";void 0!==t.guj&&t.guj.spmurid&&(d=t.guj.spmurid);let h="";void 0!==t.guj&&t.guj.spmtid&&(h=t.guj.spmtid);let c="";void 0!==t.guj&&t.guj.spmard&&(c=t.guj.spmard);let u=!1;void 0!==t.guj&&t.guj.isIndexPage&&(u=!0);let p=[];void 0!==t.guj&&Array.isArray(t.guj.keywords)&&(p=p.concat(t.guj.keywords),l.default.instance.hasPaidAccess&&p.push("plus_user")),"undefined"!=typeof GujAd&&void 0!==GujAd.cmd&&(void 0!==GujAdPositions&&GujAdPositions.forEach((t=>{Array.isArray(t.breakpoints)&&!t.breakpoints.includes(e)||this.initAdPosition(t.id)})),GujAd.cmd.unshift((()=>{GujAd.getClient().setSiteType(i)}),(()=>{"develop"===n?GujAd.getClient().setZone(n,!0):GujAd.getClient().setZone(n)}),(()=>{GujAd.getClient().addTargetingParameter("spmtp",a),d&&GujAd.getClient().addTargetingParameter("spmurid",d),h&&GujAd.getClient().addTargetingParameter("spmtid",h),c&&GujAd.getClient().addTargetingParameter("spmard",c)}),(()=>{GujAd.getClient().setIsIndexPage(u)}),(()=>{GujAd.getClient().setKeywords(p)}),(()=>{GujAd.registerAdPositionLoadedHandler((t=>{this.onAdPositionLoaded(t)}))}),(()=>{C.default.isApp&&z.Z.instance.advertisingId&&GujAd.getClient().setIDFA(z.Z.instance.advertisingId)}))),r.Z.subscribe(o.yZ,(t=>this.onTargetAdPositionLoaded(t))),r.Z.subscribe(o.jY,(t=>this.initAdPosition(t))),t.disableAds&&"undefined"!=typeof GujAdPositions&&GujAdPositions.forEach((t=>{t.sitetype&&("mobile"!==t.sitetype&&t.sitetype!==i||"mobile"===t.sitetype&&!["mobile","androidphone","iosphone"].includes(i))||r.Z.publish(o.sd,{positionName:t.id})}))}onAdPositionLoaded(t){const e=t.getName(),i=t.containsAd(),s=t.getGPTEvent(),n=s&&Array.isArray(s.size)&&2===s.size.length?s.size:[void 0,void 0],a=s&&s.isEmpty,r=s&&s.isBackfill;this.refreshAdContainerStyle(e,i,n),this.refreshAdContainerVisibility(e,i),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&(window.polygon.componentLoader.publish(o.sd,{positionName:e,containsAd:i,isEmpty:a,isBackfill:r,size:n}),i&&window.polygon.componentLoader.publish(o.Hc,e))}onTargetAdPositionLoaded(t){this.refreshAdContainerVisibility(t,!0);const e=document.querySelector(`#${t}`);e&&(e.setAttribute("data-advertisement",e.getAttribute("data-advertisement").replace(/GujAd/g),"AdobeTargetAd"),e.className="",e.parentElement.getAttribute("data-advertisement")&&e.parentElement.getAttribute("data-advertisement").indexOf(t)>=0&&(e.parentElement.className=""),e.style.display=""),void 0!==window.polygon&&void 0!==window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.Hc,t)}refreshAdContainerStyle(t,e,i){const s=document.querySelector(`[data-advertisement^="GujAd"][data-advertisement*="${t}"][class*="float"]:not([id])`);s&&(e&&Array.isArray(i)&&i[0]&&i[0]>300?s.setAttribute("style","float: none !important; clear: both !important; padding-left: 0 !important; padding-right: 0 !important; margin-left: 0 !important; margin-right: 0 !important;"):s.setAttribute("style",""))}refreshAdContainerVisibility(t,e){let i=[];e?(i=Array.from(document.querySelectorAll(`[data-advertisement^="GujAd"][data-advertisement*="${t}"]:not([data-advertisement*="disabled"])`)),i.forEach((t=>{t.classList.remove("hidden"),t.classList.remove("sm:hidden"),t.classList.remove("md:hidden"),t.classList.remove("lg:hidden"),t.classList.remove("unhidable")}))):this.reloadAllAdsTriggered||(i=Array.from(document.querySelectorAll(`[data-advertisement^="GujAd ${t}"]:not([data-advertisement*="disabled"])`)),i.forEach((t=>{t.classList.add("hidden")})))}initAdPosition(t){void 0!==GujAd&&void 0!==GujAd.cmd&&(this.initializedAdPositions.includes(t)?this.reloadAdPosition(t):(GujAd.cmd.push((()=>{GujAd.push(t)})),this.initializedAdPositions.push(t)))}reloadAllAds(){void 0!==GujAd&&(this.reloadAllAdsTriggered=!0,this.initializedAdPositions.forEach((t=>{if("function"==typeof GujAd.isAdPositionEmpty&&!GujAd.isAdPositionEmpty(t)){const e=document.querySelector(`#${t}[data-advertisement^="GujAd"]:not([data-advertisement*="disabled"])`);e&&e.offsetHeight>0&&(e.classList.add("unhidable"),e.style.minHeight=`${e.offsetHeight}px`,this.reloadAdPosition(t))}})))}reloadAdPosition(t){void 0!==GujAd&&void 0!==GujAd.cmd&&GujAd.cmd.push((()=>{GujAd.getClient().reloadAd(t)}))}}class Rt{constructor(){this.origin=null,this.target=null,this.targetImage=null,this.animationDuration=null,this.el=null}execute(t,e){if(this.origin=document.querySelector(`[data-image-animation-origin="${t}"]`),this.target=document.querySelector(`[data-image-animation-target="${t}"]`),!this.origin||!this.target)return void this.destroy();if(this.targetImage=this.target.querySelector("img"),this.animationDuration=e,this.el=_.Z.createElementByPrototypeId("prototype-image-animation-element"),!this.el)return void this.destroy();const i=this.origin.getBoundingClientRect(),s={imageSrc:this.origin.currentSrc,animationDuration:this.animationDuration,width:this.origin.width,height:this.origin.height,top:i.top,left:i.left};this.el=_.Z.populateElement(this.el,s),this.target.parentNode.insertBefore(this.el,this.target.nextSibling),this.el.style.transform=this.cssTransform,this.el.style.filter=this.cssFilter,window.setTimeout((()=>this.onAnimationCompleted()),this.animationDuration)}get cssTransform(){if(!this.el||!this.target)return"";const t=this.target.getBoundingClientRect(),e=this.el.getBoundingClientRect(),i=(t.height<window.innerHeight?t.height:window.innerHeight)/this.el.height,s=(t.width-this.el.width*i)/2;return`translate(${t.left-parseFloat(e.left)+s}px, ${t.top-parseFloat(e.top)}px) scale(${i})`}get cssFilter(){const t=this.target.getBoundingClientRect().height/this.el.height-1;return t<0?"blur(0)":`blur(${t}px)`}onAnimationCompleted(){this.targetImage.classList.contains("lazyloaded")||this.targetImage.classList.contains("ls-is-cached")||this.targetImage.complete?this.onTargetImageLoaded():(this.boundOnTargetImageLoaded=()=>this.onTargetImageLoaded(),this.targetImage.addEventListener("load",this.boundOnTargetImageLoaded))}onTargetImageLoaded(){window.setTimeout((()=>this.destroy()),this.animationDuration)}destroy(){this.boundOnTargetImageLoaded&&this.targetImage.removeEventListener("load",this.boundOnTargetImageLoaded),this.origin=null,this.target=null,this.targetImage=null,this.el&&(this.el.remove(),this.el=null)}}class Zt{execute(){const t=l.default.instance;t.isLoggedIn&&t.hasPaidAccess&&vt.instance.initialize()}}const Ut=[],Mt=()=>{const t=t=>{if(!t||!t.target)return;const e=t.target,i=(t.pageX-e.getBoundingClientRect().left)/(e.getBoundingClientRect().right-e.getBoundingClientRect().left),s=parseFloat(e.getAttribute("min"))||0,n=parseFloat(e.getAttribute("max"))||100,a=parseFloat(e.getAttribute("step"))||1,o=Math.floor(a)===a?0:a.toString().split(".")[1].length||0;let r=(n-s)*i+s;r=r%a!=0?parseFloat(r-r%a+a).toFixed(o):r,e.value=r;const l=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(l)};document.querySelectorAll("input[type=range]").forEach((e=>{e.hasAttribute("data-polyfilled")||(e.addEventListener("touchend",t,{passive:!0}),e.setAttribute("data-polyfilled",""))})),r.Z.subscribe(o.sK,(()=>Mt()))};Ut.push(i.e(35).then(i.t.bind(i,419,23)).then((t=>{const e=Array.from(document.querySelectorAll("[data-stickyfill]"));t.add(e)}))),window.IntersectionObserver&&window.IntersectionObserverEntry||Ut.push(i.e(35).then(i.t.bind(i,337,23))),Ut.push(i.e(35).then(i.t.bind(i,523,23)).then((t=>{t.polyfill()}))),"function"!=typeof window.queueMicrotask&&Ut.push(void(window.queueMicrotask=t=>{Promise.resolve().then(t).catch((t=>setTimeout((()=>{throw t}))))})),Array.prototype.flatMap||Ut.push(void Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:()=>Array.prototype.map.apply(void 0,arguments).flat(1)})),(H.default.isMobileSafari||C.default.isIOSApp)&&Ut.push(Mt());const Vt=Promise.all(Ut),zt=Symbol("INSTANCE"),jt=Symbol("SINGELTONENFORCER");class qt{constructor(t){if(t!==jt)throw new Error("Instantiation failed: Use KeyboardDetection.instance instead of new.");this.init()}static get instance(){return this[zt]||(this[zt]=new qt(jt)),this[zt]}init(){this.el=document.documentElement,window.addEventListener("keydown",(t=>this.onKeyDown(t))),r.Z.subscribe(o.SE,(()=>this.onMouseDown()))}onKeyDown(t){"Tab"!==t.key&&9!==t.keyCode||this.el.classList.add("keyboard-control")}onMouseDown(){this.el.classList.remove("keyboard-control")}}var Ft=i(732),$t=i.n(Ft);const Wt=Symbol("INSTANCE"),Gt=Symbol("SINGELTONENFORCER");class Ht{constructor(t){if(t!==Gt)throw new Error("Instantiation failed: Use LazyLoading.instance instead of new.");this.init()}static get instance(){return this[Wt]||(this[Wt]=new Ht(Gt)),this[Wt]}init(){this.lazyload=new($t())({elements_selector:".lazyload",use_native:!1,unobserve_entered:!0,unobserve_completed:!0}),this.lazytrigger=new($t())({elements_selector:".lazytrigger",use_native:!1,unobserve_entered:!0,unobserve_completed:!0,callback_enter:t=>{t.dispatchEvent(new Event("lazybeforeunveil"))},callback_loaded:t=>{t.dispatchEvent(new Event("lazyloaded"))}}),r.Z.subscribe(o.Z_,(()=>this.onUpdateRequested()))}onUpdateRequested(){this.lazyload&&"function"==typeof this.lazyload.update&&this.lazyload.update(),this.lazytrigger&&"function"==typeof this.lazytrigger.update&&this.lazytrigger.update()}}class Jt{execute(t){r.Z.publish(o.Nb)}}class Qt{execute(t){r.Z.publish(o.on)}}class Kt{execute(t){t.documentId&&r.Z.publish(o.uf,t.documentId,t.collection||"article")}}class Yt{execute(t){t.documentId&&r.Z.publish(o.nj,t.documentId,t.collection||"article")}}class Xt{execute(t){const e=l.default.instance;t.documentId&&e.isLoggedIn&&e.hasPaidAccess&&r.Z.publish(o.gz,{documentId:t.documentId,documentUrl:t.documentUrl})}}class te extends L{constructor(t,e){super(),this._documentId=t,this._collection=e}get id(){return P.hI}get documentId(){return this._documentId}get collection(){return this._collection}}class ee extends L{constructor(t,e){super(),this._consentUUID=t,this._euconsent=e}get id(){return P.E9}get consentUUID(){return this._consentUUID}get euconsent(){return this._euconsent}}class ie extends L{constructor(t,e){super(),this._documentId=t,this._collection=e}get id(){return P.Nq}get documentId(){return this._documentId}get collection(){return this._collection}}class se extends L{constructor(t,e){super(),this._link=t,this._title=e}get id(){return P.Ib}get link(){return this._link}get title(){return this._title}}const ne=Symbol("INSTANCE"),ae=Symbol("SINGELTONENFORCER");class oe{constructor(t){if(t!==ae)throw new Error("Instantiation failed: Use Messenger.instance instead of new.");this.handlerLookup={},this.messageLookup={},this.init()}static get instance(){return this[ne]||(this[ne]=new oe(ae)),this[ne]}init(){this.initHandlerLookup(),this.initMessageLookup(),r.Z.subscribe(o.LC,this.onMessageReceived,this),r.Z.subscribe(o.s_,this.onMessageSend,this)}initHandlerLookup(){this.handlerLookup[P.hI]=Kt,this.handlerLookup[P.jX]=Xt,this.handlerLookup[P.Nq]=Yt,this.handlerLookup[P.Tr]=Qt,this.handlerLookup[P.Nb]=Jt}initMessageLookup(){this.messageLookup[P.hI]=te,this.messageLookup[P.y]=q,this.messageLookup[P.E9]=ee,this.messageLookup[P.Nq]=ie,this.messageLookup[P.Ib]=se,this.messageLookup[P.ep]=W}onMessageReceived(t){if(!t||!t.id||!this.handlerLookup[t.id])return void console.error("Messenger received invalid or unknown message.");const e=new this.handlerLookup[t.id];"function"==typeof e.execute?e.execute(t):console.error(`Messenger "${e.constructor.name}" is missing an execute function.`)}onMessageSend(t){t&&t.id&&"function"==typeof t.toObject?z.Z.instance.sendMessage(t.toObject()):console.error("Messenger cannot send invalid or unknown message.")}}class re{execute(){C.default.isApp&&this.updateBookmark()}updateBookmark(){const t=s.default.instance;if("article"===p.Z.instance.route&&t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection){const e=k.instance;r.Z.publish(o.s_,new T(t.app.pageContext.documentId,t.app.pageContext.collection,e.contains(t.app.pageContext.documentId,t.app.pageContext.collection)))}}}const le=Symbol("INSTANCE"),de=Symbol("SINGELTONENFORCER");class he{constructor(t){if(t!==de)throw new Error("Instantiation failed: Use TCDataModel.instance instead of new.");this._ready=!1,this._errorOccurred=!1,this._tcData=void 0,this.lastEventStatus=void 0,this.isPurposeOneGranted=!1,this.init()}static get instance(){return this[le]||(this[le]=new he(de)),this[le]}init(){if(window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(o.Fq,(()=>this.onSourcepointReloadMessagesExecuted())),"function"==typeof window.__tcfapi)window.__tcfapi("addEventListener",2,((t,e)=>this.tcfapiTCDataCallback(t,e)));else{if(s.default.instance.consent&&s.default.instance.consent.disabled)return;console.error("TCData window.__tcfapi is not available!")}}tcfapiTCDataCallback(t,e){!e||t&&t.cmpStatus&&"error"===t.cmpStatus?this.onError():t&&t.eventStatus&&this.lastEventStatus!==t.eventStatus&&(this.lastEventStatus=t.eventStatus,this.onTCDataChanged(t))}updateTcfapiTCDataCallback(t,e){this.tcfapiTCDataCallback(t,e);const i=t&&t.listenerId?t.listenerId:null;i&&window.__tcfapi("removeEventListener",2,(()=>{}),i)}updateTCData(){"function"==typeof window.__tcfapi?window.__tcfapi("addEventListener",2,((t,e)=>this.updateTcfapiTCDataCallback(t,e))):console.warn("TCData window.__tcfapi is not available!")}onTCDataChanged(t){this._tcData=t;const e=this.isPurposeOneGranted;this.isPurposeOneGranted=this.isPurposeGranted(d.EF.store_and_access_information_on_a_device),this._ready||!t||!t.eventStatus||"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus?C.default.isApp&&this._ready&&e&&!this.isPurposeOneGranted&&window.location.reload():this.onReady()}onReady(){this._ready=!0,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.x1,this._tcData)}onSourcepointReloadMessagesExecuted(){this.updateTCData()}onError(){console.error("TCDataModel onError"),this._errorOccurred=!0,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.TH)}isPurposeGranted(t){return!(!this._tcData||!(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||this._tcData.purpose&&this._tcData.purpose.consents&&"boolean"==typeof this._tcData.purpose.consents[t]&&this._tcData.purpose.consents[t]))}isVendorGranted(t){return!(!this._tcData||!(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||this._tcData.vendor&&this._tcData.vendor.consents&&"boolean"==typeof this._tcData.vendor.consents[t]&&this._tcData.vendor.consents[t]))}get ready(){return this._ready}get errorOccurred(){return this._errorOccurred}get tcData(){return this._tcData}}class ce{constructor(){this.user=l.default.instance,this.currentUserAccess={...this.user.access},this.settings=s.default.instance,this.tcDataModel=he.instance,this.bookmarks=k.instance,this.webAudio=st.instance}execute(t){this.user.update(),this.currentUserAccess.paid===this.user.access.paid&&this.currentUserAccess.conditional===this.user.access.conditional&&this.currentUserAccess.noAds===this.user.access.noAds?(this.currentUserAccess={...this.user.access},C.default.isApp?window.navigator.webBridge.globalFontsize(z.Z.instance.appFontSize):this.webAudio.reloadLocaLStorage(),!this.user.hasNoAdsAccess&&this.tcDataModel.ready&&Dt.instance.reloadAllAds(),this.bookmarks.reloadLocaLStorage()):window.location.reload()}}class ue{static isUrlArticleContent(t){let e=!1;if(t){const i=new URL(t).pathname.split("/");if(i.length>1){const s=i[i.length-1];let n=-1!==s.indexOf("-a-");n=n||-1!==s.indexOf("-fotostrecke-"),n=n||-1!==s.indexOf("-video-"),n=n||0===s.indexOf("a-"),n=n||0===s.indexOf("fotostrecke-"),n=n||0===s.indexOf("video-"),e=this.isHomeDomain(t)&&n}}return e}static isHomeDomain(t){let e=!1;if(null!=t){const i=new URL(t);e=i.host&&i.host===window.location.host}return e}static fixUrlParamsFragmentsOrder(t){let e;const i=t.indexOf("#"),s=t.indexOf("?");return-1!==i&&s>i?(e=t.substr(0,i),e+=t.substr(s),e+=t.substr(i,s-i)):e=t,e}static getReferrerFromUrl(t){const e=new URL(t);return e.searchParams.get("ref")?e.searchParams.get("ref"):void 0}}const pe=Symbol("INSTANCE"),ge=Symbol("SINGELTONENFORCER");class me{constructor(t){if(t!==ge)throw new Error("Instantiation failed: Use SARAsData.instance instead of new.");this.init()}static get instance(){return this[pe]||(this[pe]=new me(ge)),this[pe]}init(){const t=s.default.instance;this.application=t.application?t.application:{},this.editorial=t.editorial?t.editorial:void 0,this.external=t.external?t.external:{},this.page=t.page?t.page:{},this.paywall=t.paywall?t.paywall:void 0}set application(t){if(this._application={},t&&t.info&&(this._application.info=t.info),C.default.isApp){let t="";C.default.isAndroidApp?t="Android:":C.default.isIOSApp&&(t="iOS:"),t+=C.default.appVersion,this._application.info||(this._application.info={}),this._application.info.app_version=t}}get application(){return this._application}set editorial(t){this._editorial=t?{info:{...t.info?t.info:{}},attributes:{...t.attributes?t.attributes:{}},category:{...t.category?t.category:{}},author:{...t.author?t.author:{}}}:void 0}get editorial(){return this._editorial}set external(t){this._external={},t.vg_wort&&(this._external.vg_wort=t.vg_wort)}get external(){return this._external}set page(t){const e={platform:C.default.isApp?"app":"web"},i=ue.getReferrerFromUrl(window.location.href);i&&(e.referrer=i);let s="";switch(xt.instance.breakpoint){case"lg":s="desktop";break;case"md":s="tablet";break;case"sm":s="mobile"}const n={viewport:s,is_darkmode:xt.instance.colorScheme===d.cC};this._page={info:Object.assign(e,t.info?t.info:{}),attributes:Object.assign(n,t.attributes?t.attributes:{}),category:{...t.category?t.category:{}}}}get page(){return this._page}set paywall(t){this._paywall=t?{...t}:void 0}get paywall(){return this._paywall}get user(){const t=l.default.instance,e=s.default.instance,i={};t.trackingId&&(i.tracking_id=t.trackingId),z.Z.instance.advertisingId&&(i.device_advertising_id=z.Z.instance.advertisingId);const n={is_phone:H.default.isPhone,is_tablet:H.default.isTablet,is_mobile:H.default.isMobile},a={access:t.accessInfo,is_loggedIn:t.isLoggedIn,has_paid_access:t.hasPaidAccess,has_spiegelNoAdsMonthly_access:t.hasNoAdsAccess,has_conditional_access:t.hasConditionalAccess};return p.Z.instance.isGiftArticle&&(a.has_gift_article_access=!(t.hasPaidAccess||e.paywall&&e.paywall.attributes&&e.paywall.attributes.is_active)),{info:{...i},segment:a,device:n}}}const ye=Symbol("INSTANCE"),fe=Symbol("SINGELTONENFORCER"),be="tlp";class we{constructor(t){if(t!==fe)throw new Error("Instantiation failed: Use SARAs.instance instead of new.");this.init()}static get instance(){return this[ye]||(this[ye]=new we(fe)),this[ye]}init(){s.default.instance.disableAdobeLaunch?this.data={}:(this.data=me.instance,r.Z.subscribe(o.sd,this.onAdPositionInitialized,this),r.Z.subscribe(o.R0,this.onJWPlayerInitialized,this),r.Z.subscribe(o.R_,this.onPageResume,this),r.Z.subscribe(o.uf,this.onAddBookmark,this),r.Z.subscribe(o.nj,this.onDeleteBookmark,this),r.Z.subscribe(o.IX,this.onDeleteAllBookmarks,this),r.Z.subscribe(o.gt,this.push,this))}onAdPositionInitialized(t){if(!t||!t.positionName||"string"!=typeof t.positionName)return;const e=!!t.containsAd,i=!!t.isEmpty,s=!!t.isBackfill,n=Array.isArray(t.size)?t.size:[void 0,void 0];this.sendAdPositionInitializedEvent(t.positionName,e,i,s,n)}onAddBookmark(t,e){t&&e&&"article"===e&&this.sendCustomButtonClickEvent("add bookmark",{articleId:t,source:"bookmark-button"})}onDeleteBookmark(t,e){t&&e&&"article"===e&&this.sendCustomButtonClickEvent("delete bookmark",{articleId:t,source:"bookmark-button"})}onDeleteAllBookmarks(t){t&&"article"===t&&this.sendCustomButtonClickEvent("delete all bookmarks",{source:"bookmark-button"})}onJWPlayerInitialized(t){t&&this.sendJWPlayerInitializedEvent(t)}onPageResume(t={}){t&&t.platform&&"app"===t.platform&&this.sendVirtualPageEvent("app_call",t.trigger,t.referrer)}sendCustomButtonClickEvent(t,e){if(!t)return;const i={event:{info:{action:"button_click",name:t},attributes:{source:`${be}|webview|${e&&e.source?e.source:"button"}`}}};e&&e.articleId&&(i.editorial={info:{article_id:e.articleId}}),this.push(i)}sendJWPlayerInitializedEvent(t){if(!t)return;const e={event:{info:{action:"jw-init"},attributes:{player_id:t,source:`${be}|webview|video-player`}}};this.push(e)}sendAdPositionInitializedEvent(t,e,i,s,n){if(!t)return;const a={event:{info:{action:"adpos-init"},attributes:{pos:t,contains_ad:e,is_empty:i,is_backfill:s,size:n,source:`${be}|webview|advertisement`}}};this.push(a)}sendPageLoadEvent(){let t={};t=Object.assign(t,{event:{info:{action:"page_data_ready",name:"generic"},attributes:{current_url:`${s.default.instance.urls.base}${window.location.pathname}${window.location.search}`,source:`${be}|webview|page-tracking`}}}),this.data.application&&(t=Object.assign(t,{application:this.data.application})),this.data.external&&(t=Object.assign(t,{external:this.data.external})),this.data.page&&(t=Object.assign(t,{page:this.data.page})),this.data.editorial&&(t=Object.assign(t,{editorial:this.data.editorial})),this.data.paywall&&(t=Object.assign(t,{paywall:this.data.paywall})),this.data.user&&(t=Object.assign(t,{user:this.data.user})),this.push(t)}sendVirtualPageEvent(t="generic",e="generic_recall",i=void 0){let s={};s=Object.assign(s,{event:{info:{action:"virtual_page",name:t},attributes:{label:e,source:`${be}|webview|page-tracking`}}}),i&&(s.page={info:{referrer:i}}),this.push(s)}push(t){return!s.default.instance.disableAdobeLaunch&&(t.event&&t.event.info&&t.event.info.action?window.SARAs_data?(window.SARAs_data.push(t),!0):(console.error(`SARAs->push: SARAs_data is not defined: ${JSON.stringify(t)}`),!1):(console.error(`SARAs->push: Event Param action is required: ${JSON.stringify(t)}`),!1))}}class ve{execute(t){const{to:e,subject:i,body:s}=t,n=gt.Z.getMailtoUrl(e,i,s);n&&(window.location.href=n)}}const Ie=Symbol("INSTANCE"),Ee=Symbol("SINGELTONENFORCER");class Se{constructor(t){if(t!==Ee)throw new Error("Instantiation failed: Use TriggerHandler.instance instead of new.");this.init()}static get instance(){return this[Ie]||(this[Ie]=new Se(Ee)),this[Ie]}init(){this.registerEventHandlers()}registerEventHandlers(){window.polygon&&window.polygon.componentLoader&&(window.polygon.componentLoader.subscribe(o.Mz,this.onAccountTriggered,this),window.polygon.componentLoader.subscribe(o.V5,this.onLoginTriggered,this),window.polygon.componentLoader.subscribe(o.QP,this.onLogoutTriggered,this),window.polygon.componentLoader.subscribe(o.BW,this.onRegisterTriggered,this),window.polygon.componentLoader.subscribe(o.iz,this.onOfferTriggered,this),window.polygon.componentLoader.subscribe(o.kn,this.onRestorePurchasesTriggered,this))}onAccountTriggered(t={}){const{path:e}=t,{isApp:i}=C.default,{urls:n}=s.default.instance;if(i){z.Z.instance.triggerAccount(t)}else if(e&&n&&n.backofficeBaseUrl){const t=new URL(e,n.backofficeBaseUrl);window.location.assign(t.href)}else n&&n.user&&n.user.account&&window.location.assign(n.user.account)}onLoginTriggered(t={}){const{targetUrl:e}=t,{isApp:i}=C.default;if(i){z.Z.instance.triggerLogin({targetUrl:e})}else{const{urls:t}=s.default.instance;if(t&&t.user&&t.user.login){const i=new URL(t.user.login);e&&i.searchParams.set("targetUrl",e),window.location.assign(i.href)}}}onLogoutTriggered(){const{isApp:t}=C.default;if(t){z.Z.instance.triggerLogout()}else{const{urls:t}=s.default.instance;t&&t.user&&t.user.logout&&window.location.assign(t.user.logout)}}onRegisterTriggered(t={}){const{targetUrl:e}=t,{isApp:i}=C.default;if(i){z.Z.instance.triggerRegister({targetUrl:e})}else{const{urls:t}=s.default.instance;if(t&&t.user&&t.user.register){const i=new URL(t.user.register);e&&i.searchParams.set("targetUrl",e),window.location.assign(i.href)}}}onOfferTriggered(t={}){const{product:e}=t;let{targetUrl:i}=t;if(!e)return;const{isApp:n}=C.default;if(n){z.Z.instance.triggerInAppPurchase({product:e})}else{const{urls:t}=s.default.instance;if(t&&t.offers&&t.offers[e]){const s=new URL(t.offers[e]);if(i)s.searchParams.set("targetUrl",i);else{const t=new URLSearchParams(window.location.search);i=t.get("targetUrl")?decodeURIComponent(t.get("targetUrl")):void 0,i&&s.searchParams.set("targetUrl",i)}window.location.assign(s.href)}}}onRestorePurchasesTriggered(t={}){let{targetUrl:e}=t;const{isApp:i}=C.default;if(i){if(!e){const t=new URLSearchParams(window.location.search);e=t.get("targetUrl")?decodeURIComponent(t.get("targetUrl")):void 0}z.Z.instance.triggerRestorePurchases({targetUrl:e})}}}var Ae=i(152);class ke extends Ae.Z{constructor(){super(),this.state=null,this.isInitialized=!1,this.isPlayPending=!0,this.init()}init(){const t=st.instance;t&&(this.state={mode:t.mode,clip:t.clip?JSON.parse(JSON.stringify(t.clip)):null,isPaused:t.isPaused,isEnded:t.isEnded,currentTime:t.currentTime,duration:t.duration,playbackRate:t.playbackRate,volume:t.volume},a.Z.effect((()=>this.onUpdateMode(t.mode))),a.Z.effect((()=>this.onUpdateClip(t.clip))),a.Z.effect((()=>this.onUpdateIsPaused(t.isPaused))),a.Z.effect((()=>this.onUpdateIsEnded(t.isEnded))),a.Z.effect((()=>this.onUpdateDuration(t.duration))),a.Z.effect((()=>this.onUpdateCurrentTime(t.currentTime))),a.Z.effect((()=>this.onUpdatePlaybackRate(t.playbackRate))),a.Z.effect((()=>this.onUpdateVolume(t.volume))),this.isInitialized=!0)}onUpdateMode(t){this.state.mode=t}onUpdateClip(t){this.state.clip=t?JSON.parse(JSON.stringify(t)):null,this.isPlayPending=!0,t?this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_CLIP"):this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_CLEAR")}onUpdateIsPaused(t){this.state.isPaused=!!t,t?this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_PAUSE"):this.isPlayPending?(this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_PLAY"),this.isPlayPending=!1):this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_RESUME")}onUpdateIsEnded(t){this.state.isEnded=!!t,t&&this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_END")}onUpdateDuration(t){this.state.duration=t}onUpdateCurrentTime(t){this.state.currentTime=t,this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_TIME")}onUpdatePlaybackRate(t){this.state.playbackRate=t,this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_PLAYBACK_RATE")}onUpdateVolume(t){this.state.volume=t,this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_VOLUME")}dispatchWebAudioEvent(t){if(!this.isInitialized)return;const e=Object.assign(this.state,{action:t});super.dispatchEvent(new CustomEvent("WEB_AUDIO_EVENT",{detail:e}))}}const Ce="WARDEN_LIMIT_EXCEEDED",Pe="WARDEN_LIMIT_OK";class Le extends Ae.Z{constructor({baseUrl:t,site:e,userId:i,fingerprint:s,limit:n}){super(),t&&e&&i&&s&&n?(this.baseUrl=t,this.site=e,this.userId=i,this.fingerprint=s,this.limit=n,this.tickTimeoutRef=null,this.baseUrl.endsWith("/")||(this.baseUrl+="/"),this.init()):console.error("Warden requires baseUrl, site, userId, limit for correct instantiation.")}init(){this.initPageVisibilityAPI(),this.tick()}initPageVisibilityAPI(){this.hiddenPropertyName=void 0,this.visibilityChangeEventName=void 0,void 0!==document.hidden?(this.hiddenPropertyName="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(this.hiddenPropertyName="mozHidden",this.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenPropertyName="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden?(this.hiddenPropertyName="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange"):this.visibilityChangeEventName="visibilitychange",this.currentVisibilityState=this.visibilityState,this.boundOnVisibilityChange=()=>this.onVisibilityChange(this.visibilityState),window.document.addEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),this.boundOnPageHide=()=>this.onVisibilityChange("hidden"),window.addEventListener("pagehide",this.boundOnPageHide)}onVisibilityChange(t){this.currentVisibilityState!==t&&(this.currentVisibilityState=t,"visible"===t?this.handleWindowIsActive():"hidden"===t&&this.handleWindowIsInactive())}get visibilityState(){return this.hiddenPropertyName?window.document[this.hiddenPropertyName]?"hidden":"visible":void 0!==window.document.visibilityState?window.document.visibilityState:void 0}handleWindowIsInactive(){this.tickTimeoutRef&&(clearTimeout(this.tickTimeoutRef),this.tickTimeoutRef=null,this.remove())}handleWindowIsActive(){this.dispatchWardenEvent(Pe),this.tickTimeoutRef||this.tick()}tick(){"visible"===this.visibilityState?fetch(this.tickUrl,{method:"GET"}).then((t=>{403===t.status?this.dispatchWardenEvent(Ce):this.dispatchWardenEvent(Pe)})).catch((t=>console.error("Warden - Error while fetching tick:",t))).finally((()=>{this.tickTimeoutRef=setTimeout((()=>this.tick()),3e3)})):this.tickTimeoutRef=null}remove(){fetch(this.removeUrl,{method:"GET",keepalive:!0}).then((()=>this.dispatchWardenEvent(Pe))).catch((t=>console.error("Warden - Error while fetching delete:",t)))}allow(){fetch(this.allowUrl,{method:"GET"}).then((()=>this.dispatchWardenEvent(Pe))).catch((t=>console.error("Warden - Error while fetching allow:",t)))}dispatchWardenEvent(t){if(!t)return;const e=new CustomEvent(t);super.dispatchEvent(e)}get tickUrl(){const t=new URL(`${this.baseUrl}api/v1/tick`);return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}get removeUrl(){const t=new URL(`${this.baseUrl}api/v1/remove`);return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}get allowUrl(){const t=new URL(`${this.baseUrl}api/v1/allow`);return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}destroy(){window.document.removeEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),window.removeEventListener("pagehide",this.boundOnPageHide),super.destroy()}}class Te{static endsWith(t,e){return!(!t||"string"!=typeof t||!e||"string"!=typeof e)&&(-1!==t.indexOf(e)&&t.indexOf(e)+e.length===t.length)}static getRandomString(t=4,e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"){const i=e.length;let s="";for(let n=0;n<t;n++)s+=e.charAt(Math.floor(Math.random()*i));return s}static kebabCase(t){return[" ","_"].includes(t)?t:t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}}const _e=Symbol("INSTANCE"),Oe=Symbol("SINGELTONENFORCER");class xe{constructor(t){if(t!==Oe)throw new Error("Instantiation failed: Use UserCapping.instance instead of new.");this.storageObject=null,this.boundOnWardenLimitExceeded=null,this.boundOnWardenLimitOk=null,this.init()}static get instance(){return this[_e]||(this[_e]=new xe(Oe)),this[_e]}init(){const t=s.default.instance.warden||{},e=!!t.enabled,{hasPaidAccess:i,hasNoAdsAccess:n,userId:a,sessionLimit:d}=l.default.instance;if(!e||!a||!d||!i&&!n)return;this.storageObject=new E("warden","local");let h="";this.storageObject.getItem("fingerprint")?h=this.storageObject.getItem("fingerprint"):(h=Te.getRandomString(16),this.storageObject.setItem("fingerprint",h)),this.warden=new Le({baseUrl:t.baseUrl||"",site:s.default.instance.domain||"",userId:a,fingerprint:h,limit:d}),this.boundOnWardenLimitExceeded=()=>this.onWardenLimitExceeded(),this.warden.addEventListener(Ce,this.boundOnWardenLimitExceeded),this.boundOnWardenLimitOk=()=>this.onWardenLimitOk(),this.warden.addEventListener(Pe,this.boundOnWardenLimitOk),r.Z.subscribe(o.uZ,this.onUserCappingAllow,this)}onWardenLimitExceeded(){r.Z.publish(o.oh)}onWardenLimitOk(){r.Z.publish(o.dG)}onUserCappingAllow(){this.warden&&"function"==typeof this.warden.allow&&this.warden.allow()}}class Ne{defaultData(){return{}}constructor(){this.el=arguments[0],"undefined"!=typeof jQuery&&(this.$el=jQuery(this.el)),this.data=arguments[1],this.__mediator=arguments[2],this._configureData()}_configureData(){const t={};this.el&&this.el.attributes&&[].forEach.call(this.el.attributes,(e=>{if(e&&e.name&&/^data-/.test(e.name)){var i=e.name.substr(5).replace(/-(.)/g,((t,e)=>e.toUpperCase()));t[i]=e.value}})),this.data=Object.assign(this.defaultData?this.defaultData():{},t,this.data)}bind(){for(var t=0;t<arguments.length;t++){const e=arguments[t];this[e]=this[e].bind(this)}}publish(){this.__mediator.publish(...arguments)}subscribe(t,e){this.__mediator.subscribe(t,e,this)}unsubscribe(t,e){this.__mediator.unsubscribe(t,e,this)}scan(t){this.__mediator.scan(t)}defer(t,e=17){setTimeout(t,e)}destroy(){}}const Be=Symbol("INSTANCE"),De=Symbol("SINGELTONENFORCER");class Re{constructor(t){if(t!==De)throw new Error("Instantiation failed: Use LanguageModel.instance instead of new.");this.init()}static get instance(){return this[Be]||(this[Be]=new Re(De)),this[Be]}init(){window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(o.B_,this.onSwitchLanguageTriggered,this)}determineLanguage(){const t=v.Z.getItem(d.E9.lang.name),e=navigator.language.slice(0,2);let i=t;i||(i="de"===e?"de":"en"),this._language=i}onSwitchLanguageTriggered(t){t&&(this.language=t)}get language(){return this._language||this.determineLanguage(),this._language}set language(t){if(this._language===t)return this._language;return v.Z.setItem(d.E9.lang.name,t)||console.warn("LanguageModel: Unable to store new language value permantly because sessionStorage is not available"),this._language=t,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.dH,this._language),this._language}}class Ze extends Ne{constructor(...t){super(...t),this.localizationProto=this.el.innerHTML,this.localizationSettings=JSON.parse(this.data.localizationSettings),this.defaultLanguage=this.localizationSettings.defaultLanguage||"de",this.fallbackLanguage=this.localizationSettings.fallbackLanguage||"de",this.language=Re.instance.language,this.localizedFields=(this.localizationProto.match(/#?__localized_((\w|:)*)__/g)||[]).map((t=>t.split(/__(localized_)?/g)[2])).filter(((t,e,i)=>i.indexOf(t)===e)),this._localize(),this.initSwitchLanguageButton()}_renderPrototype(t,e){let i=this.localizationProto;return Object.keys(this.localizedFields).forEach((s=>{const n=this.localizedFields[s];if(n){const s=n.split(":")[0],a=n.split(":")[1];let o=void 0!==t[s]?t[s]:e[s];a&&(o=o[a]),i=i.replace(new RegExp(`__localized_${n}__`,"g"),o)}})),i}_localize(){const t=this.localizationSettings.labels,e=Object.keys(t);let i=this.language;const s=t[this.fallbackLanguage];e.includes(this.language)||(i=this.defaultLanguage),this.language=i;const n=t[i],a=this._renderPrototype(n,s);this.el.textContent="",this.el.insertAdjacentHTML("afterbegin",a);Array.from(this.el.querySelectorAll("[data-localized-href]")).forEach((t=>{t.getAttribute("data-localized-href")&&(t.setAttribute("href",t.getAttribute("data-localized-href")),t.removeAttribute("data-localized-href"))})),this.boundOnComponentLoaderScanFinished=()=>this.onComponentLoaderScanFinished(),this.subscribe(o.gM,this.boundOnComponentLoaderScanFinished),window.polygon.componentLoader.scan()}onComponentLoaderScanFinished(){this.onLocalized()}onSwitchLanguageTriggered(){}onLocalized(){}initSwitchLanguageButton(){if(this.switchLanguageButton=this.el.querySelector('[data-localization-el="switchLanguageButton"]'),this.switchLanguageButton)try{window.sessionStorage;this.switchLanguageButton.addEventListener("click",this.onSwitchLanguageButtonClicked.bind(this))}catch(t){this.switchLanguageButton.remove()}}onSwitchLanguageButtonClicked(t){t.preventDefault();const e="de"===this.language?"en":"de";this.switchLanguage(e)}switchLanguage(t){this.onSwitchLanguageTriggered();try{Re.instance.language=t}catch(t){return void console.warn(t.message)}window.location.reload()}destroy(){super.destroy()}}const Ue=Symbol("INSTANCE"),Me=Symbol("SINGELTONENFORCER");class Ve{constructor(t){if(t!==Me)throw new Error("Instantiation failed: Use SourcepointModel.instance instead of new.");this.init()}static get instance(){return this[Ue]||(this[Ue]=new Ve(Me)),this[Ue]}init(){this.message="",this.errorOccurred=!1}}const ze="STATE_DEFAULT",je="STATE_LOADING",qe="STATE_ERROR";class Fe{static isEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new Error("ArrayUtils isEqual: Missing or malformed parameters, expected two Arrays");if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}const $e=Symbol("INSTANCE"),We=Symbol("SINGELTONENFORCER");class Ge{constructor(t){if(t!==We)throw new Error("Instantiation failed: Use TeaserRenderer.instance instead of new.");this.init()}static get instance(){return this[$e]||(this[$e]=new Ge(We)),this[$e]}init(){this.prototypes={};document.querySelectorAll("template[data-teaser-prototype]").forEach((t=>{const{variant:e,type:i,domain:s}=t.dataset;e&&i&&s&&(this.prototypes[`${e}-${i}-${s}`]=t)}))}create(t={},e=d.X5){const i=s.default.instance.domain,n=t.domain||"",a=t.type||"",o=Array.isArray(t.flags)?t.flags:[],r=Array.isArray(t.iconAuxiliaries)?t.iconAuxiliaries:[],l=this.prototypes[`${e}-${a}-${n}`]||this.prototypes[`${e}-news-${n}`]||this.prototypes[`${e}-${a}-${i}`]||this.prototypes[`${e}-news-${i}`],h=l&&l.content&&l.content.firstElementChild?l.content.firstElementChild.cloneNode(!0):null;if(!h)return console.warn(`TeaserFactory.render failed: No prototype found for teaser variant "${e}"`),null;const c=Array.from(h.querySelectorAll("[data-topmark-flag-name]"));let u=!1;Array.isArray(c)&&c.forEach((t=>{Array.isArray(o)&&o.includes(t.dataset.topmarkFlagName)?u=!0:t.parentElement.remove()}));const p=h.querySelector('[data-topmark-el="text"]');t.headline&&t.topmark&&(u||!p)&&(t.headline=`${t.topmark}: ${t.headline}`,delete t.topmark),!t.topmark&&p&&p.remove();const g=h.querySelector('[data-topmark-el="container"]');g&&(0===o.length&&!t.topmark||0===g.children.length)&&g.remove();const m=Array.from(h.querySelectorAll("[data-flag-name]"));Array.isArray(m)&&Array.isArray(o)&&m.forEach((t=>{o.includes(t.dataset.flagName)||t.remove()}));const y=h.querySelector("[data-contains-flags]");y&&(0!==o.length&&0!==y.children.length||y.remove());const f=Array.from(h.querySelectorAll("[data-media-button-name]"));Array.isArray(f)&&f.forEach((e=>{t.style&&t.style===e.dataset.mediaButtonName||e.remove()}));const b=Array.from(h.querySelectorAll("[data-icon-auxiliary]"));Array.isArray(b)&&Array.isArray(r)&&b.forEach((t=>{const e=t.dataset.iconAuxiliary||"";r.includes(e)||t.remove()}));const w=Array.from(h.querySelectorAll("[data-image]"));Array.isArray(w)&&!t.imageId&&w.forEach((e=>{if(t.imageSrc){e.querySelector("img").dataset.src=t.imageSrc}else e.remove()}));const v=Array.from(h.querySelectorAll("[data-headline-image]"));Array.isArray(v)&&!t.headlineImageId&&v.forEach((t=>{t.remove()}));const I=_.Z.populateElement(h,t);let E=I.querySelectorAll("[data-auxiliary]");E.forEach((t=>{0===t.textContent.length&&(t.nextElementSibling.hasAttribute("data-auxiliary-bull")&&t.nextElementSibling.remove(),t.remove())})),E=I.querySelectorAll("[data-auxiliary]");const S=I.querySelector("[data-icon-auxiliary][data-auxiliary-bull]");return S&&0===E.length&&S.remove(),I}}class He{static convertArticleToTeaser(t){const e={};if(e.id=t.id?t.id:"",e.collection="article",e.domain=t.domain?t.domain:s.default.instance.domain,e.channel=t.channel&&t.channel.title?t.channel.title:"",e.headline=t.title?t.title:"",e.topmark=t.heading?t.heading:"",e.text=t.intro?t.intro:"",e.type=t.type?t.type:"news",e.style=t.teaser&&t.teaser.type?t.teaser.type:t.style||"default",e.url=t.url?t.url:"",e.imageId=t.header_image?t.header_image:"",!e.url||!e.url.length)return null;e.flags=[];const i=He.getArticlePaidFlag(t);i&&e.flags.push(i);const n=s.default.instance.domain;let a=t.domain?t.domain:"";const o=He.getArticleSubdomain(t);o&&(a=o);let r=t.access_level?t.access_level:"free";"conditional"===r&&(r=l.default.instance.hasConditionalAccess?"free":"paid"),"paid"!==r&&n!==a&&e.flags.push(a),t.is_live&&e.flags.push("live"),t.forward_to_canonical_url&&t.canonical_url&&t.canonical_url&&t.canonical_url.includes("manager-magazin.de")&&e.flags.push("mmo"),t.is_breaking&&e.flags.push("breaking");e.style&&["gallery","video","audio"].includes(e.style)&&e.flags.push(e.style),e.iconAuxiliaries=[],"audio"===e.style?e.iconAuxiliaries.push("Audio"):"video"===e.style?e.iconAuxiliaries.push("Video"):"gallery"===e.style?e.iconAuxiliaries.push("Gallery"):e.iconAuxiliaries.push("Text");const d=t.teaser&&Number.isInteger(t.teaser.length)?t.teaser.length:0;if(d)if("gallery"===e.style)e.length=`${d} ${1===d?"Bild":"Bilder"}`,e.auxiliaryLength=e.length;else{const t=Math.round(d/60),i=d%60;e.length=`${`${t}`.padStart(2,"0")}:${`${i}`.padStart(2,"0")}`,e.auxiliaryLength=`${t<1?1:t} Min`}const h=t.publish_date?new Date(1e3*t.publish_date).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";e.timestamp=h?`${h} Uhr`:"";const c=t.author_details_prefix?`${t.author_details_prefix} `:"Von ";let u=t.author_details_suffix?t.author_details_suffix:"";if(e.meta="",Array.isArray(t.authors)&&t.authors.length>0){let i="";t.authors.length>0&&(i=c,t.authors.forEach(((s,n)=>{if(!s||!s.name)return;const a=0===n,o=n===t.authors.length-1;a&&s.image&&!e.headlineImageId&&(e.headlineImageId=s.image),o&&t.authors.length>1?i+=" und ":0!==n&&(i+=", "),i+=s.name})));const n=s.default.instance.text&&s.default.instance.text.authorDetailsSuffix&&s.default.instance.text.authorDetailsSuffix.removeWhitespaceBeforeCharacters?s.default.instance.text.authorDetailsSuffix.removeWhitespaceBeforeCharacters:[];u&&Array.isArray(n)&&(n.includes(u.charAt(0))||(u=` ${u}`)),e.meta=i+u}return e}static getArticlePaidFlag(t){let e="",i=t.access_level?t.access_level:"free";"conditional"===i&&(i=l.default.instance.hasConditionalAccess?"free":"paid");let n="";if("paid"===i&&(n=t.paid_flag?t.paid_flag:"",""===n)){let e=t.domain?t.domain:"",i=He.getArticleSubdomain(t);""===e&&(e=s.default.instance.domain),""===i&&(i=e),"spon"===t.domain?n="Spplus":i&&"hbm"===i?n="Hbmplus":"mmo"===t.domain&&(n="Mmplus")}return n&&(e=`${n}-${i}`),e}static getArticleSubdomain(t){let e="";const i=t.channel&&t.channel.slug?t.channel.slug:"";return"harvard"===i&&(e="hbm"),"deinspiegel"===i&&(e="dein"),e}}const Je=Symbol("INSTANCE"),Qe=Symbol("SINGELTONENFORCER");class Ke{constructor(t){if(t!==Qe)throw new Error("Instantiation failed: Use SiteSearchAPI.instance instead of new.");this.init()}static get instance(){return this[Je]||(this[Je]=new Ke(Qe)),this[Je]}init(){const t=s.default.instance;t.thirdparty&&t.thirdparty.sitesearch&&t.thirdparty.sitesearch.apiUrl?this.apiUrl=t.thirdparty.sitesearch.apiUrl:console.error("SiteSearchAPI requires apiUrl for correct instantiation.")}getTeasersBySearchOptions(t={}){const{query:e,segments:i,author:s,fields:n,after:a,before:o,pageSize:r,page:l}=t;if(!i||!Array.isArray(i))return Promise.reject(new Error("SiteSearchAPI getTeasersBySearchOptions - missing required param `segments`"));if(!(e&&"string"==typeof e||s&&"string"==typeof s))return Promise.reject(new Error("SiteSearchAPI getTeasersBySearchOptions - missing required param `query` or `author`, please provide either or both"));const d=new URL(`${this.apiUrl}/search`);return d.searchParams.set("segments",i.join(",")),e&&"string"==typeof e&&d.searchParams.set("q",e),s&&"string"==typeof s&&d.searchParams.set("author",s),n&&"string"==typeof n&&d.searchParams.set("fields",n),Number.isInteger(a)&&d.searchParams.set("after",a),Number.isInteger(o)&&d.searchParams.set("before",o),r&&Number.isInteger(r)&&r>=10&&d.searchParams.set("page_size",r),Number.isInteger(l)&&d.searchParams.set("page",l),this.fetchUrl(d).then((t=>(t.success&&(t.teasers=Array.isArray(t.results)?t.results.map((t=>He.convertArticleToTeaser(t))):[],delete t.results),Promise.resolve(t))))}getTeasersByIds(t=[]){if(!t||!Array.isArray(t)||0===t.length||t.filter((t=>"string"!=typeof t)).length)return Promise.reject(new Error("SiteSearchAPI getTeasersByIds - missing or malformed required param `id`"));const e=new URL(`${this.apiUrl}/fetch`);return e.searchParams.set("ids",t.join(",")),this.fetchUrl(e).then((t=>{if(!t.success||!t.results||!Array.isArray(t.results))return Promise.resolve({success:!1,code:t.code||""});const e=t.results.map((t=>He.convertArticleToTeaser(t))),i=t.numResults||e.length;return Promise.resolve({success:!0,numResults:i,teasers:e})}))}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>t.json())).then((t=>{if(t.code)return Promise.resolve({success:!1,code:t.code});const e=t.results&&Array.isArray(t.results)?t.results:[],i=Number.isInteger(t.num_results)?t.num_results:e.length;return Promise.resolve({success:!0,numResults:i,results:e})})).catch((()=>(console.warn(`SiteSearchAPI fetchUrl – failed to fetch url "${t}"`),Promise.resolve({success:!1,code:""}))))}}const Ye="STATE_LOADING",Xe="STATE_EMPTY",ti="STATE_ERROR",ei="STATE_DEFAULT";const ii="STATE_ACTIVE",si="STATE_INACTIVE";const ni="STATE_LOADING",ai="STATE_EMPTY",oi="STATE_ERROR",ri="STATE_DEFAULT";const li="STATE_LOADING",di="STATE_EMPTY",hi="STATE_ERROR",ci="STATE_DEFAULT";const ui=Symbol("INSTANCE"),pi=Symbol("SINGELTONENFORCER");class gi{constructor(t){if(t!==pi)throw new Error("Instantiation failed: Use BrowserHistoryService.instance instead of new.");this.registeredLayers={},this.browserHistoryLayers=[],this.currentIndex=window.history?0:-1,this.currentHash="",this.id=Date.now(),this.init()}static get instance(){return this[ui]||(this[ui]=new gi(pi)),this[ui]}init(){window.history&&(window.history.state&&Number.isInteger(window.history.state.index)?this.currentIndex=window.history.state.index:(this.currentIndex=window.history.length-1,window.history.replaceState({layerServiceId:this.id,index:this.currentIndex,hash:"",isInitState:!0},""))),this.boundOnKeyDown=t=>this.onKeyDown(t),window.document.addEventListener("keydown",this.boundOnKeyDown),window.polygon&&window.polygon.componentLoader&&(window.polygon.componentLoader.subscribe(o.Cx,this.onCloseLayerTriggered,this),window.polygon.componentLoader.subscribe(o.uh,this.onOpenLayerTriggered,this)),window.addEventListener("popstate",(t=>this.onPopstate(t)))}register(t){t&&"string"==typeof t.id&&"string"==typeof t.hash&&"function"==typeof t.close&&"function"==typeof t.open?this.registeredLayers[t.id]=t:console.error("LayerService registration failed: layer needs to implement an id and hash string and a close and open function")}addLayerToBrowserHistory(t){if(this.currentHash&&this.currentHash===t.hash)return!1;if(window.history)if(window.history.state&&window.history.state.hash&&window.history.state.hash===t.hash){this.currentHash=t.hash?t.hash:"";const e={layerServiceId:this.id,index:this.currentIndex,hash:this.currentHash};window.history.replaceState(e,"",t.hash?`#${t.hash}`:"")}else{this.currentIndex<this.browserHistoryLayers.length-1&&(this.browserHistoryLayers=this.browserHistoryLayers.slice(0,this.currentIndex+1)),this.currentIndex+=1,this.currentHash=t.hash?t.hash:"";const e={layerServiceId:this.id,index:this.currentIndex,hash:this.currentHash};window.history.pushState(e,"",this.currentHash?`#${this.currentHash}`:"")}else this.currentIndex+=1;return this.browserHistoryLayers[this.currentIndex]=t,this.openLayer(this.currentIndex),this.onActiveLayerChanged(),!0}openLayer(t){const e=this.browserHistoryLayers[t];return!(!e||"function"!=typeof e.open)&&(e.open(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.Nk,e.id),!0)}closeLayer(t){const e=this.browserHistoryLayers[t];return!(!e||"function"!=typeof e.close)&&(e.close(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.t,e.id),!0)}back(){void 0!==this.browserHistoryLayers[this.currentIndex]&&(window.history&&"function"==typeof window.history.go?window.history.go(-1):(this.closeLayer(this.currentIndex),this.currentIndex=this.currentIndex>=0?this.currentIndex-1:-1,this.onActiveLayerChanged()))}goTo(t){if(this.currentIndex>t){const e=t>=0?t+1:0;for(let t=this.currentIndex;t>=e;t--)this.closeLayer(t);this.currentIndex=t,this.onActiveLayerChanged()}else if(this.currentIndex<t){for(let e=this.currentIndex>=0?this.currentIndex+1:0;e<=t;e++)this.openLayer(e);this.currentIndex=t,this.onActiveLayerChanged()}}restoreLayerByHash(t){let e=!1;Object.keys(this.registeredLayers).forEach((i=>{const s=this.registeredLayers[i];e||s.hash!==t||(this.addLayerToBrowserHistory(s),e=!0)}))}onPopstate(t){if(!t||!t.state)return;let e,i="",s="";if(t.state.layerServiceId===this.id){if(e=t.state&&Number.isInteger(t.state.index)?t.state.index:void 0,i=t.state&&t.state.hash?t.state.hash:"",t.state&&t.state.isInitState&&this.windowHash&&window.history){const t={layerServiceId:this.id,index:Number.isInteger(e)?e:this.currentIndex,hash:""};window.history.replaceState(t,"",window.location.pathname+window.location.search)}}else if(e=t.state&&Number.isInteger(t.state.index)?t.state.index:void 0,this.currentHash!==this.windowHash)s=this.windowHash;else if(window.history){const t={layerServiceId:this.id,index:Number.isInteger(e)?e:this.currentIndex,hash:""};window.history.replaceState(t,"",window.location.pathname+window.location.search)}void 0!==e&&this.currentIndex!==e&&(this.goTo(e),this.currentHash=i),s&&this.restoreLayerByHash(s)}onKeyDown(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||void 0===this.browserHistoryLayers[this.currentIndex]||(t.preventDefault(),this.back())}onOpenLayerTriggered(t){this.registeredLayers[t]&&"function"==typeof this.registeredLayers[t].close&&"function"==typeof this.registeredLayers[t].open&&this.addLayerToBrowserHistory(this.registeredLayers[t])}onCloseLayerTriggered(){this.back()}onActiveLayerChanged(){const t=this.browserHistoryLayers[this.currentIndex];t&&t.id&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(o.Wl,t.id)}get windowHash(){return window.location.hash?window.location.hash.substring(1):""}}const mi={_accepted:!1,eventName:o.vL,init(){const t=m.Z.get(d.E9.affiliateConsent.name);this._accepted="true"===t},get accepted(){return this._accepted},set accepted(t){return this._accepted===t||(m.Z.set(d.E9.affiliateConsent.name,t,{expires:d.E9.affiliateConsent.expires}),this._accepted=t,r.Z.publish(o.vL,{accepted:t})),this._accepted}},yi={get instance(){return a.Z.store("AffiliateConsent")}},fi={_accepted:!1,eventName:o.jq,init(){const t=m.Z.get(d.E9.thirdPartyConsent.name);this._accepted="true"===t},get accepted(){return this._accepted},set accepted(t){return this._accepted===t||(m.Z.set(d.E9.thirdPartyConsent.name,t,{expires:d.E9.thirdPartyConsent.expires}),this._accepted=t,r.Z.publish(o.jq,{accepted:t})),this._accepted}},bi={get instance(){return a.Z.store("ThirdpartyConsent")}},wi="STATE_ACCEPTED",vi="STATE_REJECTED";const Ii=Symbol("INSTANCE"),Ei=Symbol("SINGELTONENFORCER");class Si{constructor(t){if(t!==Ei)throw new Error("Instantiation failed: Use ScriptUtils.instance instead of new.");this.pendingScripts={},this.loadedScripts={},this.scriptUrls=s.default.instance&&s.default.instance.thirdparty&&s.default.instance.thirdparty.jsSources?s.default.instance.thirdparty.jsSources:{}}static get instance(){return this[Ii]||(this[Ii]=new Si(Ei)),this[Ii]}load(t){return this.scriptUrls[t]?this.loadedScripts[t]?Promise.resolve():new Promise(((e,i)=>{let s=this.pendingScripts[t];s||(s=document.createElement("script"),s.src=this.scriptUrls[t],s.dataset.name=t),s.addEventListener("load",(t=>this.onScriptLoaded(t,e)),{once:!0}),s.addEventListener("error",(t=>this.onScriptError(t,i)),{once:!0}),this.pendingScripts[t]||(this.pendingScripts[t]=s,document.body.appendChild(s))})):Promise.reject(new Error(`ScriptUtils error: unknown script name "${t}"`))}onScriptLoaded(t,e){const i=t.target,s=i.dataset.name;this.loadedScripts[s]=i,delete this.pendingScripts[s],e()}onScriptError(t,e){const i=t.target.dataset.name;delete this.pendingScripts[i],e(new Error(`ScriptUtils error: failed to load script "${i}" from ${this.scriptUrls[i]}`))}}class Ai{constructor(t,e){t&&t instanceof Element?(this.pinchCanvas=t,this.pinchTarget=e||this.pinchCanvas,this.scaleMin=1,this.scaleMax=2.3,this.scaleThreshold=1.65,this.transformProperty=Array.prototype.slice.call(getComputedStyle(this.pinchCanvas)).filter((t=>t.match(/^(-webkit-|-moz-|-ms-|-o-)?transform$/))).pop(),this.isInitalized=!1,this.isAttached=!1,this.isZoomed=!1,this.isZoomOngoing=!1,this.isPinchOngoing=!1,this.transitionDuration=200,this.scalingFactor=1,this.pinchStartScalingFactor=null,this.isPanning=!1,this.translation={x:0,y:0},this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null},this.isNativeTouchOngoing=!1,this.nativeTouchStartPosition={x:null,y:null},this.boundOnPinch=t=>this.onPinch(t),this.boundOnPinchStart=()=>this.onPinchStart(),this.boundOnPinchEnd=()=>this.onPinchEnd(),this.boundOnZoomedIn=()=>this.onZoomedIn(),this.boundOnZoomedOut=()=>this.onZoomedOut(),this.boundOnPanStart=t=>this.onPanStart(t),this.boundOnPan=t=>this.onPan(t),this.boundOnPanEnd=()=>this.onPanEnd(),this.boundOnTouchStart=t=>this.onTouchStart(t),this.boundOnTouchEnd=t=>this.onTouchEnd(t)):console.warn("PinchToZoom: invalid required argument `canvasElement`, must be of type `Element`")}init(){return H.default.isPhone?window.Hammer?(this.isInitalized=!0,Promise.resolve()):new Promise(((t,e)=>{Si.instance.load("hammerjs").then((()=>{this.isInitalized=!0,t()})).catch((()=>e()))})):Promise.reject()}attach(){this.isInitalized&&!this.isAttached&&(this.zoomOut(),this.attachPinch(),this.isAttached=!0)}detach(){this.isInitalized&&this.isAttached&&(this.zoomOut(),this.detachPinch(),this.isAttached=!1)}onTouchStart(t){this.isNativeTouchOngoing=!0;const e=t.changedTouches[0];this.nativeTouchStartPosition.x=e.clientX,this.nativeTouchStartPosition.y=e.clientY}onTouchEnd(t){const e=t.changedTouches[0];this.isNativeTouchOngoing&&e.clientX!==this.nativeTouchStartPosition.x&&e.clientY!==this.nativeTouchStartPosition.y&&(this.detachPan(),this.detachPinch(),this.attachPinch(),this.attachPan(),this.isNativeTouchOngoing=!1)}onPinchStart(){this.isNativeTouchOngoing=!1,this.isPinchOngoing=!0,this.pinchStartScalingFactor=this.scalingFactor,this.updateZoom()}onPinch(t){const e=t.scale,i=Math.floor(100*e)/100,s=this.pinchStartScalingFactor*i;s>=this.scaleMin&&s<=this.scaleMax&&(this.scalingFactor=s)}onPinchEnd(){this.pinchStartScalingFactor=null,this.isPinchOngoing=!1,this.scalingFactor>=this.scaleThreshold?this.zoomIn():this.zoomOut()}onPanStart(t){this.isNativeTouchOngoing=!1,this.resetPan(),this.isPanning=!0,this.panStartPointerPosition={x:t.center.x,y:t.center.y},this.panStartTranslation=this.translation}onPan(t){if(this.isPanning){const e={x:(t.center.x-this.panStartPointerPosition.x)/this.scalingFactor,y:(t.center.y-this.panStartPointerPosition.y)/this.scalingFactor},i={x:this.translation.x-this.panStartTranslation.x,y:this.translation.y-this.panStartTranslation.y},s={x:e.x-i.x,y:e.y-i.y};(s.x||s.y)&&this.panBy(s)}}onPanEnd(){this.resetPan()}onZoomedIn(){this.resetTransition(),this.isZoomed=!0,this.attachPan(),this.isZoomOngoing=!1}onZoomedOut(){this.resetTransition(),this.isZoomed=!1,this.isZoomOngoing=!1}attachPinch(){this.hammer=new window.Hammer(this.pinchCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",this.boundOnPinchStart),this.hammer.on("pinch",this.boundOnPinch),this.hammer.on("pinchend",this.boundOnPinchEnd)}detachPinch(){this.hammer&&(this.hammer.off("pinchstart",this.boundOnPinchStart),this.hammer.off("pinch",this.boundOnPinch),this.hammer.off("pinchend",this.boundOnPinchEnd),this.hammer.destroy(),this.hammer=null)}attachPan(){this.hammer&&(this.hammer.on("panstart",this.boundOnPanStart),this.hammer.on("panmove",this.boundOnPan),this.hammer.on("panend",this.boundOnPanEnd),this.pinchCanvas.addEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.addEventListener("touchend",this.boundOnTouchEnd))}detachPan(){this.hammer&&(this.resetPan(),this.resetTranslation(),this.hammer.off("panstart",this.boundOnPanStart),this.hammer.off("panmove",this.boundOnPan),this.hammer.off("panend",this.boundOnPanEnd),this.pinchCanvas.removeEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.removeEventListener("touchend",this.boundOnTouchEnd))}updateZoom(){this.isPinchOngoing&&(this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.updateZoom.bind(this),15))}zoomIn(){this.isZoomOngoing=!0,this.scalingFactor=2.3,this.pinchTarget.style.transition=`${this.transformProperty} ${this.transitionDuration}ms ease-out`,this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.boundOnZoomedIn,this.transitionDuration);const t=new CustomEvent(o.ce,{detail:{zoomIn:!0,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}zoomOut(){this.isZoomOngoing=!0,this.detachPan(),this.pinchTarget.style.transition=`${this.transformProperty} ${this.transitionDuration}ms ease-out`,this.scalingFactor=1,this.applyTransform({scale:1}),window.setTimeout(this.boundOnZoomedOut,this.transitionDuration);const t=new CustomEvent(o.ce,{detail:{zoomIn:!1,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}panBy(t){if(!t.x&&!t.y)return;const e=this.pinchTarget.offsetWidth*this.scalingFactor,i=this.pinchTarget.offsetHeight*this.scalingFactor,s=(e-window.innerWidth)/2,n=(i-window.innerHeight)/2,a=s/this.scalingFactor,o=n/this.scalingFactor,r={x:this.translation.x+t.x,y:this.translation.y+t.y};Math.abs(r.x)>a&&(r.x=this.translation.x),Math.abs(r.y)>o&&(r.y=this.translation.y),r.x===this.translation.x&&r.y===this.translation.y||(this.translation=r,this.applyTransform({translation:r}))}applyTransform(t){let e=t.scale||this.scalingFactor,i=this.translation.x,s=this.translation.y;if(t.translation&&t.translation.x&&(i=t.translation.x),t.translation&&t.translation.y&&(s=t.translation.y),e>this.scaleMax&&(e=this.scaleMax),e<this.scaleMin&&(e=this.scaleMin),e<this.scaleMax){const t=(e-this.scaleMin)/(this.scaleMax-this.scaleMin);i*=t,s*=t}window.requestAnimationFrame((()=>{this.pinchTarget.style[this.transformProperty]=`scale(${e}) translate3d(${i}px,${s}px,0)`}))}resetTransition(){this.pinchTarget.style.transition=""}resetTranslation(){this.translation={x:0,y:0}}resetPan(){this.isPanning=!1,this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null}}destroy(){this.detach()}}const ki=Symbol("INSTANCE"),Ci=Symbol("SINGELTONENFORCER");class Pi{constructor(t){if(t!==Ci)throw new Error("Instantiation failed: Use JWPlayerDeliveryAPI.instance instead of new.");this.init()}static get instance(){return this[ki]||(this[ki]=new Pi(Ci)),this[ki]}init(){const t=s.default.instance;this.defaultApiUrl=t.thirdparty&&t.thirdparty.jwplayer&&t.thirdparty.jwplayer.apiUrl?t.thirdparty.jwplayer.apiUrl:"https://cdn.jwplayer.com"}getMediaObjectByMediaId(t,e=""){if(!t||"string"!=typeof t)return Promise.reject(new Error("JWPlayerDeliveryAPI getMediaObjectByMediaId - missing valid mediaId function param"));const i=`${e||this.defaultApiUrl}/v2/media/${t}`;return new Promise(((e,s)=>{this.fetchUrl(i).then((i=>{i?e(i):s(new Error(`JWPlayerDeliveryAPI getMediaObjectByMediaId - no clip found for clipId: ${t}`))})).catch((t=>s(t)))}))}getImageThumbnailByMediaObject(t,e=0){return this._getThumbnailByMediaObject(t,e,"image")}getVideoThumbnailByMediaObject(t,e=0){return this._getThumbnailByMediaObject(t,e,"video")}getVideoThumbnailByMediaId(t,e=0){return t?e&&e<=320?`${this.defaultApiUrl}/v2/media/${t}/poster.mp4?width=320`:`${this.defaultApiUrl}/v2/media/${t}/poster.mp4?width=640`:""}_getThumbnailByMediaObject(t,e=0,i="image"){if(!t)return"";let s=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const n=t.playlist[0];if(n.images&&Array.isArray(n.images)&&n.images.length>0){const t="image"===i||"video"===i?i:"image",a=n.images.filter((e=>0===e.type.indexOf(t)));a.sort(((t,e)=>t.width-e.width)),a.forEach((t=>{(!s||t.width>s.width&&0===e||t.width>s.width&&s.width<e)&&(s=t)}))}}return s&&s.src?s.src:""}getVideoByMediaObject(t,e=0){if(!t)return"";let i=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const s=t.playlist[0];if(s.sources&&Array.isArray(s.sources)&&s.sources.length>0){const t=s.sources.filter((t=>0===t.type.indexOf("video")));t.sort(((t,e)=>t.width-e.width)),t.forEach((t=>{(!i||t.width>i.width&&0===e||t.width>i.width&&i.width<e)&&(i=t)}))}}return i&&i.file?i.file:""}getAdScheduleById(t,e=""){return new Promise(((i,s)=>{t&&"string"==typeof t||s(new Error("JWPlayerDeliveryAPI getAdScheduleById - missing valid id function param"));const n=`${e||this.defaultApiUrl}/v2/advertising/schedules/${t}.json`;this.fetchUrl(n).then((e=>{e?i(e):s(new Error(`JWPlayerDeliveryAPI getAdScheduleById - no ad schedule found for id: ${t}`))})).catch((t=>s(t)))}))}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?Promise.reject(new Error(`JWPlayerDeliveryAPI fetchUrl - failed to get data from API, URL: ${t.url}`)):t.json()))}}const Li=Symbol("INSTANCE"),Ti=Symbol("SINGELTONENFORCER");class _i{constructor(t){if(t!==Ti)throw new Error("Instantiation failed: Use VideoDataControl.instance instead of new.");this._isInitialized=!1,this.hasError=!1,this.isTcDataInitialized=!1,this.currentVideoContentDuration=null,this._sxpkeys="fwd_j4=1&fwd_j5=2:3&fwd_i1=4:5";const e=s.default.instance,i=e.video&&e.video.vdc?e.video.vdc:void 0;if(!i||!i.enabled)return;this.config={autoDetection:!0,consent:!0,site:i?i.site:"",playerName:"JW Player",playerWrapper:i&&Number.isInteger(i.playerWrapper)?i.playerWrapper:10,playerSDKTimeout:i&&Number.isInteger(i.playerSDKTimeout)?i.playerSDKTimeout:8,playerTimeout:i&&Number.isInteger(i.playerTimeout)?i.playerTimeout:10};he.instance.ready?this.onTCDataChanged():r.Z.subscribe(o.x1,this.onTCDataChanged,this)}static get instance(){return this[Li]||(this[Li]=new _i(Ti)),this[Li]}onTCDataChanged(){const t=he.instance;t.ready&&!this.isTcDataInitialized&&(this.isTcDataInitialized=!0,this.config.gdpr_consent=t.tcData&&t.tcData.tcString?t.tcData.tcString:"","object"==typeof window.$AC&&"function"==typeof window.$AC.loadConfig?this.init():(r.Z.subscribe(o.fY,this.onVideoDataControlSourceReady,this),r.Z.subscribe(o.OT,this.onVideoDataControlSourceError,this)))}onVideoDataControlSourceReady(){r.Z.unsubscribe(o.fY,this.onVideoDataControlSourceReady),r.Z.unsubscribe(o.OT,this.onVideoDataControlSourceError),this.init()}onVideoDataControlSourceError(){r.Z.unsubscribe(o.fY,this.onVideoDataControlSourceReady),r.Z.unsubscribe(o.OT,this.onVideoDataControlSourceError),this.hasError=!0,r.Z.publish(o.iE)}init(){"object"==typeof window.$AC&&"function"==typeof window.$AC.loadConfig&&(window.$AC.loadConfig(this.config),"function"==typeof window.$AC.playerInitReady&&window.$AC.playerInitReady()?this.onInitialized():(this.onACPlayerStartListener=this.onACPlayerStart.bind(this),window.addEventListener(o.PI,this.onACPlayerStartListener)))}onACPlayerStart(){this.onACPlayerStartListener&&window.removeEventListener(o.PI,this.onACPlayerStartListener),this.onInitialized()}onInitialized(){this._isInitialized=!0,this._sxpkeys=this.getSXPKeys(),r.Z.publish(o.as)}getSXPKeys(){if(!this.isInitialized||"object"!=typeof window.$AC||"function"!=typeof window.$AC.getSXPKeys)return this._sxpkeys;return window.$AC.getSXPKeys()}setVideoContentDuration(t){Number.isInteger(t)&&this.currentVideoContentDuration!==t&&"object"==typeof window.$AC&&"function"==typeof window.$AC.setTargeting&&(this.currentVideoContentDuration=t,window.$AC.setTargeting("vcd",t),this._sxpkeys=this.getSXPKeys())}get sxpkeys(){return this._sxpkeys}get isInitialized(){return this._isInitialized}}class Oi{constructor(){this.user=l.default.instance,this.videoDataControl=_i.instance,this.tcDataModel=he.instance;const t=s.default.instance;this.smartclipSettings=t.video&&t.video.smartclip?t.video.smartclip:void 0}getVastUrl(t="pre",e=0,i={}){if(!(this.smartclipSettings&&this.smartclipSettings.baseUrl&&this.smartclipSettings.params&&this.smartclipSettings.params.default))return"";const{isMobile:n}=H.default,{isApp:a}=C.default;let o;"pre"===t?o="400x320":"mid"===t?o="400x299":"post"===t&&(o="400x300");let r="";const l=s.default.instance;i.cat?(({cat:r}=i),delete i.cat):l.page&&l.page.attributes&&l.page.attributes.channel_slug&&(r=l.page.attributes.channel_slug);const d=new URL(this.smartclipSettings.baseUrl);if(Object.entries(this.smartclipSettings.params.default).forEach((t=>{const e=t[0],i=t[1];if("cu_itype"===e||"pub_dt1"===e){let t="desktop";n&&(t="mobile"),a&&(t="app"),d.searchParams.set(e,t)}else if("fwd_sz"===e)d.searchParams.set(e,o);else if("ple"===e){let t=i;t=t.replace(/<APP>/g,a?"app.":""),t=t.replace(/<CAT>/g,r),t=t.replace(/<DIMENSIONS>/g,o),d.searchParams.set(e,t)}else if("rnd"===e){const t=Math.floor(1e8+9e8*Math.random());d.searchParams.set(e,t)}else d.searchParams.set(e,i)})),a&&this.smartclipSettings.params.app){const t=z.Z.instance;Object.entries(this.smartclipSettings.params.app).forEach((e=>{const i=e[0],s=e[1];"ang_ifa"===i?t.advertisingId&&d.searchParams.set(i,t.advertisingId):"ang_bundle"===i&&t.bundleId?d.searchParams.set(i,t.bundleId):"ang_storeurl"===i&&t.storeUrl?d.searchParams.set(i,t.storeUrl):d.searchParams.set(i,s)}))}Object.keys(i).forEach((t=>{d.searchParams.set(t,i[t])})),this.tcDataModel&&this.tcDataModel.tcData&&this.tcDataModel.tcData.tcString?(d.searchParams.set("consent",this.tcDataModel.tcData.tcString),d.searchParams.set("optout",0)):d.searchParams.set("optout",1),this.videoDataControl.setVideoContentDuration(e);const h=decodeURIComponent(this.videoDataControl.sxpkeys).split("&");for(let t=0;t<h.length;t++){const e=h[t].split("="),i=e[0]?e[0]:void 0,s=e[1]?e[1]:"";i&&d.searchParams.set(i,s)}return decodeURIComponent(d.href)}}class xi extends Ne{constructor(...t){super(...t),this.tcDataModel=he.instance,this.requiredPurposeIds=[],this.requiredVendorIds=[],this._src="",this.isSrcInitialized=!1}addRequiredPurpose(t){t&&this.requiredPurposeIds.push(t)}addRequiredVendor(t){t&&this.requiredVendorIds.push(t)}loadSrc(){const t=!(!s.default.instance.consent||"boolean"!=typeof s.default.instance.consent.globallyDisabled)&&s.default.instance.consent.globallyDisabled;s.default.instance.preview||this.consentVerified||t&&0===this.requiredPurposeIds.length&&0===this.requiredVendorIds.length?this.initSrc():this.subscribe(o.x1,this.onAbstractTCDataChanged)}onAbstractTCDataChanged(){this.consentVerified&&!this.isSrcInitialized&&this.initSrc()}initSrc(){!this.isSrcInitialized&&this.src&&this.scriptEl&&!this.scriptEl.getAttribute("src")&&(this.isSrcInitialized=!0,this.scriptEl.setAttribute("src",this.src))}get requiredPurposesVerified(){for(let t=0;t<this.requiredPurposeIds.length;t++){const e=this.requiredPurposeIds[t];if(!this.tcDataModel.isPurposeGranted(e))return!1}return!0}get requiredVendorsVerified(){for(let t=0;t<this.requiredVendorIds.length;t++){const e=this.requiredVendorIds[t];if(!this.tcDataModel.isVendorGranted(e))return!1}return!0}get consentVerified(){return this.tcDataModel.ready&&this.requiredPurposesVerified&&this.requiredVendorsVerified}get src(){if(this._src)return this._src;const t=this.scriptEl.getAttribute("data-src");return t?(this._src=t,this._src):""}get scriptEl(){return this.el}destroy(){super.destroy()}}const Ni="MODE_PLAY",Bi="MODE_PAUSE",Di="MODE_STOP",Ri="STATE_DEFAULT",Zi="STATE_LOADING",Ui="STATE_WAITING",Mi="STATE_PLAYING",Vi="STATE_ERROR",zi="AUTOPLAY_INTERSECTION",ji="AUTOPLAY_MOUSEOVER",qi="AUTOPLAY_NONE";const Fi=new E("stories","local"),$i={visitedStories:Array.isArray(Fi.getItem("visited"))?Fi.getItem("visited"):[],add(t){t&&!this.visitedStories.includes(t)&&(this.visitedStories.push(t),Fi.setItem("visited",this.visitedStories))},includes(t){return this.visitedStories.includes(t)}},Wi=l.default.instance;var Gi=i(162);class Hi{static getPodcastPlatformLinks(t){const e=[],{itunesId:i,feedUrl:s,spotifyId:n}=t;return i&&e.push({id:"apple-podcasts",platform:"Apple Podcasts",link:`https://podcasts.apple.com/podcast/id${i}`},{id:"castbox",platform:"Castbox",link:`https://castbox.fm/vic/${i}`}),s&&e.push({id:"google-podcasts",platform:"Google Podcasts",link:`https://podcasts.google.com/?feed=${Gi.Z.encodeBase64(s)}`},{id:"rss",platform:"RSS",link:s}),n&&e.push({id:"spotify",platform:"Spotify",link:`https://open.spotify.com/show/${n}`}),e}}const Ji=Symbol("INSTANCE"),Qi=Symbol("SINGELTONENFORCER");class Ki{constructor(t){if(t!==Qi)throw new Error("Instantiation failed: Use OmnyStudio.instance instead of new.");this.init()}static get instance(){return this[Ji]||(this[Ji]=new Ki(Qi)),this[Ji]}init(){const t=s.default.instance;t.thirdparty&&t.thirdparty.omny&&t.thirdparty.omny.apiUrl&&t.thirdparty.omny.orgId?(this.apiUrl=t.thirdparty.omny.apiUrl,this.orgId=t.thirdparty.omny.orgId,this.programs=t.thirdparty.omny.programs?t.thirdparty.omny.programs:{}):console.error("OmnyStudio requires apiUrl and orgId for correct instantiation.")}getClipByClipId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByClipId - missing valid clipId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/clips/${t}`;return new Promise(((i,s)=>{this.fetchUrl(e).then((e=>{if(e){const t=this.sanitizeFieldsInObject(e,["Title","Description"]);i(t)}else s(new Error(`OmnyStudio getClipByClipId - no clip found for clipId: ${t}`))})).catch((t=>s(t)))}))}getClipByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}/clips?pageSize=1`;return new Promise(((i,s)=>{this.fetchUrl(e).then((e=>{const n=e.Clips&&Array.isArray(e.Clips)&&"undefined"!==e.Clips[0]?e.Clips[0]:void 0;if(n){const t=this.sanitizeFieldsInObject(n,["Title","Description"]);i(t)}else s(new Error(`OmnyStudio getClipByPlaylistId - no clip found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getClipsByPlaylistId(t,e=7){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByPlaylistId - missing valid playlistId function param"));const i=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}/clips?pageSize=${e}`;return new Promise(((e,s)=>{this.fetchUrl(i).then((i=>{const n=i.Clips&&Array.isArray(i.Clips)&&i.Clips.length>0?i.Clips:void 0;if(n){const t=n.map((t=>this.sanitizeFieldsInObject(t,["Title","Description"])));e(t)}else s(new Error(`OmnyStudio getClipsByPlaylistId - no clips found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getPlaylistByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getPlaylistByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}`;return new Promise(((i,s)=>{this.fetchUrl(e).then((e=>{if(e){const t=this.sanitizeFieldsInObject(e,["Title","Description"]);i(t)}else s(new Error(`OmnyStudio getPlaylistByPlaylistId - no playlist found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getPlaylistIdFromClip(t){return void 0!==t&&t.PlaylistIds&&Array.isArray(t.PlaylistIds)?t.PlaylistIds[0]:""}getProgramIdFromClip(t){return void 0!==t&&t.ProgramId?t.ProgramId:""}getProgramNameByProgramId(t){return this.programs[t]&&this.programs[t].name?this.programs[t].name:""}getPlayButtonLabelByProgramId(t){return t&&this.programs[t]&&this.programs[t].playButtonLabel?this.programs[t].playButtonLabel:"Anhören"}getReplayButtonLabelByProgramId(t){return t&&this.programs[t]&&this.programs[t].replayButtonLabel?this.programs[t].replayButtonLabel:"Erneut anhören"}getPlatformLinksByPlaylistId(t){return new Promise(((e,i)=>{this.getPlaylistByPlaylistId(t).then((t=>{const i=this.getPlatformLinksByPlaylist(t);e(i)})).catch((t=>i(t)))}))}getPlatformLinksByClipId(t){return new Promise(((e,i)=>{this.getClipByClipId(t).then((e=>{const s=this.getPlaylistIdFromClip(e);return s||i(new Error(`OmnyStudio getPlatformLinksByClipId - no playlist found for clipId: ${t}`)),Ki.instance.getPlaylistByPlaylistId(s)})).then((t=>{const i=this.getPlatformLinksByPlaylist(t);e(i)})).catch((t=>i(t)))}))}getPlatformLinksByPlaylist(t){if(!t||!t.Id)return this.onError(),null;const e=Ki.instance.getItunesIdByPlaylist(t),i=Ki.instance.getSpotifyIdByPlaylist(t),s=Ki.instance.getFeedUrlByPlaylist(t);return Hi.getPodcastPlatformLinks({itunesId:e,feedUrl:s,spotifyId:i})}getItunesIdByPlaylist(t){if(!t||!t.DirectoryLinks||!t.DirectoryLinks.ApplePodcasts)return null;const e=t.DirectoryLinks.ApplePodcasts.match(/id(?<itunesId>\d+)/);return e&&e.groups&&e.groups.itunesId?e.groups.itunesId:null}getSpotifyIdByPlaylist(t){if(!t||!t.DirectoryLinks||!t.DirectoryLinks.Spotify)return null;const e=t.DirectoryLinks.Spotify.match(/show\/(?<spotifyId>([A-Za-z]|\d)+)/);return e&&e.groups&&e.groups.spotifyId?e.groups.spotifyId:null}getFeedUrlByPlaylist(t){return t&&t.DirectoryLinks&&t.DirectoryLinks.RssFeed?t.DirectoryLinks.RssFeed:null}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?Promise.reject(new Error(`OmnyStudio fetchUrl - failed to get data from API, URL: ${t.url}`)):t.json()))}sanitizeFieldsInObject(t,e){const i={...t};return e.forEach((t=>{i[t]&&"string"==typeof i[t]&&(i[t]=this.sanitizeString(i[t]))})),i}sanitizeString(t){return t.replace(/[AOUaou]\u0308/g,(t=>{switch(t.charCodeAt(0)){case 65:return"Ä";case 79:return"Ö";case 85:return"Ü";case 97:return"ä";case 111:return"ö";case 117:return"ü";default:return t}}))}}var Yi=i(323),Xi=i(249);const ts=Symbol("INSTANCE"),es=Symbol("SINGELTONENFORCER"),is="STATE_READY",ss="STATE_LOADING",ns="STATE_ERROR";class as{constructor(t){if(t!==es)throw new Error("Instantiation failed: Use Secretbox.instance instead of new.");this._state=ss,this._tweetnaclTimeout=null,this.key=l.default.instance.secretboxKey,this.key?this.init():this._state=ns}static get instance(){return this[ts]||(this[ts]=new as(es)),this[ts]}init(){window.nacl&&window.nacl.secretbox?this.onTweetnaclSourceReady():Si.instance.load("tweetnacl").then((()=>this.onTweetnaclSourceReady())).catch((t=>this.onTweetnaclSourceError(t)))}onTweetnaclSourceReady(){this.secretbox=window.nacl.secretbox,this._state=is,r.Z.publish(o.CE)}onTweetnaclSourceError(t){this._state=ns,console.warn(t.message)}decrypt(t){if(this.state!==is){let t="";switch(this.state){case ns:t="Secretbox is not available";break;case ss:t="Secretbox is not yet ready";break;default:t="Secretbox has not been initialized"}return console.error(t),""}const e=(0,Yi.decode)(this.key),i=(0,Yi.decode)(t),s=i.slice(0,this.secretbox.nonceLength),n=i.slice(this.secretbox.nonceLength),a=this.secretbox.open(n,s,e);if(!a)return console.error("Could not decrypt message"),"";return(0,Xi.Jx)(a)}get ready(){return this.state===is}get state(){return this._state}}function os(t){t.magic("audio",(e=>t.$data(e)._audio)),t.directive("audio-omny",((e,{expression:i})=>{const s=t.closestDataStack(e)[0];if(!s)throw new Error("x-audio-omny could not find data stack – use x-data to define one");s._audio={isInitialized:!1,hasError:!1,clips:[],clip:{},loadData:u};const n=r.Z.parseBase64Settings(i),a=(Array.isArray(n.audios)?n.audios:[]).filter((t=>function(t){const{secretboxKey:e,subscriptions:i,hasGiftArticleAccess:s}=l.default.instance;let n=!t.isEncrypted;t.isEncrypted&&e&&Array.isArray(t.subscriptions)&&t.subscriptions.forEach((t=>{n=n||s||i.includes(t)}));return n}(t))),d=a.filter((t=>t.isEncrypted)).length>0;function h(){const t=as.instance;a.forEach((e=>{e.isEncrypted&&e.omnystudioClipId&&(e.omnystudioClipId=t.decrypt(e.omnystudioClipId)),e.isEncrypted&&e.omnystudioPlaylistId&&(e.omnystudioPlaylistId=t.decrypt(e.omnystudioPlaylistId))})),c()}function c(){s._audio.isInitialized=!0,e.dispatchEvent(new CustomEvent("audio-omny-initialized")),n.autoload&&u()}function u(){return s._audio.isInitialized?new Promise(((t,i)=>{Promise.all(a.map((t=>{return t.omnystudioPlaylistId?(e=t.omnystudioPlaylistId,new Promise(((t,i)=>{const s={};Ki.instance.getClipByPlaylistId(e).then((t=>(s.clip=t,Ki.instance.getPlaylistByPlaylistId(e)))).then((e=>{s.playlist=e,t(s)})).catch((t=>i(t)))}))):t.omnystudioClipId?(i=t.omnystudioClipId,new Promise(((t,e)=>{const s={};Ki.instance.getClipByClipId(i).then((e=>(s.clip=e,s.playlistId=Ki.instance.getPlaylistIdFromClip(e),s.programId=Ki.instance.getProgramIdFromClip(e),s.playlistId||(s.programName=s.programId?Ki.instance.getProgramNameByProgramId(s.programId):"",t(s)),Ki.instance.getPlaylistByPlaylistId(s.playlistId)))).then((e=>{s.playlist=e,t(s)})).catch((t=>e(t)))}))):Promise.resolve(null);var e,i}))).then((a=>{const o=[];if(Array.isArray(a)&&a.forEach((t=>{if(t){const e=function(t){if(!t.clip)return null;const e=n.posterSize||"small";let i=null;t.clip.ImageUrl?(i=new URL(t.clip.ImageUrl),i.searchParams.set("size",e)):t.playlist&&t.playlist.ArtworkUrl&&(i=new URL(t.playlist.ArtworkUrl),i.searchParams.set("size",e));const s=[];t.playlist&&t.playlist.DirectoryLinks&&Object.keys(t.playlist.DirectoryLinks).forEach((e=>{if(t.playlist.DirectoryLinks[e])switch(e){case"ApplePodcasts":{const e=t.playlist.DirectoryLinks.ApplePodcasts;-1===e.indexOf("https://podcasts.apple.com/")&&-1===e.indexOf("https://geo.itunes.apple.com/")||s.push({id:"apple-podcasts",service:e});break}case"GooglePodcasts":{const e=t.playlist.DirectoryLinks.GooglePodcasts;e&&s.push({id:"google-podcasts",service:e});break}case"Spotify":{const e=t.playlist.DirectoryLinks.Spotify;-1!==e.indexOf("https://open.spotify.com/")&&s.push({id:"spotify",service:e});break}case"Stitcher":{const e=t.playlist.DirectoryLinks.Stitcher;-1!==e.indexOf("https://castbox.fm/")&&s.push({id:"castbox",service:e});break}case"TuneIn":case"GooglePlay":default:break;case"RssFeed":{const e=t.playlist.DirectoryLinks.RssFeed;e&&s.push({id:"rss",service:e});break}}}));s.find((t=>"apple-podcasts"===t.id))||s.push({id:"apple-podcasts",service:""});const a=[];Array.isArray(t.clip.Chapters)&&t.clip.Chapters.forEach((t=>{const e=("string"==typeof t.Position?t.Position:"").match(/(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})\.?(?<fraction>\d+)?/);if(!e||!e.groups)return;const{hours:i,minutes:s,seconds:n,fraction:o}=e.groups,r=60*("string"==typeof i?parseInt(i,10):0)*60+60*("string"==typeof s?parseInt(s,10):0)+("string"==typeof n?parseInt(n,10):0)+("string"==typeof o?parseFloat(`0.${o}`):0);a.push({position:r,title:t.Name?t.Name:""})}));return{id:t.clip.Id?t.clip.Id:"",audioUrl:p(t.clip),autoplayUrl:g(t.clip),resumeUrl:m(t.clip),downloadUrl:y(t.clip),posterUrl:i?i.href:"",clients:s,duration:t.clip.DurationSeconds?Math.round(1e3*t.clip.DurationSeconds):-1,headline:t.clip.Title?t.clip.Title:"",kicker:t.playlist&&t.playlist.Title?t.playlist.Title:t.programName?t.programName:"",flags:f(t.clip.Id),playButtonLabel:Ki.instance.getPlayButtonLabelByProgramId(t.programId),replayButtonLabel:Ki.instance.getReplayButtonLabelByProgramId(t.programId),articleId:t.clip.Id?b(t.clip.Id):"",playlistId:Ki.instance.getPlaylistIdFromClip(t.clip),chapters:a}}(t);e&&o.push(e)}})),0===o.length){const t=new Error("Error while fetching and parsing Omny data.");console.error(t.message),s._audio.hasError=!0,i(t)}s._audio.clips=o,s._audio.clip=o[0]||{},e.dispatchEvent(new CustomEvent("audio-omny-loaded")),t()})).catch((t=>{console.error(t.message),s._audio.hasError=!0,e.dispatchEvent(new CustomEvent("audio-omny-error")),i(t)}))})):Promise.reject(new Error("x-audio-omny audioLoadData() function called too early – audio is not initialized"))}function p(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(l.default.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return C.default.isIOSApp?e.searchParams.set("utm_source","CustomPlayer3"):C.default.isAndroidApp?e.searchParams.set("utm_source","CustomPlayer4"):e.searchParams.set("utm_source","CustomPlayer1"),e.href}function g(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(l.default.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return e.searchParams.set("utm_source","CustomPlayer10"),e.href}function m(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(l.default.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return e.searchParams.set("utm_source","CustomPlayer11"),e.href}function y(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(l.default.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return C.default.isIOSApp?e.searchParams.set("utm_source","CustomPlayer8"):C.default.isAndroidApp?e.searchParams.set("utm_source","CustomPlayer9"):e.searchParams.set("utm_source","CustomPlayer2"),e.searchParams.set("download","true"),e.href}function f(t){const e=[];return a.forEach((i=>{i.omnystudioClipId===t&&Array.isArray(i.flags)&&i.flags.forEach((t=>{const i=t.replace(/-(paid|conditional)/g,"");e.push(i)}))})),e}function b(t){let e="";return a.forEach((i=>{i.omnystudioClipId===t&&i.articleId&&(e=i.articleId)})),e}0===a.length||d&&!l.default.instance.secretboxKey||(d?as.instance.ready?h():r.Z.subscribe(o.CE,h,this):c())}))}function rs(t){t.directive("embed-bridge-message",((t,{expression:e},{evaluateLater:i})=>{const s=i(e);window.addEventListener("message",(e=>{let i=e.data;if(e.origin===new URL(t.src).origin&&e.source===t.contentWindow){try{i=JSON.parse(i)}catch(t){return}["resize","track"].includes(i.event)&&s((()=>{}),{scope:{$message:i}})}}))}))}function ls(t){if(C.default.isApp){Array.from(document.querySelectorAll("[x-app-ignore]")).forEach((t=>{t.setAttribute("x-ignore","")}))}}var ds=i(394);function hs(t){document.addEventListener("alpine:init",(()=>{Array.from(document.querySelectorAll("[x-lazyload]")).forEach((t=>{t.setAttribute("x-ignore","")}));const e=new($t())({elements_selector:"[x-lazyload]",use_native:!1,unobserve_entered:!0,unobserve_completed:!0,callback_enter:e=>{e.removeAttribute("x-ignore"),"function"==typeof t.nextTick&&"function"==typeof t.initTree&&t.nextTick((()=>t.initTree(e)))}});r.Z.subscribe(o.Z_,(()=>{e&&"function"==typeof e.update&&e.update()}))}))}function cs(t=[],e=[]){return he.instance.ready&&function(t=[]){for(let e=0;e<t.length;e++){const i=t[e];if(!he.instance.isPurposeGranted(i))return!1}return!0}(t)&&function(t=[]){for(let e=0;e<t.length;e++){const i=t[e];if(!he.instance.isVendorGranted(i))return!1}return!0}(e)}function us(t=[],e=[]){const i=!(!s.default.instance.consent||"boolean"!=typeof s.default.instance.consent.globallyDisabled)&&s.default.instance.consent.globallyDisabled;return s.default.instance.preview||cs(t,e)||i&&0===t.length&&0===e.length?Promise.resolve():new Promise((i=>{r.Z.subscribe(o.x1,(()=>{cs(t,e)&&i()}))}))}function ps(t){t.magic("focus",(e=>i=>{const s=i||e;return t.nextTick((()=>s.focus()))})),t.magic("formatTime",(()=>t=>{if(!t||"number"!=typeof t)return"0:00";return`${Math.floor(t/60)}:${`${Math.floor(t%60)}`.padStart(2,"0")}`}));let e=null,i=null,n=null;t.magic("getPodcastPlatformLinks",(()=>async({playlistId:t,clipId:s})=>{if(t&&t===e&&n||!t&&s&&s===i&&n)return n;e=null,i=null,n=null;try{t?(e=t,n=await Ki.instance.getPlatformLinksByPlaylistId(t)):s&&(i=s,n=await Ki.instance.getPlatformLinksByClipId(s))}catch(t){console.warn(`$getPodcastPlatformLinks error: ${t.message}`)}return n})),t.magic("cooldown",(e=>(i,s)=>new Promise((n=>{const a=Number.isInteger(i)?i:2e3,o=t.$data(e);e.setAttribute("disabled",!0),s&&(o[s]=!0),window.setTimeout((()=>{e.removeAttribute("disabled"),s&&(o[s]=!1),n()}),a)})))),t.magic("deepclone",(()=>t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return t}})),t.magic("searchParams",(()=>new URLSearchParams(window.location.search))),t.magic("tcfv2Purposes",(()=>d.EF)),t.magic("waitForConsent",(()=>us)),t.magic("appBridge",(()=>z.Z.instance)),t.magic("appUtils",(()=>C.default)),t.magic("browserHistory",(()=>gi.instance)),t.magic("jwPlayerDeliveryAPI",(()=>Pi.instance)),t.magic("gujAdBridge",(()=>Dt.instance)),t.magic("notificationService",(()=>M.instance)),t.magic("omnyStudio",(()=>Ki.instance)),t.magic("settings",(()=>s.default.instance)),t.magic("userAgentUtils",(()=>H.default)),t.magic("webUtils",(()=>gt.Z))}function gs(t){t.magic("sendMessage",(()=>(...t)=>{const e=t.shift(),i=oe.instance;if(i&&i.messageLookup&&i.messageLookup[e]){const s=new i.messageLookup[e](...t);s&&r.Z.publish(o.s_,s)}}))}function ms(t){t.magic("publish",(()=>(t,...e)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.publish&&window.polygon.componentLoader.publish(t,...e)})),t.magic("subscribe",(()=>(t,e,i)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.subscribe&&window.polygon.componentLoader.subscribe(t,e,i)})),t.magic("unsubscribe",(()=>(t,e)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.unsubscribe&&window.polygon.componentLoader.unsubscribe(t,e)})),t.directive("subscribe",((t,{modifiers:e,expression:i},{evaluateLater:s,cleanup:n})=>{if(!(Array.isArray(e)&&0!==e.length&&i&&window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.subscribe&&"function"==typeof window.polygon.componentLoader.unsubscribe))return;const a=e[0].toUpperCase(),o=s(i),r=(...t)=>{o((()=>{}),{scope:{$payload:t,$topic:a}})};window.polygon.componentLoader.subscribe(a,r),n((()=>{window.polygon.componentLoader.unsubscribe(a,r)}))}))}var ys=i(368);function fs(t,e,i){if(!(t instanceof Element&&e))return;const s=`swiper-${Te.kebabCase(e)}`,n=new CustomEvent(s,{bubbles:!0,detail:i});t.dispatchEvent(n)}function bs(t){t.magic("swiper",(e=>t.$data(e)._swiper)),t.directive("swiper",((e,{expression:i},{evaluate:s,cleanup:n})=>{const a=t.closestDataStack(e)[0];if(!a)throw new Error("x-swiper could not find data stack – use x-data to define one");a._swiper&&"function"==typeof a._swiper.destroy&&a._swiper.destroy();const o=e.querySelector(".polygon-swiper")||e,r=e.querySelector(".polygon-swiper-button-prev"),l=e.querySelector(".polygon-swiper-button-next"),d=e.querySelector(".polygon-swiper-pagination"),h={containerModifierClass:"polygon-swiper-",slideClass:"polygon-swiper-slide",slideActiveClass:"polygon-swiper-slide-active",slideDuplicateActiveClass:"polygon-swiper-slide-duplicate-active",slideVisibleClass:"polygon-swiper-slide-visible",slideDuplicateClass:"polygon-swiper-slide-duplicate",slideNextClass:"polygon-swiper-button-next",slideDuplicateNextClass:"polygon-swiper-slide-duplicate-next",slidePrevClass:"polygon-swiper-button-prev",slideDuplicatePrevClass:"polygon-swiper-slide-duplicate-prev",wrapperClass:"polygon-swiper-wrapper",buttonDisabledClass:"polygon-swiper-button-disabled",noSwipingClass:"polygon-swiper-no-swiping",lazyLoadingClass:"polygon-swiper-lazy",lazyStatusLoadingClass:"polygon-swiper-lazy-loading",lazyStatusLoadedClass:"polygon-swiper-lazy-loaded",lazyPreloaderClass:"polygon-swiper-lazy-preloader",notificationClass:"polygon-swiper-notification",zoomContainerClass:"polygon-swiper-zoom-container",modules:[ys.Rv,ys.kr,ys.W_,ys.tl],navigation:{prevEl:r,nextEl:l,disabledClass:"hidden"},pagination:{el:d,bulletClass:"rounded-circle w-8 h-8 bg-white opacity-moderate mr-6",bulletActiveClass:"polygon-swiper-pagination-bullet-active [&.polygon-swiper-pagination-bullet-active]:opacity-full",clickableClass:"polygon-swiper-pagination-clickable",currentClass:"polygon-swiper-pagination-current",hiddenClass:"polygon-swiper-pagination-hidden",horizontalClass:"polygon-swiper-pagination-horizontal",lockClass:"polygon-swiper-pagination-lock",modifierClass:"polygon-swiper-pagination-",paginationDisabledClass:"polygon-swiper-pagination-disabled",progressbarFillClass:"polygon-swiper-pagination-progressbar-fill",progressbarOppositeClass:"polygon-swiper-pagination-progressbar-opposite",totalClass:"polygon-swiper-pagination-total",verticalClass:"polygon-swiper-pagination-vertical"},on:{init(){t.nextTick((()=>fs(o,"init")),0)}}},c=s(i);Object.keys(c).forEach((t=>{const e=h[t],i=c[t];h[t]="object"==typeof e&&"object"==typeof i?{...e,...i}:i})),a._swiper=new ys.ZP(o,h),a._swiper.onAny(((t,e,...i)=>{fs(o,t,i)})),n((()=>{a._swiper&&(a._swiper.destroy(),delete a._swiper)}))}))}function ws(t){const e={};t.directive("unique",((t,{expression:i})=>{i&&(e[i]=e[i]+1||1,e[i]>1&&t.remove())}))}window.polygon=window.polygon||{};const vs=new class{constructor(t={},e={}){const i={contextEl:document,prefix:""};this.options=Object.assign({},i,e),this.initializedComponents={},this.numberOfInitializedComponents=0,this.components={},this.topics={},this._queuedScans=0,this._isScanning=!1,this.register(t)}register(t={}){Object.keys(t).forEach((e=>{this.components[e]=t[e]}))}unregister(t){delete this.components[t]}subscribe(t,e,i){this.topics.hasOwnProperty(t)||(this.topics[t]=[]),this.topics[t].push({context:i,callback:e})}unsubscribe(t,e,i){if(!this.topics.hasOwnProperty(t))return!1;for(let s=0,n=this.topics[t].length;s<n;s++)if(this.topics[t][s].callback===e&&(!i||this.topics[t][s].context===i))return this.topics[t].splice(s,1),!0;return!1}publish(t){if(!this.topics.hasOwnProperty(t))return!1;const e=new Array(arguments.length-1);for(var i=0;i<e.length;++i)e[i]=arguments[i+1];for(let i=0,s=this.topics[t].length;i<s;i++){let s=this.topics[t][i];s&&s.callback&&s.callback.apply(s.context,e)}return!0}scan(t={}){if(this._isScanning)return void(this._queuedScans+=1);this._isScanning=!0;const e={},i=this.options.contextEl.querySelectorAll(`[data-${this.options.prefix}component]`);[].forEach.call(i,(i=>{this._scanElement(i,e,t)})),this.numberOfInitializedComponents>0&&this.cleanUp_(e),this._isScanning=!1,this._queuedScans>0?(this._queuedScans-=1,this.scan()):this.publish(o.gM)}_scanElement(t,e,i){let s=t.getAttribute(`data-${this.options.prefix}component-id`);s||(s=this._generateUUID(),t.setAttribute(`data-${this.options.prefix}component-id`,s));t.getAttribute(`data-${this.options.prefix}component`).match(/\S+/g).forEach((n=>{const a=`${n}-${s}`;e[a]=!0,this.initializedComponents[a]||this._initializeComponent(n,a,t,i)}))}_initializeComponent(t,e,i,s){const n=this.components[t];if("function"!=typeof n)return void(window.console&&window.console.warn&&window.console.warn(`ComponentLoader: unknown component '${t}'`));let a=new n(i,s,this);this.initializedComponents[e]=a,this.numberOfInitializedComponents++}_destroyComponent(t){const e=this.initializedComponents[t];e&&"function"==typeof e.destroy&&e.destroy(),delete this.initializedComponents[t],this.numberOfInitializedComponents--}cleanUp_(t={}){Object.keys(this.initializedComponents).forEach((e=>{t[e]||this._destroyComponent(e)}))}_generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}}({AdblockLayer:class extends Ze{onLocalized(){this.init()}init(){this.settings=JSON.parse(this.data.settings),this.message=this.el.querySelector('[data-adblock-el="message"]'),this.loader=this.el.querySelector('[data-adblock-el="loader"]'),this.focusTrap=this.el.querySelector('[data-adblock-el="focusTrap"]'),this.whitelistButton=this.el.querySelector('[data-adblock-el="whitelistButton"]'),this.continueWithAdblockerButton=this.el.querySelector('[data-adblock-el="continueWithAdblockerButton"]'),this.loginLink=this.el.querySelector('[data-adblock-el="loginLink"]'),this.switchLanguageElement=this.el.querySelector('[data-adblock-el="switchLanguageElement"]'),this.isInitialized=!1,this.hasErrorOccurred=!1,this.state=je,this.subscribe(o.Rh,this.onError,this),this.subscribe(o.In,this.onSourcepointMessageReceived,this),this.initContinueWithAdblockerButton(),this.initWhitelistButton(),"adblock-api"===Ve.instance.message&&this.onInitialized()}initContinueWithAdblockerButton(){this.continueWithAdblockerButton&&this.continueWithAdblockerButton.addEventListener("click",(t=>{this.onContinueWithAdblockerButtonClicked(t)}))}initWhitelistButton(){this.whitelistButton&&this.whitelistButton.addEventListener("click",(t=>{this.onWhitelistButtonClicked(t)}))}onContinueWithAdblockerButtonClicked(t){t.preventDefault(),this.publish(o.bS,d.VQ.continue_with_adblocker),this.el.classList.add("hidden"),this.publish(o.FW,this),this.state=je,this.publish(o.wW)}onWhitelistButtonClicked(t){t.preventDefault(),this.hasErrorOccurred?this.state=qe:(this.publish(o.bS,d.VQ.whitelist_instructions_viewed,this.language),this.state=je)}onInitialized(){this.isInitialized=!0,this.el.classList.remove("hidden"),this.focusTrap&&window.requestAnimationFrame((()=>{this.focusTrap.focus()})),this.publish(o.oc,this),this.state=ze,this.publish(o.wS)}onError(){this.hasErrorOccurred=!0,this.isInitialized?this.state=qe:(this.state=ze,this.isInitialized=!0)}onSourcepointMessageReceived(t){"adblock-api"===t&&this.onInitialized()}get id(){return this.data.componentId}get preventScrolling(){return!0}get state(){return this._state}set state(t){switch(this._state=t,t){case je:r.Z.toggleElementVisibility(this.message,!1),r.Z.toggleElementVisibility(this.loader,!0),r.Z.toggleElementVisibility(this.switchLanguageElement,!1);break;case qe:r.Z.toggleElementVisibility(this.message,!1),r.Z.toggleElementVisibility(this.loader,!0),r.Z.toggleElementVisibility(this.switchLanguageElement,!0);break;default:r.Z.toggleElementVisibility(this.message,!0),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.switchLanguageElement,!0)}}destroy(){super.destroy()}},AdobeLaunchSource:class extends Ne{constructor(...t){if(super(...t),window.adobe&&window.adobe.target)this.publish(o.HD);else{this.el.onload=()=>{this.publish(o.HD)};const t=this.el.getAttribute("data-src");t&&this.el.setAttribute("src",t)}}destroy(){super.destroy()}},BookmarksCardsSlider:class extends Ne{constructor(...t){super(...t),l.default.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.documentIds=[],this.teaserLookup={},this.bookmarks=k.instance,this.content=this.el.querySelector('[data-bookmarkscardsslider-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarkscardsslider-el="teaserlist"]'),this.loader=this.el.querySelector('[data-bookmarkscardsslider-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarkscardsslider-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarkscardsslider-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarkscardsslider-el="error"]'),this.state=Ye,this.subscribe(o.A7,this.onBookmarksError),this.bookmarks.isInitialized?this.init():this.subscribe(o.mJ,this.init))}init(){this.subscribe(o.Y5,(()=>this.refresh())),this.subscribe(o.M6,(()=>this.refresh())),this.subscribe(o.rU,(()=>this.refresh())),this.subscribe(o._B,(()=>this.refresh())),this.refresh()}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==d.nV&&t.type!==d.Wg?this.state!==ei&&(this.state=ti):this.refresh())}refresh(){const t=this.bookmarks.documentIds.length,e=this.bookmarks.documentIds.length>3?this.bookmarks.documentIds.length-3:0,i=this.bookmarks.documentIds.slice(e,t);if(i.reverse(),Fe.isEqual(i,this.documentIds)&&this.state===ei)return Promise.resolve();this.state=Ye,this.documentIds=i;const s=this.documentIds.filter((t=>!this.teaserLookup[t]));return 0===s.length?(this.updateView(),Promise.resolve()):Ke.instance.getTeasersByIds(s).then((t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach((t=>{if(!t.id)return;const e={...t};this.dataSettings.fallbackImageSrc&&(e.imageSrc=this.dataSettings.fallbackImageSrc),this.teaserLookup[e.id]=e})),this.updateView(),Promise.resolve()):s.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=ti,Promise.reject())))}updateView(){const t=this.documentIds.filter((t=>!this.teaserLookup[t])),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?ei:Xe,this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach(((t,e)=>{const i=this.teaserLookup[t];if(!i)return;const s={...i},n=e===this.documentIds.length-1;s.additionalClassesString=n?"lg:mx-24 md:mx-24 sm:mx-16":"lg:ml-24 md:ml-24 sm:ml-16";const a=Ge.instance.create(s,d._);a&&this.teaserlist.append(a)})),this.publish(o.Z_),this.scan(),this.updateSwiper()}updateSwiper(){const t=this.el.querySelector('[data-bookmarkscardsslider-el="swiper"]');t&&t.swiper&&"function"==typeof t.swiper.update&&t.swiper.update()}get state(){return this._state||(this._state=ei),this._state}set state(t){switch(this._state=t,t){case Ye:r.Z.toggleElementVisibility(this.content,!0),r.Z.toggleElementVisibility(this.loader,!0),r.Z.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!1);break;case Xe:r.Z.toggleElementVisibility(this.content,!1),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!0),r.Z.toggleElementVisibility(this.error,!1);break;case ti:r.Z.toggleElementVisibility(this.content,!1),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!0);break;default:r.Z.toggleElementVisibility(this.content,!0),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!1)}}},BookmarkButton:class extends Ne{constructor(...t){super(...t),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.documentId=this.settings.documentId,this.collection=this.settings.collection,this.documentId&&this.collection?(this.bookmarks=k.instance,this.iconInactive=this.el.querySelector('[data-bookmark-button-el="icon-inactive"]'),this.iconActive=this.el.querySelector('[data-bookmark-button-el="icon-active"]'),this.label=this.el.querySelector('[data-bookmark-button-el="label"]'),this.boundOnClick=()=>this.onClick(),this.init()):r.Z.toggleElementVisibility(this.el,!1)}init(){this.state=this.bookmarks.contains(this.documentId,this.collection)?ii:si,this.subscribe(o.Y5,this.onBookmarkAdded),this.subscribe(o.M6,this.onBookmarkDeleted),this.subscribe(o.rU,this.onAllBookmarksDeleted),this.subscribe(o._B,this.onBookmarksUpdated),this.subscribe(o.A7,this.onBookmarksError),this.el.addEventListener("click",this.boundOnClick)}onClick(){if(this.el.hasAttribute("disabled"))return;const t=this.state===si?o.uf:o.nj;this.publish(t,this.documentId,this.collection),this.state=this.state===si&&l.default.instance.isLoggedIn?ii:si,this.el.setAttribute("disabled",""),setTimeout((()=>{this.el.removeAttribute("disabled")}),200)}onBookmarkAdded(t,e){this.documentId===t&&this.collection===e&&this.state!==ii&&(this.state=ii)}onBookmarkDeleted(t,e){this.documentId===t&&this.collection===e&&this.state!==si&&(this.state=si)}onAllBookmarksDeleted(t){this.collection===t&&this.state!==si&&(this.state=si)}onBookmarksUpdated(){this.refreshState()}onBookmarksError(t){!t||t.type!==d.nV&&t.type!==d.Wg||t.documentId!==this.documentId||t.collection!==this.collection||this.refreshState()}refreshState(){this.state=this.bookmarks.contains(this.documentId,this.collection)?ii:si}get state(){return this._state||(this._state=si),this._state}set state(t){t===ii?(this._state=ii,r.Z.toggleElementVisibility(this.iconInactive,!1),r.Z.toggleElementVisibility(this.iconActive,!0),this.label.textContent="Aus Merkliste entfernen",this.el.title="Aus Merkliste entfernen"):(this._state=si,r.Z.toggleElementVisibility(this.iconActive,!1),r.Z.toggleElementVisibility(this.iconInactive,!0),this.label.textContent="Zur Merkliste hinzufügen",this.el.title="Zur Merkliste hinzufügen")}destroy(){this.el.removeEventListener("click",this.boundOnClick)}},BookmarksList:class extends Ne{constructor(...t){super(...t),l.default.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.documentIds=[],this.teaserLookup={},this.bookmarks=k.instance,this.deleteAllLink=this.el.querySelector('[data-bookmarkslist-el="deleteAllLink"]'),this.content=this.el.querySelector('[data-bookmarkslist-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarkslist-el="teaserlist"]'),this.loader=this.el.querySelector('[data-bookmarkslist-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarkslist-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarkslist-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarkslist-el="error"]'),this.paginationEl=this.el.querySelector('[data-bookmarkslist-el="pagination"]'),this.paginationBackEl=this.el.querySelector('[data-pagination-el="back"]'),this.paginationForwardEl=this.el.querySelector('[data-pagination-el="forward"]'),this.paginationCurrentEl=this.el.querySelector('[data-pagination-el="current"]'),this.paginationTotalEl=this.el.querySelector('[data-pagination-el="total"]'),this.paginationPageSize=20,this._paginationItemsTotal=0,this._paginationPagesTotal=0,this._paginationCurrentPage=1,this.boundOnPaginationBackClick=t=>this.onPaginationBackClick(t),this.boundOnPaginationForwardClick=t=>this.onPaginationForwardClick(t),this.boundOnDeleteAllClick=t=>this.onDeleteAllClick(t),this.state=ni,this.subscribe(o.A7,this.onBookmarksError),this.bookmarks.isInitialized?this.init():this.subscribe(o.mJ,this.init))}init(){this.paginationBackEl&&this.paginationBackEl.addEventListener("click",this.boundOnPaginationBackClick),this.paginationForwardEl&&this.paginationForwardEl.addEventListener("click",this.boundOnPaginationForwardClick),this.deleteAllLink&&this.deleteAllLink.addEventListener("click",this.boundOnDeleteAllClick),this.subscribe(o.Y5,(()=>this.refresh())),this.subscribe(o.M6,(()=>this.refresh())),this.subscribe(o.rU,(()=>this.refresh())),this.subscribe(o._B,(()=>this.refresh())),this.refresh()}onDeleteAllClick(t){t.preventDefault(),this.publish(o.IX,this.collection)}onPaginationBackClick(t){t.preventDefault(),this.paginationCurrentPage>1&&(this.paginationCurrentPage-=1,this.refresh().then((()=>this.scrollToTop())).catch((()=>{})))}onPaginationForwardClick(t){t.preventDefault(),this.paginationCurrentPage<this.paginationPagesTotal&&(this.paginationCurrentPage+=1,this.refresh().then((()=>this.scrollToTop())).catch((()=>{})))}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==d.nV&&t.type!==d.Wg?this.state=oi:this.refresh())}refresh(){this.paginationItemsTotal=this.bookmarks.documentIds.length;const t=this.paginationItemsTotal-(this.paginationCurrentPage-1)*this.paginationPageSize,e=t-this.paginationPageSize>0?t-this.paginationPageSize:0,i=this.bookmarks.documentIds.slice(e,t);if(i.reverse(),Fe.isEqual(i,this.documentIds)&&this.state===ri)return Promise.resolve();this.state=ni,this.documentIds=i;const s=this.documentIds.filter((t=>!this.teaserLookup[t]));return 0===s.length?(this.updateView(),Promise.resolve()):Ke.instance.getTeasersByIds(s).then((t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach((t=>{if(!t.id)return;const e={...t};e.imageId||(e.classmodifier="data-"),this.teaserLookup[e.id]=e})),this.updateView(),Promise.resolve()):s.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=oi,Promise.reject())))}updateView(){const t=this.documentIds.filter((t=>!this.teaserLookup[t])),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?ri:ai,r.Z.toggleElementVisibility(this.deleteAllLink,e),r.Z.toggleElementVisibility(this.paginationEl,e),this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach((t=>{const e=this.teaserLookup[t];if(!e)return;const i=Ge.instance.create(e,d.v_);if(i){if(this.teaserlist.hasChildNodes()){const t=_.Z.createElementByPrototypeId("prototype-border-separator");t&&this.teaserlist.append(t)}this.teaserlist.append(i)}})),this.publish(o.Z_),this.scan()}scrollToTop(){window.scrollY>this.el.getBoundingClientRect().y&&gt.Z.scrollToElement(this.el)}get paginationCurrentPage(){return this._paginationCurrentPage}set paginationCurrentPage(t){!Number.isInteger(t)||t<=0||(this._paginationCurrentPage=t,r.Z.toggleElementVisibility(this.paginationBackEl,t>1),r.Z.toggleElementVisibility(this.paginationForwardEl,t<this.paginationPagesTotal),this.paginationCurrentEl.textContent=t)}get paginationPagesTotal(){return this._paginationPagesTotal}set paginationPagesTotal(t){!Number.isInteger(t)||t<0||(this._paginationPagesTotal=t,this.paginationTotalEl.textContent=t,0===t?this.paginationCurrentPage=1:this.paginationCurrentPage>t&&(this.paginationCurrentPage=t))}get paginationItemsTotal(){return this._paginationItemsTotal}set paginationItemsTotal(t){!Number.isInteger(t)||t<0||(this._paginationItemsTotal=t,this.paginationPagesTotal=Math.ceil(t/this.paginationPageSize),this.paginationCurrentPage=this.paginationCurrentPage||1)}get state(){return this._state||(this._state=ri),this._state}set state(t){switch(this._state=t,t){case ni:r.Z.toggleElementVisibility(this.content,!0),r.Z.toggleElementVisibility(this.loader,!0),r.Z.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!1);break;case ai:r.Z.toggleElementVisibility(this.content,!1),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!0),r.Z.toggleElementVisibility(this.error,!1);break;case oi:r.Z.toggleElementVisibility(this.content,!1),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!0),this.scrollToTop();break;default:r.Z.toggleElementVisibility(this.content,!0),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!1)}}destroy(){this.deleteAllLink&&this.deleteAllLink.removeEventListener("click",this.boundOnDeleteAllClick)}},BookmarksShortList:class extends Ne{constructor(...t){super(...t),l.default.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.bookmarks=k.instance,this.documentIds=[],this.teaserLookup={},this.loader=this.el.querySelector('[data-bookmarksshortlist-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarksshortlist-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarksshortlist-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarksshortlist-el="error"]'),this.content=this.el.querySelector('[data-bookmarksshortlist-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarksshortlist-el="teaserlist"]'),this.state=li,this.subscribe(o.A7,this.onBookmarksError),this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad))}init(){this.subscribe(o.Y5,(()=>this.refresh())),this.subscribe(o.M6,(()=>this.refresh())),this.subscribe(o.rU,(()=>this.refresh())),this.subscribe(o._B,(()=>this.refresh())),this.refresh()}onLazyLoad(t){t.target===this.el&&(this.bookmarks.isInitialized?this.init():this.subscribe(o.mJ,this.init))}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==d.nV&&t.type!==d.Wg?this.state!==ci&&(this.state=hi):this.refresh())}refresh(){const t=this.bookmarks.documentIds.length,e=this.bookmarks.documentIds.length>3?this.bookmarks.documentIds.length-3:0,i=this.bookmarks.documentIds.slice(e,t);if(i.reverse(),Fe.isEqual(i,this.documentIds)&&this.state===ci)return Promise.resolve();this.state=li,this.documentIds=i;const s=this.documentIds.filter((t=>!this.teaserLookup[t]));return 0===s.length?(this.updateView(),Promise.resolve()):Ke.instance.getTeasersByIds(s).then((t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach((t=>{t.id&&(this.teaserLookup[t.id]=t)})),this.updateView(),Promise.resolve()):s.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=hi,Promise.reject())))}updateView(){const t=this.documentIds.filter((t=>!this.teaserLookup[t])),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?ci:di,this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach((t=>{const e=this.teaserLookup[t];if(!e)return;const i=Ge.instance.create(e,d.SQ);i&&this.teaserlist.append(i)})),this.publish(o.Z_)}get state(){return this._state||(this._state=ci),this._state}set state(t){switch(this._state=t,t){case li:r.Z.toggleElementVisibility(this.content,!0),r.Z.toggleElementVisibility(this.loader,!0),r.Z.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!1);break;case di:r.Z.toggleElementVisibility(this.content,!1),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!0),r.Z.toggleElementVisibility(this.error,!1);break;case hi:r.Z.toggleElementVisibility(this.content,!1),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!0);break;default:r.Z.toggleElementVisibility(this.content,!0),r.Z.toggleElementVisibility(this.loader,!1),r.Z.toggleElementVisibility(this.emptyState,!1),r.Z.toggleElementVisibility(this.error,!1)}}},CustomConsent:class extends Ne{constructor(...t){if(super(...t),this.settings=JSON.parse(this.data.settings),this.activator=this.el.querySelector('[data-custom-consent-el="activator"]'),this.activatorButton=this.el.querySelector('[data-custom-consent-el="activatorButton"]'),this.deactivator=this.el.querySelector('[data-custom-consent-el="deactivator"]'),this.deactivatorButton=this.el.querySelector('[data-custom-consent-el="deactivatorButton"]'),this.consentModel=null,"affiliate"===this.settings.consentType)this.consentModel=yi.instance;else{if("thirdparty"!==this.settings.consentType)return void console.warn(`CustomConsent: Unknown consentType "${this.settings.consentType}".`);this.consentModel=bi.instance}this.boundOnConsentChanged=t=>this.onConsentChanged(t),this.boundOnActivatorButtonToggle=t=>this.onActivatorButtonToggle(t),this.boundOnDeactivatorButtonToggle=t=>this.onDeactivatorButtonToggle(t),this.subscribe(this.consentModel.eventName,this.boundOnConsentChanged),this.activatorButton.addEventListener("toggle",this.boundOnActivatorButtonToggle),this.deactivatorButton.addEventListener("toggle",this.boundOnDeactivatorButtonToggle),this.state=this.consentModel.accepted?wi:vi}onConsentChanged(t){this.state=t.accepted?wi:vi,this.updateAriaAndTabindex()}onActivatorButtonToggle(t){t.detail&&t.detail.isActive&&(this.consentModel.accepted=!0)}onDeactivatorButtonToggle(t){t.detail&&!t.detail.isActive&&(this.consentModel.accepted=!1)}updateAriaAndTabindex(){const{accepted:t}=this.consentModel;this.activatorButton.setAttribute("aria-hidden",t),this.activatorButton.setAttribute("tabindex",t?"-1":"0"),this.deactivatorButton.setAttribute("aria-hidden",!t),this.deactivatorButton.setAttribute("tabindex",t?"0":"-1")}get state(){return this._state}set state(t){t===wi&&(r.Z.toggleElementVisibility(this.activator,!1),r.Z.toggleElementVisibility(this.deactivator,!0)),this._state=t}destroy(){this.unsubscribe(this.event,this.boundOnConsentChanged),this.activatorButton.removeEventListener("toggle",this.onActivatorButtonToggle),this.deactivatorButton.removeEventListener("toggle",this.onDeactivatorButtonToggle)}},ImageZoomLayer:class extends Ne{constructor(...t){super(...t),(this.el.dataset.settings||this.el.dataset.settings.id)&&(this.focusCatcher=this.el.querySelector("[data-zoom-focus]"),this.closeButton=this.el.querySelector("[data-zoom-close]"),this.backdrop=this.el.querySelector("[data-zoom-backdrop]"),this.background=this.el.querySelector("[data-zoom-background]"),this.isCaptionShown=!1,this.caption=this.el.querySelector("[data-zoom-caption]"),this.imageWrapper=this.el.querySelector("[data-zoom-image]"),this.image=this.el.querySelector('[data-image-el="img"]'),this.settings=JSON.parse(this.el.dataset.settings),this.hash=`bild-${this.settings.imageId}`,this.animationDuration=250,this.ignoreClicks=!1,this.pinchToZoom=new Ai(this.el,this.image),this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),this.boundRepositionCloseButton=()=>this.repositionCloseButton(),this.boundCenterImage=()=>this.centerImage(),this.boundHandleWheel=t=>this.handleWheel(t),this.boundHandleClick=()=>this.handleClick(),this.boundClose=()=>{this.publish(o.Cx)},this.boundOnPinchZoomChanged=t=>this.onPinchZoomChanged(t),this.pinchToZoom.init().catch((()=>{this.pinchToZoom.destroy(),this.pinchToZoom=null})).finally((()=>{gi.instance.register(this),window.location.hash===`#${this.hash}`&&this.publish(o.uh,this.id)})))}open(){H.default.isPhone&&H.default.isIOS&&(window.addEventListener("resize",this.boundRepositionCloseButton),window.addEventListener("resize",this.boundCenterImage),this.centerImage()),H.default.isPhone||this.el.addEventListener("wheel",this.boundHandleWheel),this.background&&this.background.addEventListener("click",this.boundHandleClick),this.toggleZoomLayer(!0),this.publish(o.oc,this),this.settings.zoomAnimation&&this.settings.zoomId?(this.publish(o.Rp,this.settings.zoomId,this.animationDuration),window.setTimeout((()=>this.showImageOnLazyload()),this.animationDuration)):this.showImageOnLazyload(),this.showOverlay(),this.focusOverlay(),this.toggleInterface(!1),this.pinchToZoom&&(this.pinchToZoom.attach(),this.image.addEventListener(o.ce,this.boundOnPinchZoomChanged))}close(){window.removeEventListener("scroll",this.boundHandleScroll),window.removeEventListener("resize",this.boundRepositionCloseButton),window.removeEventListener("resize",this.boundCenterImage),this.background&&this.background.removeEventListener("click",this.boundHandleClick),this.hideOverlay(),this.hideImage(),this.toggleInterface(!0),this.publish(o.FW,this),window.setTimeout((()=>{this.toggleZoomLayer(!1)}),this.animationDuration),this.pinchToZoom&&(this.image.removeEventListener(o.ce,this.boundOnPinchZoomChanged),this.pinchToZoom.detach())}handleWheel(t){this.caption&&this.caption.contains(t.target)||(this.el.removeEventListener("wheel",this.boundHandleWheel),this.boundClose())}handleClick(){this.ignoreClicks||this.toggleInterface(this.isCaptionShown)}onPinchZoomChanged(t){t.detail&&"boolean"==typeof t.detail.zoomIn&&(this.toggleInterface(t.detail.zoomIn),Number.isInteger(t.detail.transitionDuration)&&(this.ignoreClicks=!0,window.setTimeout((()=>{this.ignoreClicks=!1}),t.detail.transitionDuration)))}toggleInterface(t){t?(this.hideCaption(),this.hideCloseButton(),this.isCaptionShown=!1):(this.showCaption(),this.showCloseButton(),this.isCaptionShown=!0)}toggleZoomLayer(t){this.el.classList.toggle("hidden",!t)}repositionCloseButton(){window.requestAnimationFrame((()=>{if(this.buttonTargetDistance=this.buttonTargetDistance?this.buttonTargetDistance:Number(window.getComputedStyle(this.closeButton).top.split("px")[0]),window.innerHeight>window.innerWidth)this.closeButton.style.top=`${this.buttonTargetDistance}px`;else{const t=this.closeButton.getBoundingClientRect().top;t!==this.buttonTargetDistance&&(this.closeButton.style.top=2*this.buttonTargetDistance-t+"px")}}))}centerImage(){window.requestAnimationFrame((()=>{window.innerHeight>window.innerWidth?this.image.offsetHeight>0&&window.setTimeout((()=>{const t=window.innerHeight-this.image.offsetHeight;this.imageWrapper.classList.add("absolute"),this.imageWrapper.style.top=t/2+"px"}),this.animationDuration):(this.imageWrapper.classList.remove("absolute"),this.imageWrapper.style.top="")}))}showOverlay(){this.backdrop.setAttribute("style",`transition: background-color ${this.animationDuration}ms ease-out;`),window.setTimeout((()=>{this.backdrop.classList.remove("bg-opacity-none")}),0)}focusOverlay(){this.focusCatcher.focus()}hideOverlay(){this.backdrop.classList.add("bg-opacity-none")}showCaption(){this.caption&&(this.caption.style.transform="translateY(100%)",window.setTimeout((()=>{this.caption.setAttribute("style",`transition: transform ${this.animationDuration}ms ease-out;`),this.caption.style.transform="translateY(0)"}),0))}hideCaption(){this.caption&&(this.caption.style.transform="translateY(100%)")}showCloseButton(){this.closeButton.addEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)",window.setTimeout((()=>{this.closeButton.setAttribute("style",`transition: transform ${this.animationDuration}ms ease-out;`),this.closeButton.style.transform="translateX(0)",this.repositionCloseButton()}),0)}hideCloseButton(){this.closeButton.removeEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)"}showImage(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),window.setTimeout((()=>{this.image.setAttribute("style",`transition: opacity ${this.animationDuration}ms ease-out;`),this.image.classList.remove("opacity-none"),this.image.classList.add("opacity-full")}),0),this.image.removeEventListener("load",this.boundShowImage)}hideImage(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none")}showImageOnLazyload(){this.image.classList.contains("lazyloaded")||this.image.classList.contains("ls-is-cached")||this.image.complete?this.showImage():(this.boundShowImage=()=>this.showImage(),this.image.addEventListener("load",this.boundShowImage))}get id(){return this.settings.zoomId}get preventScrolling(){return!0}destroy(){this.hideZoomLayer(),this.image.removeEventListener("load",this.boundShowImage),this.image.removeEventListener(o.ce,this.boundOnPinchZoomChanged),super.destroy()}},JWPlayer:class extends Ne{constructor(...t){super(...t),this.storageObject=new E("jwplayer","local"),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.id=this.settings.id,this.adScheduleId=null,this.isConfigInitialized=!1,this.isJWPlayerReady=!1,this.isJWPlayerInitialized=!1,this.tcdataInitializationTimeoutId=null,this.vdcInitializationTimeoutId=null,this.loader=this.el.querySelector('[data-video-el="loader"]'),this.hasVideo=!1,this.hasAudio=!1,this.hasAdvertisement=!1,this.isAutoPaused=!1,this.vastUrlBuilder=void 0;const{mediaIdFromUrl:e,durationInSeconds:i}=this.settings;this.durationInSeconds=Number.isInteger(i)?i:0;const n=new URLSearchParams(window.location.search);if(this.mediaId=e?decodeURIComponent(n.get("mediaid")):this.settings.mediaId?this.settings.mediaId:void 0,!this.mediaId)return void this.onError();const a=s.default.instance,r=l.default.instance,d=a.editorial&&a.editorial.attributes?a.editorial.attributes:{},h=a.editorial&&a.editorial.category?a.editorial.category:"";if(this.suppressAds=a.disableAds||a.noAds||r.hasNoAdsAccess||"never"===this.settings.adBehavior||d.has_noAds||d.has_noContentAds||"sponsored"===h,this.subscribe(o.wS,this.onAdblockLayerOpened,this),this.subscribe(o.wW,this.onAdblockLayerClosed,this),this.consentGloballyDisabled=!(!a.consent||"boolean"!=typeof a.consent.globallyDisabled)&&a.consent.globallyDisabled,!this.suppressAds&&this.consentGloballyDisabled){this.suppressAds=!0;he.instance.ready?this.onTCDataChanged():(this.tcdataInitializationTimeoutId=setTimeout((()=>{console.error("JWPlayer: TCData init timeout"),this.onTCDataChanged()}),2e3),this.subscribe(o.x1,this.onTCDataChanged,this))}else this.initConfig()}onTCDataChanged(){if(this.tcdataInitializationTimeoutId&&clearTimeout(this.tcdataInitializationTimeoutId),this.suppressAds&&this.consentGloballyDisabled){he.instance.isPurposeGranted(d.EF.store_and_access_information_on_a_device)&&(this.suppressAds=!1)}this.initConfig()}initConfig(){if(this.isConfigInitialized)return;this.isConfigInitialized=!0,this.vastUrlBuilder=this.suppressAds?void 0:new Oi;const{autostart:t,disableRelated:e,errors:i,skinUrl:s}=this.settings;this.config={mediaid:this.mediaId,playlist:[],intl:{de:{errors:i}}},t&&(this.config.autostart="viewable"),e&&(this.config.related={}),s&&(this.config.skin={url:s,name:"spgl"}),this.isJWPlayerReady="function"==typeof window.jwplayer,this.isJWPlayerReady?this.onJWPlayerSourceReady():this.subscribe(o.LA,this.onJWPlayerSourceReady,this)}onJWPlayerSourceReady(){this.isJWPlayerReady=!0,this.initPlayer()}initPlayer(){if(this.isJWPlayerInitialized)return;const t=Pi.instance,e="string"==typeof this.settings.apiUrl&&this.settings.apiUrl?this.settings.apiUrl:"";t.getMediaObjectByMediaId(this.mediaId,e).then((t=>this.onJwPlayerMediaObjectLoaded(t))).catch((()=>this.onError())),this.isJWPlayerInitialized=!0}onJwPlayerMediaObjectLoaded(t){if(!t)return void this.onError();const{alternativeTitle:e,alternativeDescription:i}=this.settings;if(t){t.feed_instance_id&&(this.config.feed_instance_id=t.feed_instance_id),t.jwpseg&&(this.config.jwpseg=t.jwpseg);const s={sources:[]};if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const n=t.playlist[0];e?s.title=e:n.title&&(s.title=n.title),i?s.description=i:n.description&&(s.description=n.description),n.image&&(s.image=n.image),Array.isArray(n.images)&&n.images.length>0&&(s.images=n.images.filter((t=>!t.type||"image"===t.type.split("/")[0]))),n.mediaid&&(s.mediaid=n.mediaid),"number"==typeof n.pubdate&&(s.pubdate=n.pubdate),n.sources&&Array.isArray(n.sources)&&n.sources.length>0&&n.sources.forEach((t=>{const e={...t};"string"==typeof t.type&&t.type.includes("audio/")&&(this.hasAudio=!0),"string"==typeof t.type&&t.type.includes("video/")&&(this.hasVideo=!0),Number.isInteger(t.height)&&t.height>0&&(e.label=`${t.height}p`),s.sources.push(e)})),Number.isInteger(n.duration)&&(this.durationInSeconds=n.duration,s.duration=n.duration),n.tracks&&Array.isArray(n.tracks)&&n.tracks.length>0&&(s.tracks=n.tracks),n.jwpseg&&Array.isArray(n.jwpseg)&&n.jwpseg.length>0&&(s.jwpseg=n.jwpseg),n.jwpseg_client_side&&Array.isArray(n.jwpseg_client_side)&&n.jwpseg_client_side.length>0&&(s.jwpseg_client_side=n.jwpseg_client_side),n.ad_schedule_id&&(this.adScheduleId=n.ad_schedule_id)}this.config.playlist.push(s)}this.hasAudio&&!this.hasVideo&&(this.suppressAds=!0),this.config.playlist.length>0&&this.config.playlist[0].sources.length>0?this.onJwPlayerMediaObjectParsed():this.onError()}onJwPlayerMediaObjectParsed(){this.settings.disableVideoDataControl||this.suppressAds||_i.instance.isInitialized?this.initJWPlayer():_i.instance.hasError?this.onVideoDataControlReady():(this.vdcInitializationTimeoutId=setTimeout((()=>{console.error("JWPlayer: VDC init timeout"),this.onVideoDataControlReady()}),2e3),this.subscribe(o.as,this.onVideoDataControlReady,this),this.subscribe(o.iE,this.onVideoDataControlError,this))}onVideoDataControlReady(){this.isVideoDataControlReady=!0,this.vdcInitializationTimeoutId&&clearTimeout(this.vdcInitializationTimeoutId),this.unsubscribe(o.as,this.onVideoDataControlReady,this),this.unsubscribe(o.iE,this.onVideoDataControlError,this),this.isJWPlayerReady&&this.initJWPlayer()}onVideoDataControlError(){this.isVideoDataControlReady=!0,this.vdcInitializationTimeoutId&&clearTimeout(this.vdcInitializationTimeoutId),this.unsubscribe(o.as,this.onVideoDataControlReady,this),this.unsubscribe(o.iE,this.onVideoDataControlError,this),this.isJWPlayerReady&&this.initJWPlayer()}async initJWPlayer(){const t=this.findDesiredQualityIndex();-1!==t&&this.config.playlist.length>0&&Array.isArray(this.config.playlist[0].sources)&&this.config.playlist[0].sources.length>=t+1&&(this.config.playlist[0].sources[t].default=!0),this.suppressAds?this.config.advertising={}:this.config.advertising=await this.getAdvertisingConfig();const e=this.getAutopauseConfig();e&&(this.config.autoPause=e),window.jwplayer?(this.jwplayer=window.jwplayer(this.id).setup(this.config),this.jwplayer.on("beforePlay",(t=>this.onBeforePlay(t))),this.jwplayer.on("ready",(()=>{this.onReady()}))):this.onError()}onBeforePlay(){if(this.isAutoPaused){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}}}findDesiredQualityIndex(){if(!this.config.playlist.length>0)return-1;const t="sm"===xt.instance.breakpoint?640:1024;return this.config.playlist[0].sources.findIndex((e=>e.width===t))}getAutopauseConfig(){return C.default.isAndroidApp?{viewability:!0,pauseAds:!0}:this.hasAudio&&!this.hasVideo?{viewability:!1,pauseAds:!1}:this.hasAdvertisement&&window.jwDefaults&&window.jwDefaults.autoPause&&"object"==typeof window.jwDefaults.autoPause&&!(this.settings.multiboxId&&this.settings.multiboxId.length>0)?{viewability:!0,pauseAds:!0}:void 0}async getAdvertisingConfig(){if(!window.jwDefaults||!window.jwDefaults.advertising||"object"!=typeof window.jwDefaults.advertising)return{};let t;if(this.adScheduleId){const e=Pi.instance,i="string"==typeof this.settings.apiUrl&&this.settings.apiUrl?this.settings.apiUrl:"";t=await e.getAdScheduleById(this.adScheduleId,i)}const e={...window.jwDefaults.advertising};let i=[];const s=[];let{adBehavior:n}=this.settings;return t&&t.schedule&&Array.isArray(t.schedule)&&t.schedule.length>0?(Object.keys(t).forEach((i=>{"schedule"!==i&&(e[i]=t[i])})),i=t.schedule,"prerolls"===n&&(n="default")):e.schedule&&Array.isArray(e.schedule)&&e.schedule.length>0&&(i=e.schedule),i.forEach((t=>{if(!t.offset||!t.tag||!Array.isArray(t.tag)||0===t.tag.length)return;const e="pre"===t.offset||"post"===t.offset?t.offset:"mid";if("pre"===e||"prerolls"!==n){for(let i=0;i<t.tag.length;i++){const s={};try{new URL(t.tag[i]).searchParams.forEach(((t,e)=>{s[e]=t}))}catch(e){console.error(`JWPlayer - unable to parse ad tag ${t.tag[i]}`)}t.tag[i]=this.vastUrlBuilder?this.vastUrlBuilder.getVastUrl(e,this.durationInSeconds,s):""}s.push(t)}})),e.schedule=s,e.requestTimeout=1e4,e.creativeTimeout=22e3,this.hasAdvertisement=e.schedule&&Array.isArray(e.schedule)&&e.schedule.length>0,e}onReady(){this.loader&&this.loader.classList.add("hidden"),this.publish(o.R0,this.id),this.subscribe(o.JA,this.onVisibilityChange,this),this.jwplayer.on("adPause",(t=>{this.onAdPause(t)})),this.settings.multiboxId&&this.settings.multiboxId.length>0&&this.subscribe(o.kq,(t=>{this.onCloseAccordion(t.id)}))}onError(){this.el.classList.add("hidden"),console.error(`JWPLayer: Unable to load video - mediaid: ${this.mediaId?this.mediaId:"undefined"}`)}onCloseAccordion(t){if(this.settings.multiboxId===t){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}}}onVisibilityChange(t){if(this.jwplayer)if("hidden"===t){if(this.isPlaying)try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}this.isAutoPaused=!0}else if("visible"===t&&this.isAutoPaused){try{this.jwplayer.pauseAd(!1)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}this.isAutoPaused=!1}}onAdPause(t){t&&"object"==typeof t&&"pauseReason"in t&&"clickthrough"===t.pauseReason&&(this.isAutoPaused=!0)}onAdblockLayerOpened(){if(this.config.autostart="false",this.jwplayer&&(this.isPlaying||this.settings.autostart)){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}this.isAutoPaused=!0}}onAdblockLayerClosed(){if(this.jwplayer&&!this.isPlaying&&this.isAutoPaused){this.jwplayer.play();try{this.jwplayer.pauseAd(!1)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}}this.isAutoPaused=!1}get isPlaying(){if(!this.jwplayer||"function"!=typeof this.jwplayer.getState)return!1;const t=this.jwplayer.getState();return t&&"playing"===t}destroy(){super.destroy()}},MoltenBundleSource:class extends xi{constructor(...t){if(super(...t),this.isGujDisabled)return;!(!s.default.instance.consent||"boolean"!=typeof s.default.instance.consent.globallyDisabled)&&s.default.instance.consent.globallyDisabled&&this.addRequiredPurpose(d.EF.store_and_access_information_on_a_device),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.topScript=this.el.querySelector('[data-moltenbundlesource-el="top"]'),this.bottomScript=this.el.querySelector('[data-moltenbundlesource-el="bottom"]'),this.srcTop&&this.srcBottom&&(this.boundOnTopLoaded=()=>this.onTopLoaded(),this.boundOnTopError=()=>this.onTopError(),this.boundOnBottomLoaded=()=>this.onBottomLoaded(),this.topScript.addEventListener("load",this.boundOnTopLoaded),this.topScript.addEventListener("error",this.boundOnTopError),this.bottomScript.addEventListener("load",this.boundOnBottomLoaded),this.loadSrc())}onTopLoaded(){this.removeTopScriptListeners(),window.$AC&&"function"==typeof window.$AC.loadConfig?this.publish(o.fY):this.publish(o.OT),this.bottomScript.setAttribute("src",this.srcBottom)}onTopError(){this.removeTopScriptListeners(),this.removeBottomScriptListeners(),this.publish(o.OT),this.destroy()}onBottomLoaded(){this.removeBottomScriptListeners(),void 0!==window.GujAd&&void 0!==window.GujAd.cmd&&window.GujAd.cmd.push((()=>{window.GujAd.finalize()}))}removeTopScriptListeners(){"function"==typeof this.boundOnTopLoaded&&(this.topScript.removeEventListener("load",this.boundOnTopLoaded),this.boundOnTopLoaded=null),"function"==typeof this.boundOnTopError&&(this.topScript.removeEventListener("error",this.boundOnTopError),this.boundOnTopError=null)}removeBottomScriptListeners(){"function"==typeof this.boundOnBottomLoaded&&(this.bottomScript.removeEventListener("load",this.boundOnBottomLoaded),this.boundOnBottomLoaded=null)}initSrc(){const{initDelay:t}=z.Z.instance.adaSettings||{};t&&t>0?setTimeout((()=>{super.initSrc()}),t):super.initSrc()}get isGujDisabled(){return l.default.instance.hasNoAdsAccess||s.default.instance.disableAds}get isPreview(){return"1"===new URLSearchParams(window.location.search).get("gujAd")}get srcTop(){const t=this.settings.sources||{},{liveTop:e,previewTop:i}=t;return this.isPreview&&i?i:e||""}get srcBottom(){const t=this.settings.sources||{},{liveBottom:e,previewBottom:i}=t;return this.isPreview&&i?i:e||""}get src(){return this.srcTop}get scriptEl(){return this.topScript}},Outbrain:class extends xi{constructor(...t){if(super(...t),this.isInitialized=!1,this.consentDisabled=!(!s.default.instance.consent||"boolean"!=typeof s.default.instance.consent.disabled)&&s.default.instance.consent.disabled,this.settings=JSON.parse(this.data.outbrainSettings),this.app=!!C.default.isApp&&C.default.appCode,this.outbrainId=String(),this.noAds=this.settings.noAds,this.consentGloballyDisabled=!(!s.default.instance.consent||"boolean"!=typeof s.default.instance.consent.globallyDisabled)&&s.default.instance.consent.globallyDisabled,!this.noAds&&this.consentGloballyDisabled){this.noAds=!0;he.instance.ready?this.onTCDataChanged():(this.tcdataInitializationTimeoutId=setTimeout((()=>{console.error("Outbrain: TCData init timeout"),this.onTCDataChanged()}),2e3),this.subscribe(o.x1,this.onTCDataChanged,this))}else this.init()}onTCDataChanged(){if(void 0!==this.tcdataInitializationTimeoutId&&clearTimeout(this.tcdataInitializationTimeoutId),this.noAds&&this.consentGloballyDisabled){he.instance.isPurposeGranted(d.EF.store_and_access_information_on_a_device)&&(this.noAds=!1)}this.init()}init(){this.isInitialized||(this.isInitialized=!0,this.determineOutbrainId(),this.outbrainId&&(this.setTrackingReducedVersion(),this.embedOutbrainElement(),this.loadSrc()))}determineOutbrainId(){let t="web";"android"===this.app?t="android":"ios"===this.app&&(t="ios");const e=Array.from(this.settings.widgetIDs).filter((e=>e.ads===!this.noAds&&e.guaranteed===this.settings.guaranteed&&e.type===this.settings.type&&e.device===t?e.id:null));this.outbrainId=e[0]&&e[0].id?e[0].id:null}setTrackingReducedVersion(){if(!this.consentDisabled)return;const t="OB_ContextKeyValue";window[t]||(window[t]="notracking")}get partnerKey(){return C.default.isApp&&(C.default.isAndroidApp||C.default.isIOSApp)?this.settings.partnerKeys[`${C.default.isAndroidApp?"android":"ios"}${H.default.isTablet?"Tablet":"Mobile"}`]:""}embedOutbrainElement(){const t={};C.default.isApp&&(t["data-ob-installation-type"]="app_js_widget",t["data-is-secured"]="true",t["data-ob-installation-key"]=this.partnerKey,t["data-ob-user-id"]=z.Z.instance.advertisingId?z.Z.instance.advertisingId:"null",t["data-ob-app-ver"]=z.Z.instance.bundleId?z.Z.instance.bundleId:"");let e=`\n            <div class="outbrain-container">\n                <div id="${this.outbrainId}"\n                    class="OUTBRAIN"\n                    data-src="${this.settings.src}"\n                    data-widget-id="${this.outbrainId}"\n                    data-ob-template="${this.settings.template||"DE_SPIEGEL"}"\n        `;Object.keys(t).forEach((i=>{e+=`${i}="${t[i]}"\n            `})),e+=">\n                </div>\n            </div>\n        ",this.embedToWrapper(e.trim())}embedToWrapper(t){if(t)try{this.el.appendChild(document.createRange().createContextualFragment(t))}catch(e){this.el.insertAdjacentHTML("beforeend",t)}}get scriptEl(){return this.el.querySelector('[data-outbrain-el="script"]')}destroy(){this.el.innerHTML="",super.destroy()}},Search:class extends Ne{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.searchForm=this.el.querySelector("[data-search-form]"),this.searchHeadline=this.el.querySelector("[data-search-headline]"),this.searchInput=this.el.querySelector("[data-search-input] input"),this.searchInputClearIcon=this.el.querySelector('[data-search-input] [data-input-el="icon"]'),this.searchInputClearButton=this.el.querySelector("[data-search-input-clear-button]"),this.searchButton=this.el.querySelector("[data-search-button]"),this.searchFilterToggle=this.el.querySelector("[data-search-filter-toggle]"),this.searchFilterActive=this.el.querySelector("[data-search-filter-active]"),this.searchFilterInactive=this.el.querySelector("[data-search-filter-inactive]"),this.searchFilters=this.el.querySelector("[data-search-filters]"),this.searchLoader=this.el.querySelector("[data-search-loading]"),this.searchTimespanSelect=this.el.querySelector("[data-search-timespan-select] select"),this.searchFieldsetRadioGroup=this.searchFilters.elements.namedItem("fieldset"),this.searchSegmentsCheckboxes=this.searchFilters.elements.namedItem("segment"),this.searchError=this.el.querySelector("[data-search-error]"),this.searchEmpty=this.el.querySelector("[data-search-empty]"),this.resultsList=this.el.querySelector("[data-search-results]"),this.pagination=this.el.querySelector("[data-search-pagination]"),this.paginationPrev=this.el.querySelector('[data-pagination-el="back"]'),this.paginationNext=this.el.querySelector('[data-pagination-el="forward"]'),this.paginationCurrentPage=this.el.querySelector('[data-pagination-el="current"]'),this.paginationLastPage=this.el.querySelector('[data-pagination-el="total"]'),this.searchResults=document.querySelector("#suchergebnisse"),this.urlSearchString="",this.searchResultsTotal=0,this.teasers=[],this.searchTopics=[],this.scrollTrigger=!1,this.searchResultPagination={current:1,last:0,pageSize:20},this.updateHtmlInputFieldsByUrlParams(),this.searchOptions={query:this.urlSearchString,displayQuery:this.urlSearchString,fields:"",before:null,after:null,segments:[]},this.updateFilters(),this.domain=s.default.instance&&s.default.instance.domain?s.default.instance.domain:"",this.init()}init(){this.user=l.default.instance,this.boundExecuteSearch=t=>this.executeSearch(t),this.searchForm.addEventListener("submit",this.boundExecuteSearch),this.searchFilters.addEventListener("submit",this.boundExecuteSearch),window.addEventListener("popstate",this.boundExecuteSearch),this.boundFilterResults=()=>{this.updateFilters(),this.executeSearch()},this.searchFilters.addEventListener("change",this.boundFilterResults),this.boundGoToNextPage=t=>{this.goToPage(t,this.searchResultPagination.current+1),gt.Z.scrollToElement(this.searchResults)},this.paginationNext.addEventListener("click",this.boundGoToNextPage),this.boundGoToPrevPage=t=>{this.goToPage(t,this.searchResultPagination.current-1),gt.Z.scrollToElement(this.searchResults)},this.paginationPrev.addEventListener("click",this.boundGoToPrevPage),this.boundResetFilters=()=>this.resetFilters(),this.searchFilters.addEventListener("reset",this.boundResetFilters),this.boundToggleFilters=()=>this.toggleFilters(),this.searchFilterToggle.addEventListener("click",this.boundToggleFilters),r.Z.toggleElementVisibility(this.searchInputClearIcon,""!==this.searchInput.value),r.Z.toggleElementVisibility(this.searchInputClearButton,""!==this.searchInput.value),this.boundOnSearchInputValueChanged=()=>{r.Z.toggleElementVisibility(this.searchInputClearIcon,""!==this.searchInput.value),r.Z.toggleElementVisibility(this.searchInputClearButton,""!==this.searchInput.value)},this.searchInput.addEventListener("input",this.boundOnSearchInputValueChanged),this.boundOnClearIconClicked=()=>{this.searchInput.value="",r.Z.toggleElementVisibility(this.searchInputClearIcon,!1),r.Z.toggleElementVisibility(this.searchInputClearButton,!1),this.searchInput.focus()},this.searchInputClearButton.addEventListener("click",this.boundOnClearIconClicked),this.subscribe(o.W5,(()=>{this.createResultList(),this.updateHeadline(),r.Z.toggleElementVisibility(this.searchHeadline,!0),this.updatePagination()})),this.executeSearch()}updateHtmlInputFieldsByUrlParams(){const t=new URL(window.location.href);this.urlSearchString=t.searchParams.get("suchbegriff");const e=t.searchParams.get("zeitraum")?t.searchParams.get("zeitraum"):"",i=t.searchParams.get("inhalt")?t.searchParams.get("inhalt"):"",s=t.searchParams.get("erschienenBei")?t.searchParams.get("erschienenBei").split(","):[],n=t.searchParams.get("seite");this.searchResultPagination.current=n?Math.max(parseInt(n,10),1):1,this.searchFilters.removeEventListener("change",this.boundFilterResults),this.searchInput.value=this.urlSearchString,e&&this.searchTimespanSelect&&(this.searchTimespanSelect.value=e),this.searchFieldsetRadioGroup&&(this.searchFieldsetRadioGroup.value=i||this.defaultFieldsetSlug),s.length>0&&this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach((t=>{t.checked=s.includes(t.value)})),this.searchFilters.addEventListener("change",this.boundFilterResults)}executeSearch(t){let e=!0;t&&(t.preventDefault(),"submit"===t.type&&t.target===this.searchForm&&(this.searchResultPagination.current=1),"popstate"===t.type&&(e=!1)),this.teasers=[],this.searchOptions.query=this.searchInput.value,this.parseNeedle(),this.parseDisplaySearchString(),this.searchResultsTotal=0,this.clearResults(),r.Z.toggleElementVisibility(this.searchHeadline,!1),r.Z.toggleElementVisibility(this.searchError,!1),r.Z.toggleElementVisibility(this.pagination,!1),e?this.updateUrlParams():(this.updateHtmlInputFieldsByUrlParams(),this.updateFilters(),this.updateHeadline()),this.validateSearchInput()?(r.Z.toggleElementVisibility(this.searchLoader,!0),r.Z.toggleElementVisibility(this.searchEmpty,!1),this.fetchResults()):r.Z.toggleElementVisibility(this.searchEmpty,!0)}parseNeedle(){this.searchOptions.displayQuery=this.searchOptions.query,this.searchOptions.query=this.searchOptions.query.replace(/ /g,"+")}parseDisplaySearchString(){this.searchOptions.displayQuery=0===this.searchOptions.displayQuery.indexOf('"')?this.searchOptions.displayQuery.substring(1):this.searchOptions.displayQuery,this.searchOptions.displayQuery='"'===this.searchOptions.displayQuery.charAt(this.searchOptions.displayQuery.length-1)?this.searchOptions.displayQuery.slice(0,-1):this.searchOptions.displayQuery}validateSearchInput(){return this.searchOptions.query.length>0}updateUrlParams(){if(!window.history||"function"!=typeof window.history.pushState)return;const t=new URL(`${s.default.instance.urls.base}${window.location.pathname}`);if(this.searchOptions.query){t.searchParams.set("suchbegriff",this.searchOptions.query),r.Z.toggleElementVisibility(this.searchResults,!0),r.Z.toggleElementVisibility(this.searchFilters,!0),r.Z.toggleElementVisibility(this.searchFilterToggle,!0),this.searchResultPagination.current>1&&t.searchParams.set("seite",this.searchResultPagination.current),this.timespanSlug!==this.defaultTimespanSlug&&t.searchParams.set("zeitraum",this.timespanSlug),this.fieldsetSlug!==this.defaultFieldsetSlug&&t.searchParams.set("inhalt",this.fieldsetSlug);let e=!0;this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach((t=>{const i=this.settings.segments[t.value];i&&t.checked!==i.default&&(e=!1)})),e||t.searchParams.set("erschienenBei",this.segmentSlugs)}window.history.pushState({path:t.href},"",t.href)}clearResults(){this.resultsList.innerHTML=""}fetchResults(){const t={...this.searchOptions,pageSize:this.searchResultPagination.pageSize,page:this.searchResultPagination.current};"authors"===t.fields&&(t.author=t.query,t.query="",t.fields=""),Ke.instance.getTeasersBySearchOptions(t).then((t=>{if(t.code&&"page_out_of_range"===t.code)return this.searchResultPagination.current=1,void this.executeSearch();t.success?(this.teasers=Array.isArray(t.teasers)?t.teasers:[],this.searchResultsTotal=Number.isInteger(t.numResults)?t.numResults:0,this.searchResultPagination.last=Math.ceil(this.searchResultsTotal/this.searchResultPagination.pageSize),this.publish(o.W5)):this.showFetchError()})).catch((()=>this.showFetchError()))}showFetchError(){r.Z.toggleElementVisibility(this.searchLoader,!1),r.Z.toggleElementVisibility(this.searchError,!0)}createResultList(){r.Z.toggleElementVisibility(this.searchLoader,!1),0!==this.teasers.length?(this.teasers.forEach((t=>{const e=Ge.instance.create(t,"m-list-wide-compact"),i=_.Z.createElementByPrototypeId("prototype-border-separator");i&&e&&(this.resultsList.append(i),this.resultsList.append(e))})),r.Z.toggleElementVisibility(this.pagination,!0),this.publish(o.Z_),this.scan()):r.Z.toggleElementVisibility(this.searchEmpty,!0)}toggleFilters(){this.searchFilters.classList.toggle("sm:hidden"),this.searchFilters.classList.toggle("md:hidden"),this.searchFilterActive.classList.toggle("hidden"),this.searchFilterInactive.classList.toggle("hidden")}updateFilters(){const t=this.settings.fieldsets[this.fieldsetSlug];this.searchOptions.fields=t&&t.value?t.value:"";const e=this.segmentSlugs.length>0?this.segmentSlugs:this.defaultSegmentSlugs;this.searchOptions.segments=e.map((t=>this.settings.segments&&this.settings.segments[t]&&this.settings.segments[t].value?this.settings.segments[t].value:""));const i=this.settings.timespans[this.timespanSlug];i&&Number.isInteger(i.after)&&Number.isInteger(i.before)&&(this.searchOptions.after=i.after,this.searchOptions.before=i.before)}updateHeadline(){this.searchHeadline.querySelector("[data-search-result-count]").innerText=this.searchResultsTotal,this.searchHeadline.querySelector("[data-search-term]").innerText=this.searchOptions.displayQuery?this.searchOptions.displayQuery:this.searchOptions.query}updatePagination(){this.paginationCurrentPage.innerText=this.searchResultPagination.current,this.paginationLastPage.innerText=this.searchResultPagination.last,this.paginationPrev.classList.toggle("hidden",this.searchResultPagination.current<=1),this.paginationNext.classList.toggle("hidden",this.searchResultPagination.current===this.searchResultPagination.last)}goToPage(t,e){t.preventDefault();let i=e||1;i=i>1?e:1,i=i<this.searchResultPagination.last?i:this.searchResultPagination.last,this.searchResultPagination.current=i,this.executeSearch(),this.searchResults&&(this.scrollTrigger=!0)}resetFilters(){this.searchTimespanSelect&&(this.searchTimespanSelect.value=this.defaultTimespanSlug||this.searchTimespanSelect.querySelector("option").value),this.searchFieldsetRadioGroup&&(this.searchFieldsetRadioGroup.value=this.defaultFieldsetSlug),this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach((t=>{const e=this.settings.segments[t.value];t.checked=e&&e.default})),this.updateUrlParams(),this.updateFilters(),this.executeSearch()}get timespanSlug(){return this.searchTimespanSelect?this.searchTimespanSelect.value:""}get defaultTimespanSlug(){return this.settings.timespans?Object.keys(this.settings.timespans).find((t=>!!this.settings.timespans[t].default)):""}get fieldsetSlug(){return this.searchFieldsetRadioGroup?this.searchFieldsetRadioGroup.value:""}get defaultFieldsetSlug(){return this.settings.fieldsets?Object.keys(this.settings.fieldsets).find((t=>!!this.settings.fieldsets[t].default)):""}get segmentSlugs(){return this.searchSegmentsCheckboxes?Array.from(this.searchSegmentsCheckboxes).filter((t=>!!t.checked)).map((t=>t.value)):[]}get defaultSegmentSlugs(){return this.settings.segments?Object.keys(this.settings.segments).filter((t=>!!this.settings.segments[t].default)):[]}destroy(){this.searchForm.removeEventListener("submit",this.boundExecuteSearch),this.searchFilters.removeEventListener("submit",this.boundExecuteSearch),this.searchFilters.removeEventListener("change",this.boundFilterResults),this.searchFilters.removeEventListener("reset",this.boundResetFilters),this.paginationNext.removeEventListener("click",this.boundGoToNextPage),this.paginationPrev.removeEventListener("click",this.boundGoToPrevPage),this.searchFilterToggle.removeEventListener("click",this.boundToggleFilters),this.searchInput.removeEventListener("input",this.boundOnSearchInputValueChanged),this.searchInputClearButton.removeEventListener("click",this.boundOnClearIconClicked),super.destroy()}},SourcePoint:class extends Ne{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.storageObject=new E("sourcepoint","session"),this.scriptSrc=this.settings.scriptSrc,this.pendingChoiceId=null,this.isReloadMessagesPending=!1,this.isMessagePending=!1,this.init()}init(){this.subscribe(o.J5,this.openPrivacyManager),this.subscribe(o.bS,this.selectChoice),this.subscribe(o.vq,this.reloadMessages),this.subscribe(o.x1,this.onTCDataChanged),this.subscribe(o.dH,this.onLanguageSwitched),this.subscribe(o.R_,this.onPageResume),window.addEventListener("error",(t=>{this.onWindowError(t)})),this.initAuthIdCookie(),this.initSourcepointConfig(),this.initPrivacyManagerButtons(),this.attachPrivacyManagerPullToRefreshFix(),l.default.instance.isNewLoggedIn&&l.default.instance.hasNoAdsAccess?this.deleteConsentDataHistory().catch((t=>{console.error(t.message)})).finally((()=>{this.initSourcepointScript()})):this.initSourcepointScript()}initAuthIdCookie(){if(!C.default.isApp||!z.Z.instance.authId)return;const t=m.Z.get(d.E9.authId.name);t&&t===z.Z.instance.authId||m.Z.set(d.E9.authId.name,z.Z.instance.authId,{expires:d.E9.authId.expires})}initSourcepointConfig(){const{accountId:t,baseEndpoint:e,propertyHref:i,propertyId:n,campaignEnv:a,requestMessage:o}=this.settings,r=s.default.instance,d=l.default.instance,h=r.page&&r.page.category&&r.page.category.route?r.page.category.route:"";window._sp_queue=[],window._sp_={config:{accountId:t,baseEndpoint:e,isSPA:!0,consentLanguage:Re.instance.language,gdpr:{},events:{onPrivacyManagerAction:(...t)=>{2===t.length&&t[0];const e=2===t.length?t[1]:t[0];this.onPrivacyManagerAction(e)},onPMCancel:()=>{this.onPrivacyManagerCancel()},onMessageReady:(...t)=>{t[0]&&"string"==typeof t[0]&&t[0];this.onMessageReady()},onMessageReceiveData:(...t)=>{2===t.length&&t[0];const e=2===t.length?t[1]:t[0];this.onReceiveMessageData(e)},onMessageChoiceSelect:(...t)=>{3===t.length&&t[0];const e=3===t.length?t[1]:t[0],i=3===t.length?t[2]:t[1];this.onMessageChoiceSelect(e,i)},onMessageChoiceError:t=>{this.onMessageChoiceError(t)},onConsentReady:(...t)=>{4===t.length&&t[0];const e=4===t.length?t[1]:t[0],i=4===t.length?t[2]:t[1];this.onConsentReady(e,i)},onError:(...t)=>{console.error("SourcePoint onError",t)}},targetingParams:{platform:C.default.isApp?"app":"web",is_phone:H.default.isPhone,is_tablet:H.default.isTablet,is_mobile:H.default.isMobile,route:h,is_loggedIn:d.isLoggedIn,has_paid_access:d.hasPaidAccess,has_noAds_access:d.hasNoAdsAccess,has_conditional_access:d.hasConditionalAccess,disable_consent:!(!r.consent||"boolean"!=typeof r.consent.disabled)&&r.consent.disabled,lang:Re.instance.language}}},i?window._sp_.config.propertyHref=i:n&&(window._sp_.config.propertyId=n),a&&"public"!==a&&(window._sp_.config.campaignEnv=a),"article"===h&&(window._sp_.config.targetingParams.paywall_is_active=r.paywall&&r.paywall.attributes&&r.paywall.attributes.is_active,window._sp_.config.targetingParams.paywall_type=r.paywall&&r.paywall.category&&r.paywall.category.type?r.paywall.category.type:""),C.default.isApp&&(C.default.isAndroidApp?window._sp_.config.targetingParams.os="Android":C.default.isIOSApp&&(window._sp_.config.targetingParams.os="iOS"),window._sp_.config.targetingParams.app_version=C.default.appVersion);const c=!(!r.consent||"boolean"!=typeof r.consent.disabled)&&r.consent.disabled;o?window._sp_.config.targetingParams.requestMessage=o:d.hasNoAdsAccess||c||H.default.isCrawler||(window._sp_.config.targetingParams.requestMessage="consent-layer")}initPrivacyManagerButtons(){const t=Array.from(document.querySelectorAll('a[href^="#sp_privacy_manager"]'));if(t&&t.length>0)for(let e=0;e<t.length;e++){const i=t[e],s=i.hash.split("#sp_privacy_manager_")[1]?i.hash.split("#sp_privacy_manager_")[1]:"";i.addEventListener("click",(t=>{t.preventDefault(),this.publish(o.J5,s)}))}}initSourcepointScript(){const t=document.createElement("script");t.src=this.scriptSrc,t.addEventListener("error",(t=>{this.onScriptElementError(t)})),t.addEventListener("load",(t=>{this.onScriptElementLoaded(t)})),this.el.appendChild(t)}openPrivacyManager(t=""){const{privacyManagerId:e}=this.settings;if(e&&window._sp_){if("function"==typeof window._sp_.loadPrivacyManagerModal)window._sp_.loadPrivacyManagerModal(e,t);else{if(!window._sp_.gdpr||"function"!=typeof window._sp_.gdpr.loadPrivacyManagerModal)return;window._sp_.gdpr.loadPrivacyManagerModal(e,t)}this.attachPrivacyManagerResizeFix(),this.publish(o.UR)}}reloadMessages(){this.isReloadMessagesPending=!0,this.destroyMessages(),this.executeMessaging()}deleteConsentDataHistory(){return new Promise(((t,e)=>{const{siteId:i}=this.settings,s=m.Z.get(d.E9.consentUUID.name);if(i&&s){fetch(`https://sourcepoint.mgr.consensu.org/tcfv2/consent/v3/${i}?consentUUID=${s}`,{method:"DELETE",headers:{"Content-Type":"text/plain"}}).then((i=>{200!==i.status&&e(new Error(`Sourcepoint failed to delete consent data history, consentUUID: ${s}`)),t()})).catch((()=>{e(new Error(`Sourcepoint failed to delete consent data history, consentUUID: ${s}`))}))}else e(new Error("Sourcepoint failed to delete consent data history, no data"))}))}onReceiveMessageData(t){this.isReloadMessagesPending&&(this.publish(o.Fq),this.isReloadMessagesPending=!1),t&&t.msgDescription?(this.isMessagePending=!0,Ve.instance.message=t.msgDescription):this.publish(o.kH)}onMessageReady(){this.isMessagePending&&(this.publish(o.In,Ve.instance.message),this.isMessagePending=!1)}onMessageChoiceSelect(t,e){e&&(this.publish(o.Ie,e),this.onChoiceSelect(e))}onMessageChoiceError(t){this.publish(o.Rh),Ve.instance.errorOccurred=!0}onPrivacyManagerAction(t){if(this.detachPrivacyManagerResizeFix(),t&&t.purposeConsent&&t.vendorConsent){let e;"all"===t.purposeConsent&&"all"===t.vendorConsent?(e=d.vK.accept_all,this.onChoiceSelect(d.VQ.accept_all)):"none"===t.purposeConsent&&"none"===t.vendorConsent&&(e=d.vK.reject_all,this.onChoiceSelect(d.VQ.reject_all)),this.publish(o.Te,e)}}onPrivacyManagerCancel(){this.publish(o.Te,d.vK.cancel)}onChoiceSelect(t){this.pendingChoiceId||(t===d.VQ.accept_all||t===d.VQ.accept_some||t===d.VQ.reject_all?this.pendingChoiceId=t:this.publish(o.m5,t))}onConsentReady(t,e){void 0!==this.consentReadyTimeoutId&&clearTimeout(this.consentReadyTimeoutId),this.pendingChoiceId&&(this.consentReadyTimeoutId=setTimeout((()=>{const t=this.pendingChoiceId;this.pendingChoiceId=null,this.publish(o.m5,t)}),2e3)),C.default.isApp&&this.publish(o.s_,new ee(t,e))}onTCDataChanged(t){}onScriptElementLoaded(){window._sp_&&window._sp_.config&&window._sp_.config.isSPA&&"function"==typeof window._sp_.executeMessaging&&window._sp_.executeMessaging()}onLanguageSwitched(t){t&&window._sp_&&window._sp_.config&&(window._sp_.config.consentLanguage=t,this.executeMessaging())}onPageResume(){this.reloadMessages()}onScriptElementError(t){console.error("SourcePoint onScriptElementError",t),this.publish(o.Rh),Ve.instance.errorOccurred=!0}onWindowError(t){t.filename&&t.filename===this.scriptSrc&&(console.error("SourcePoint onWindowError",t),this.publish(o.Rh),Ve.instance.errorOccurred=!0)}destroyMessages(){Array.from(document.querySelectorAll('body [id^="sp_message_container"]')).filter((t=>t&&t.style&&"none"!==t.style.display)).length>0&&window._sp_&&"function"==typeof window._sp_.destroyMessages&&window._sp_.destroyMessages()}executeMessaging(){window._sp_&&"function"==typeof window._sp_.executeMessaging&&window._sp_.executeMessaging()}attachPrivacyManagerResizeFix(){H.default.isMobileSafari&&(this.boundOnWindowResize||(this.boundOnWindowResize=()=>{setTimeout((()=>{window.scrollTo(0,1)}),500)}),window.addEventListener("resize",this.boundOnWindowResize))}detachPrivacyManagerResizeFix(){H.default.isMobileSafari&&this.boundOnWindowResize&&window.removeEventListener("resize",this.boundOnWindowResize)}attachPrivacyManagerPullToRefreshFix(){if(!C.default.isAndroidApp)return;const t=document.createElement("style");t.appendChild(document.createTextNode('[id^="sp_message_container"] { overflow: visible !important; }')),document.head&&t&&document.head.appendChild(t)}},Talk:class extends Ne{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.articleId=this.settings.articleId?this.settings.articleId:"",this.embedRoot=this.el.querySelector('[data-talk-el="embedRoot"]'),this.el.classList.contains("lazyloaded")?this.init():(this.boundInit=()=>{this.init()},this.el.addEventListener("lazybeforeunveil",this.boundInit))}init(){this.settings.baseURL?window.Coral&&window.Coral.Talk?this.renderTalk():this.subscribe(o.af,(()=>{this.renderTalk()})):console.error("Talk Base URL is undefined")}renderTalk(){window.Coral.Talk.render(this.embedRoot,{talk:this.settings.baseURL,auth_token:m.Z.get("userInfo"),asset_id:this.articleId});this.el.querySelector(`iframe[src^="${this.settings.baseURL}"]`).style.minHeight="450px"}destroy(){super.destroy()}},TalkDrawer:class extends Ne{constructor(...t){super(...t),this.hash="kommentare",this.overlay=this.el.querySelector('[data-talk-drawer-el="overlay"]'),this.closeButton=this.el.querySelector('[data-talk-drawer-el="close"]'),this.toTopButton=this.el.querySelector('[data-talk-drawer-el="toTopButton"]'),this.talkDrawer=this.el.querySelector('[data-talk-drawer-el="talkDrawer"]'),this.intersectionObserverTarget=this.el.querySelector('[data-talk-drawer-el="intersectionObserverTarget"]'),this.body=document.querySelector("body"),this.talkActive=!1,this._showToTopButton=!1,this.subscribe(o.on,(t=>{this.returnFocusElement=t&&t instanceof Element?t:null,this.talkActive?this.publish(o.Cx):this.publish(o.uh,this.id)})),this.closeButton.addEventListener("click",(t=>{t.preventDefault(),this.publish(o.Cx)})),this.toTopButton.addEventListener("click",(()=>{this.scrollToTop()})),this.overlay.addEventListener("click",(()=>{this.publish(o.Cx)})),gi.instance.register(this),window.location.hash===`#${this.hash}`&&this.publish(o.uh,this.id)}onIntersectionChanged(t){this.showToTopButton=!t[0].isIntersecting}open(){this.overlay.classList.add("fixed"),this.talkDrawer.style.transform="translateX(0px)",this.talkDrawer.style.webkitTransform="translateX(0px)",this.talkDrawer.classList.remove("hidden"),this.body.classList.add("scrollbar-none"),this.intersectionObserverTarget&&!this.intersectionObserver&&this.initIntersectionObserver(),this.publish(o.oc,this),this.focusDrawer(),this.talkActive=!0}close(){this.overlay.classList.remove("fixed"),this.talkDrawer.style.transform="translateX(100%)",this.talkDrawer.style.webkitTransform="translateX(100%)",this.talkDrawer.addEventListener("ontransitionend",(()=>{this.talkDrawer.classList.add("hidden")})),this.body.classList.remove("scrollbar-none"),this.publish(o.FW,this),this.returnFocusElement&&this.returnFocusElement.focus(),this.talkActive=!1}initIntersectionObserver(){this.intersectionObserverTarget&&(this.intersectionObserver=new IntersectionObserver((t=>this.onIntersectionChanged(t)),{root:this.talkDrawer,rootMargin:"600px 0px 0px 0px"}),this.intersectionObserver.observe(this.intersectionObserverTarget))}focusDrawer(){this.closeButton.focus()}scrollToTop(){this.talkDrawer.scrollTo({top:0,behavior:"smooth"})}get id(){return this.data.componentId}get preventScrolling(){return H.default.isMobile}get showToTopButton(){return this._showToTopButton}set showToTopButton(t){t?(this.toTopButton.classList.remove("invisible"),this.toTopButton.style.transform="translateY(0px)",this.toTopButton.style.webkitTransform="translateY(0px)",this._showToTopButton=!0):(this.toTopButton.classList.add("invisible"),this.toTopButton.style.transform="translateY(100%)",this.toTopButton.style.webkitTransform="translateY(150%)",this._showToTopButton=!1)}destroy(){super.destroy()}},Video:class extends Ne{constructor(...t){super(...t),this.video=this.el.querySelector('[data-video-el="video"]'),this.poster=this.el.querySelector('[data-video-el="poster"]'),this.loader=this.el.querySelector('[data-video-el="loader"]'),!H.default.isInternetExplorer&&Element.prototype.closest&&(this.mouseTarget=this.el.closest('[data-video-el="mouseTarget"]')),this.mouseTarget=this.mouseTarget||this.el,this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.dataSrc=this.video?this.video.getAttribute("data-src"):"",this.jwplayerMediaId=this.settings.jwplayerMediaId?this.settings.jwplayerMediaId:"",this.useJwplayerVideoThumbnail=!!this.settings.useJwplayerVideoThumbnail,this.useJwplayerDeliveryAPI=!!this.settings.useJwplayerDeliveryAPI,this.lazyload=!!this.settings.lazyload,this.loop=!!this.settings.loop,this.backgroundColor=this.settings.backgroundColor?this.settings.backgroundColor:"",this.blurredBackgroundClasses=Array.isArray(this.settings.blurredBackgroundClasses)?this.settings.blurredBackgroundClasses:[],this.autoplayModeOnMouseOver=!!this.settings.autoplayOnMouseOver,this.maxPlays=Number.isInteger(this.settings.maxPlays)?this.settings.maxPlays:null,this.settings.autoplay?this.autoplayMode=!H.default.isMobile&&this.autoplayModeOnMouseOver?ji:zi:this.autoplayMode=qi,this.boundOnMouseEnter=t=>this.onMouseEnter(t),this.boundOnMouseMove=t=>this.onMouseMove(t),this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.boundOnVideoCanPlay=()=>this.onVideoCanPlay(),this.boundOnVideoLoadedMetadata=()=>this.onVideoLoadedMetadata(),this.boundOnVideoPlaying=()=>this.onVideoPlaying(),this.boundOnVideoWaiting=()=>this.onVideoWaiting(),this.boundOnVideoEnded=()=>this.onVideoEnded(),this.boundOnVideoError=()=>this.onError(),this.completedPlays=0,this.isInitialized=!1,this.isLoaded=!1,this.mode=Di,this.state=Ri,this.video&&(this.dataSrc||this.jwplayerMediaId)?this.init():this.onError()}init(){(H.default.isMobileSafari||C.default.isIOSApp)&&this.video.addEventListener("loadedmetadata",this.boundOnVideoLoadedMetadata),this.video.addEventListener("canplay",this.boundOnVideoCanPlay),this.video.addEventListener("playing",this.boundOnVideoPlaying),this.video.addEventListener("waiting",this.boundOnVideoWaiting),this.video.addEventListener("ended",this.boundOnVideoEnded),this.video.addEventListener("error",this.boundOnVideoError),this.autoplayMode!==qi&&(this.intersectionObserverTarget=this.el,this.intersectionObserver=null,this.initIntersectionObserver(),this.autoplayMode===ji&&this.mouseTarget.addEventListener("mouseenter",this.boundOnMouseEnter)),this.lazyload?this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad):this.loadVideo()}loadVideo(){this.dataSrc?(this.loadVideoByDataSrc(),this.loadPosterFallback()):this.jwplayerMediaId&&this.useJwplayerVideoThumbnail&&!this.useJwplayerDeliveryAPI?(this.loadJwVideoThumbnailWithAssembledUrl(),this.loadPosterFallback()):this.jwplayerMediaId&&this.useJwplayerDeliveryAPI?this.loadJwVideoFromApi():this.onError()}loadVideoByDataSrc(){this.dataSrc&&(this.src=this.dataSrc)}loadJwVideoThumbnailWithAssembledUrl(){if(!this.jwplayerMediaId)return;const t=Pi.instance.getVideoThumbnailByMediaId(this.jwplayerMediaId,this.offsetWidth);t?this.src=t:this.onError()}loadJwVideoFromApi(){if(!this.jwplayerMediaId)return;const t=Pi.instance;t.getMediaObjectByMediaId(this.jwplayerMediaId).then((e=>{let i="";i=this.useJwplayerVideoThumbnail?t.getVideoThumbnailByMediaObject(e,this.offsetWidth):t.getVideoByMediaObject(e,this.offsetWidth),i?(this.src=i,this.poster||this.videoPoster||(this.videoPoster=t.getImageThumbnailByMediaObject(e,this.offsetWidth))):this.onError()})).catch((()=>this.onError()))}loadPosterFallback(){if(!this.poster&&!this.videoPoster&&this.jwplayerMediaId){const t=Pi.instance;t.getMediaObjectByMediaId(this.jwplayerMediaId).then((e=>{this.videoPoster=t.getImageThumbnailByMediaObject(e,this.offsetWidth)})).catch((()=>{}))}}initIntersectionObserver(){this.intersectionObserverTarget&&(this.intersectionObserver=new IntersectionObserver((t=>this.onIntersectionChanged(t)),{threshold:[0,.5]}),this.intersectionObserver.observe(this.intersectionObserverTarget))}play(){"function"==typeof this.video.play&&this.video.play()}pause(){this.isPlaying&&"function"==typeof this.video.pause&&this.video.pause()}stop(){this.isPlaying&&"function"==typeof this.video.pause&&(this.video.pause(),this.video.currentTime=0,this.videoPoster&&"function"==typeof this.video.load&&this.video.load())}onLazyLoad(t){t.target===this.el&&this.loadVideo()}onVideoLoadedMetadata(){this.onVideoCanPlay()}onVideoCanPlay(){this.isLoaded||(this.isLoaded=!0,this.mode===Ni&&this.play())}onVideoPlaying(){this.mode===Di?this.stop():this.state=Mi}onVideoWaiting(){this.state=Ui}onVideoEnded(){this.completedPlays+=1,Number.isInteger(this.maxPlays)&&this.completedPlays>=this.maxPlays?(this.mode=Di,this.destroy()):this.loop&&this.completedPlays<this.maxPlays?this.play():this.mode=Di}onIntersectionChanged(t){t[0].isIntersecting?this.autoplayMode===zi&&t[0].intersectionRatio>=.5&&(this.mode=Ni):!this.maxPlays&&this.useJwplayerVideoThumbnail?this.mode=Di:this.mode=Bi}onMouseEnter(){this.mode=Ni}onMouseMove(t){this.isMousePositionInside(t.clientX,t.clientY)||(this.mode=Di)}onError(){this.state=Vi,this.destroy()}isMousePositionInside(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))return!1;const i=this.mouseTarget.getBoundingClientRect(),s=t-i.left,n=e-i.top;return s>=0&&s<=i.width&&n>=0&&n<=i.height}togglePoster(t){"blur"===this.backgroundColor&&this.blurredBackgroundClasses.length>0?this.blurredBackgroundClasses.forEach((e=>{this.poster.classList.toggle(e,!t)})):r.Z.toggleElementVisibility(this.poster,t)}get offsetWidth(){return this.el&&this.el.offsetWidth?this.el.offsetWidth:0}get isPlaying(){return this.video&&this.video.currentTime>0&&!this.video.paused&&!this.video.ended&&this.video.readyState>this.video.HAVE_CURRENT_DATA}get src(){return this._src?this._src:""}set src(t){t&&this.video&&!this.video.getAttribute("src")&&(this._src=t,this.video.setAttribute("src",t))}get videoPoster(){return this.video&&this.video.getAttribute("poster")?this.video.getAttribute("poster"):""}set videoPoster(t){t&&this.video&&!this.video.getAttribute("poster")&&this.video.setAttribute("poster",t)}get mode(){return this._mode?this._mode:""}set mode(t){if(this._mode!==t)switch(this._mode=t,t){case Ni:this.isLoaded?this.play():this.state=Zi,this.autoplayMode===ji&&window.addEventListener("mousemove",this.boundOnMouseMove);break;case Bi:this.isLoaded&&this.pause(),this.autoplayMode===ji&&window.removeEventListener("mousemove",this.boundOnMouseMove);break;default:this.state=Ri,this.isLoaded&&this.stop(),this.autoplayMode===ji&&window.removeEventListener("mousemove",this.boundOnMouseMove)}}set state(t){if(this._state!==t)switch(this._state=t,t){case Zi:r.Z.toggleElementVisibility(this.loader,!0),this.poster?(this.togglePoster(!0),r.Z.toggleElementVisibility(this.video,!1)):r.Z.toggleElementVisibility(this.video,!0);break;case Ui:r.Z.toggleElementVisibility(this.loader,!0),this.togglePoster(!1),r.Z.toggleElementVisibility(this.video,!0);break;case Mi:r.Z.toggleElementVisibility(this.loader,!1),this.togglePoster(!1),r.Z.toggleElementVisibility(this.video,!0);break;default:r.Z.toggleElementVisibility(this.loader,!1),this.poster?(this.togglePoster(!0),r.Z.toggleElementVisibility(this.video,!1)):r.Z.toggleElementVisibility(this.video,!0)}}destroy(){this.el.removeEventListener("lazybeforeunveil",this.boundOnLazyLoad),this.mouseTarget.removeEventListener("mouseenter",this.boundOnMouseEnter),window.removeEventListener("mousemove",this.boundOnMouseMove),this.intersectionObserver&&"function"==typeof this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect(),this.video&&(this.video.removeEventListener("canplay",this.boundOnVideoCanPlay),this.video.removeEventListener("loadedmetadata",this.boundOnVideoLoadedMetadata),this.video.removeEventListener("playing",this.boundOnVideoPlaying),this.video.removeEventListener("waiting",this.boundOnVideoWaiting),this.video.removeEventListener("ended",this.boundOnVideoEnded),this.video.removeEventListener("error",this.boundOnVideoError)),super.destroy()}},VideoDataControlSource:class extends xi{constructor(...t){if(super(...t),this.isInitialized=!1,this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.settings.disableVideoDataControl)return;!(!s.default.instance.consent||"boolean"!=typeof s.default.instance.consent.globallyDisabled)&&s.default.instance.consent.globallyDisabled&&this.addRequiredPurpose(d.EF.store_and_access_information_on_a_device),this.videoDataControl=_i.instance,"object"==typeof window.$AC&&"function"==typeof window.$AC.loadConfig?this.init():(this.el.onload=()=>{this.onLoad()},this.el.onerror=()=>{this.onError()},this.loadSrc())}onLoad(){this.init()}onError(){console.error("Unable to load VDC source"),this.publish(o.OT)}init(){this.isInitialized||(this.publish(o.fY),this.isInitialized=!0)}destroy(){super.destroy()}},Vouchers:class extends Ne{constructor(...t){super(...t),this.init()}init(){const t=this.el.querySelector('[data-vouchers-el="advertisementLabel"]'),e=this.el.querySelector('[data-vouchers-el="vouchersContainer"]');l.default.instance.hasNoAdsAccess||(t&&t.classList.remove("hidden"),e&&e.classList.remove("hidden"))}destroy(){super.destroy()}}});Vt.then((()=>(()=>{window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.destroy?window.polygon.componentLoader.destroy(vs):window.polygon.componentLoader=vs;const t={};t[o.y]=$,t[o.dO]=G,t[o._t]=nt,t[o.qB]=at,t[o._2]=ot,t[o.wv]=rt,t[o.Iy]=dt,t[o.fE]=lt,t[o.IC]=ht,t[o.uf]=V,t[o.nj]=Et,t[o.IX]=Pt,t[o._B]=re,t[o.K9]=Zt,t[o.o3]=It,t[o.aj]=mt,t[o.Rp]=Rt,t[o.R_]=ce,t[o.RL]=j,t[o.q3]=ve,Object.keys(t).forEach((e=>{r.Z.subscribe(e,((...i)=>{const s=new t[e];"function"==typeof s.execute?s.execute(...i):console.error(`Controller "${s.constructor.name}" is missing an execute function.`)}))})),window.Alpine=a.Z,a.Z.plugin(os),a.Z.plugin(rs),a.Z.plugin(ls),a.Z.plugin(ds.Z),a.Z.plugin(hs),a.Z.plugin(ps),a.Z.plugin(gs),a.Z.plugin(ms),a.Z.plugin(bs),a.Z.plugin(ws),a.Z.store("AffiliateConsent",mi),a.Z.store("Gift",wt),a.Z.store("ThirdpartyConsent",fi),a.Z.store("MediaQuery",Ot),a.Z.store("StoryHistory",$i),a.Z.store("User",Wi),a.Z.store("WebAudio",it),a.Z.start(),window.polygon.saras=we.instance,window.polygon.appBridge=z.Z.instance,window.polygon.gujAdBridge=Dt.instance,window.polygon.keyboardDetection=qt.instance,window.polygon.breakingNewsData=pt.instance,window.polygon.tcDataModel=he.instance,window.polygon.triggerHandler=Se.instance,window.polygon.browserHistoryService=gi.instance,window.polygon.overlayHandler=N.instance,window.polygon.messenger=oe.instance,window.polygon.bookmarks=k.instance,window.polygon.eventObserver=_t.instance,window.polygon.userCapping=xe.instance,window.polygon.saras.sendPageLoadEvent(),r.Z.publish(o.dO),window.polygon.lazyLoading=Ht.instance,window.polygon.componentLoader.scan(),window.polygon.webAudio=new ke})()))}},t=>{t.O(0,[35],(()=>{return e=934,t(t.s=e);var e}));t.O()}]);